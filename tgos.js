(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,d){var b=this.length>>>0,e=Number(d)||0,e=0>e?Math.ceil(e):Math.floor(e);for(0>e&&(e+=b);e<b;e++)if(e in this&&this[e]===a)return e;return-1});window.console||(window.console={},window.console.log=function(){},window.console.debug=function(){},window.console.warning=function(){});window.getWebProtocal=function(){return"https:"==document.location.protocol?"https://":"http://"};window.getAPIPath=function(){return"api.tgos.nat.gov.tw/"};
window.getServicePath=function(){return"gis.tgos.nat.gov.tw/"};window.TGOS={RES_PATH:getWebProtocal()+getAPIPath()+"TGOS_API/images/",SCRIPT_PATH:getWebProtocal()+getAPIPath()+"TGOS_API/src/"};TGOS.RegisterEvent=function(a,d){var b=0;a.prototype.events||(a.prototype.events=[]);for(b=0;b<d.length;b++)a.prototype.events.push(d[b])};window.util=util||{};util.removeEventHandler=function(a,d,b){a.removeEventListener&&a.removeEventListener(d,b,!1);a.detachEvent&&a.detachEvent("on"+d,b)};util.getInternetExplorerVersion=
function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a};util.eventTarget=function(a){return a.target?a.target:a.srcElement};util.disableDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};util.disableSelect=function(a){a.addEventListener?a.addEventListener("mousedown",util.disabler,"false"):a.attachEvent("onselectstart",util.disabler)};util.enableSelect=function(a){a.addEventListener?
a.removeEventListener("mousedown",util.disabler,"false"):a.detachEvent("onselectstart",util.disabler)};util.disabler=function(a){a.preventDefault&&util.disableDefault(a);return!1};util.intersectRect=function(a,d){return!(d.left>a.right||d.right<a.left||d.top>a.bottom||d.bottom<a.top)};util.loadScript=function(a){var d=document.createElement("script");d.src=a;document.getElementsByTagName("head")[0].appendChild(d)}})();function DeviceTest(){var a=navigator.userAgent.toLowerCase();return 0<a.indexOf("msie")&&document.all?"MSIE":0<a.indexOf("firefox")?"Firefox":0<a.indexOf("chrome")?"Chrome":0<a.indexOf("safari")?"Safari":0<a.indexOf("opera")?"Opera":0<a.indexOf("camino")?"Camino":0<a.indexOf("gecko")?"Gecko":0<a.indexOf("trident")?"Trident":0<a.indexOf("mozilla")?"Mozilla":null}function FuncAdapter(a,d){return function(b){return d.call(a,b)}}function Inherit(a,d){for(var b in d)a[b]=d[b]}
function AttachEvent(a,d,b,e){a.addEventListener?("mousewheel"==d&&"Firefox"==DeviceTest()&&(d="DOMMouseScroll"),"keydown"==d&&(e=!0),"keyup"==d&&(e=!0),e?a.ownerDocument.addEventListener(d,b,e):a.addEventListener(d,b,e)):(a.attachEvent("on"+d,b),e&&a.setCapture())}
function DetachEvent(a,d,b,e){a.removeEventListener?("mousewheel"==d&&"Firefox"==DeviceTest()&&(d="DOMMouseScroll"),e?a.ownerDocument.removeEventListener(d,b,e):a.removeEventListener(d,b,e)):(a.detachEvent("on"+d,b),e&&a.releaseCapture())};var bDebug=!0;
function AjaxAgent(a,d,b){var e=this,f=null;if(window.XMLHttpRequest)f=new XMLHttpRequest,f.overrideMimeType&&f.overrideMimeType("text/xml");else if(window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(g){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(k){}}this.Open=function(a,e){null!=f&&(f.open(a,e,d),b&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"))};this.SendRequest=function(a,b,g,k,t){function n(){g&&g.call(e,f,f.status);200!=f.status?(k&&k.call(e,
f,f.status),bDebug&&window.open("").document.write(f.responseText)):b&&b.call(e,f)}if(null!=f){d&&(f.onreadystatechange=function(){t&&t.call(e,f,f.readyState);4==f.readyState&&n()});try{f.send(a)}catch(q){return alert(q)}return d?null:(d||n(),f)}};a&&this.Open("POST",a)}function GetXMLChildNode(a,d){var b=FindXMLNodes(a,d);return null!=b&&0<b.length?b.item(0):null}function FindXMLNodes(a,d){return null==a?null:a.getElementsByTagName(d)}
function GetXMLNodeText(a){return null==a?null:a.firstChild?a.firstChild.nodeValue:""}function GetXMLNodeAttribute(a,d){return a?a.getAttribute(d):""}var nResult=0,result=null;
function LoadScript(a,d,b){function e(){"loaded"==k.readyState&&f()}function f(){var a=eval(g);result=a;d.call(null,k,a);DetachEvent(k,"readystatechange",e,!1);DetachEvent(k,"load",f,!1);document.body.removeChild(k)}var g="_result_"+b+"_"+nResult;nResult++;var k=document.createElement("script");AttachEvent(k,"readystatechange",e,!1);AttachEvent(k,"load",f,!1);document.body.appendChild(k);k.type="text/javascript";k.src=a+"&Result="+g};TGOS.TGLevelTransform=function(a,d,b,e){function f(a){for(var b=0,b=0;b<h.length-1&&!(a<h[b+1]);b++);if(b<h.length-1)var d=h[b],e=h[b+1],b=b+Math.log(a/d)/Math.log(e/d);return b}function g(a){var b=Math.floor(Math.max(0,Math.min(a,h.length-2))),d=h[b];return d*Math.pow(h[b+1]/d,a-b)}var k=d,l=b,h=[];for(a=0;a<e.length;a++)h.push(1/e[a].factor);h.reverse();var s=0,m=1;this.FitLevel=function(){this.putMapLevel(Math.round(s))};this.getBaseScaleX=function(){return k};this.putBaseScaleX=function(a){k=
a};this.getBaseScaleY=function(){return l};this.putBaseScaleY=function(a){l=a};this.getMapMaxLevel=function(){return h.length};this.getMapLevel=function(){return s};this.putMapLevel=function(a){if(s==a)return!0;var b=a>h.length-1?h.length-1:0>a?0:a;if((a>=h.length||0>a)&&s==b)return!1;s=b;m=g(s);return!0};this.getScale=function(){return k*m};this.putScale=function(a){this.putMapLevel(f(a/k))};this.getScaleX=function(){return k*m};this.getScaleY=function(){return l*m};this.getLevelScale=function(a){return k*
g(a)}};
function CachedLevelTransformation(a){function d(a){for(var b=0,b=0;b<g.length-1&&!(a<g[b+1]);b++);if(b<g.length-1)var d=g[b],e=g[b+1],b=b+Math.log(a/d)/Math.log(e/d);return b}function b(a){var b=Math.floor(Math.max(0,Math.min(a,g.length-2))),d=g[b];return d*Math.pow(g[b+1]/d,a-b)}var e=a.getBaseScaleX(),f=a.getBaseScaleY(),g=[];a=a.getScales();for(var k=0;k<a.length;k++)g.push(1/a[k].factor);g.reverse();var l=0,h=1;this.FitLevel=function(){this.putMapLevel(Math.round(l))};this.getBaseScaleX=function(){return e};
this.putBaseScaleX=function(a){e=a};this.getBaseScaleY=function(){return f};this.putBaseScaleY=function(a){f=a};this.getMapMaxLevel=function(){return g.length};this.getMapLevel=function(){return l};this.putMapLevel=function(a){if(l==a)return!0;var d=a>g.length-1?g.length-1:0>a?0:a;if((a>=g.length||0>a)&&l==d)return!1;l=d;h=b(l);return!0};this.getScale=function(){return e*h};this.putScale=function(a){this.putMapLevel(d(a/e))};this.getScaleX=function(){return e*h};this.getScaleY=function(){return f*
h};this.getLevelScale=function(a){return e*b(a)}}
function MapCachedLayer(a,d,b,e,f,g){function k(a,b){function f(a,h,l,u){for(var n=0;n<g.length;n++)if(g[n].isEqual(a.scale,h,l))return;u=d+"/GetCacheImage?S="+u+"&X="+h+"&Y="+l+"&L="+b;null!=u&&(dLeft=C+h*a.factor*z,dRight=C+(h+1)*a.factor*z,dBottom=F+l*a.factor*A,dTop=F+(l+1)*a.factor*A,g.push(new MapCachedImage(u,k,a.scale,h,l,dLeft,dTop,dRight,dBottom,e)))}var g=[],h=[],k=null,u=!0,m="",s=0,v="";a&&(m=a.Name,s=parseInt(a.FeatureType),v=a.SRName);var y=m;this.getName=function(){return m};this.putName=
function(a){m=a};this.getTitle=function(){return y};this.putTitle=function(a){y=a};this.getVisible=function(){return u};this.putVisible=function(a){u=a;k&&(k.style.visibility=u?"":"hidden")};this.getFields=function(){return null};this.getFeatureType=function(){return s};this.getSRName=function(){return v};this.Initialize=function(a){this.RemoveSelf();k=D.ownerDocument.createElement("div");D.appendChild(k);k.style.position="absolute";k.style.overflow="hidden";k.style.left="0px";k.style.top="0px";k.style.width=
"100%";k.style.height="100%";k.style.visibility=u?"":"hidden"};this.RemoveSelf=function(){if(g)for(;0<g.length;)g.pop().RemoveSelf();if(h)for(;0<h.length;)h.pop().RemoveSelf();null!=k&&(null!=l&&l.getHObject().removeChild(k),k=null)};this.MoveTiles=function(){if(null!=l&&this.getVisible())for(var a=[g,h],b=0;b<a.length;b++)for(var d=a[b],e=0;e<d.length;e++){var f=l.FromMapPoint(d[e].getLeft(),d[e].getTop()),k=l.FromMapPoint(d[e].getRight(),d[e].getBottom()),u=k.x-f.x,k=k.y-f.y;0>u&&(f.x-=u=-u);0>
k&&(f.y-=k=-k);d[e].ReloadStatus(f.x,f.y,u,k)}};this.UpdateElement=function(){this.RebuildElement()};this.RebuildElement=function(){if(null!=l&&this.getVisible()){var a=l.ToMapDistX(1);l.ToMapDistY(1);var b=0;if(0<x.length)for(b=0;b<x.length-1&&!(a<(x[b+1].factor+x[b].factor)/2);b++);var d=x[b].factor*z,e=x[b].factor*A,a=l.ToMapPoint(0,0),k=l.ToMapPoint(l.getClientWidth(),l.getClientHeight()),u=Math.floor((t-C)/d),m=Math.floor((w-F)/e),s=Math.ceil((q-C)/d),v=Math.ceil((n-F)/e),u=Math.max(Math.floor((a.x-
C)/d),u),m=Math.max(Math.floor((k.y-F)/e),m),s=Math.min(Math.ceil((k.x-C)/d),s),v=Math.min(Math.ceil((a.y-F)/e),v);a.x=u*d+C;k.y=m*e+F;k.x=s*d+C;a.y=v*e+F;e=k.y;for(e=m;e<v;e++)for(d=u;d<s;d++)f(x[b],d,e,b);u=[];s=g.length;for(d=0;d<s;d++){var v=g[d],m=v.getScale(),y=(v.getLeft()+v.getRight())/2,e=(v.getTop()+v.getBottom())/2;m==x[b].scale&&y<a.x!=y<k.x&&e<a.y!=e<k.y?u.push(v):v.IsComplete()&&v.getStatus()?h.push(v):v.RemoveSelf()}g=u;this.MoveTiles();var D=function(){for(var a=!0,b=0;b<g.length;b++)if(g[b].IsComplete())a=
g[b].getStatus();else return setTimeout(D,100);if(a)for(;0<h.length;)h.pop().RemoveSelf()};setTimeout(D,100)}}}var l=null,h=a,s=a,m=!0,t=0,n=0,q=1,w=1,z=256,A=256,C=0,F=0,B=1,u=1,x=[],D=null,v=[],y=null;LoadScript(d+"/GetCacheConfig?Format=JSON",function(a,b){var d=b.Infomation;z=parseInt(d.TileWidth);isNaN(z)&&(z=256);A=parseInt(d.TileHeight);isNaN(A)&&(A=256);C=parseFloat(d.CornerLeft);isNaN(C)&&(C=0);F=parseFloat(d.CornerLower);isNaN(F)&&(F=0);var e=d.Envelope;t=parseFloat(e.Left);n=parseFloat(e.Top);
q=parseFloat(e.Right);w=parseFloat(e.Bottom);isNaN(t)&&(t=0);isNaN(n)&&(n=1);isNaN(q)&&(q=1);isNaN(w)&&(w=0);x=[];e=d.Scales;B=parseFloat(e.ScaleFactorX);u=parseFloat(e.ScaleFactorY);isNaN(B)&&(B=1);isNaN(u)&&(u=1);var f=d.Scales.Scale;if(f&&0<f.length){var h=parseFloat(f[f.length-1]);if(isNaN(h))for(e=0;e<f.length;e++){var h=f[e],m=parseFloat(h._text),D=parseFloat(h.Factor);x.push({scale:m,factor:D})}else for(e=0;e<f.length;e++)m=parseFloat(f[e]),D=m/h,x.push({scale:m,factor:D})}if(d=d.Layers.Layer){if(d.length)for(e=
0;e<d.length;e++)v.push(new k(d[e],e));else v.push(new k(d,0));v.reverse();if(null!=l)for(e=v.length-1;0<=e;e--)v[e].Initialize(l)}0==v.length?v.push(new k(null)):1==v.length&&(v[0].putName(""),v[0].putTitle(s));y=v[v.length-1];l.RefreshMap(!0);g&&g.call(this,!0)},f);this.getName=function(){return h};this.putName=function(a){h=a};this.getTitle=function(){return s};this.putTitle=function(a){s=a};this.getVisible=function(){return m};this.putVisible=function(a){m=a;D&&(D.style.visibility=a?"":"hidden")};
this.getResourcePath=function(){return d};this.getLeft=function(){return t};this.getTop=function(){return n};this.getRight=function(){return q};this.getBottom=function(){return w};this.getImageWidth=function(){return z};this.getImageHeight=function(){return A};this.getLayers=function(){return v};this.getThematicLayer=function(){return y};this.getScales=function(){return x};this.getBaseScaleX=function(){return z/B};this.getBaseScaleY=function(){return A/u};this.Initialize=function(a){l=a;var b=l.getHObject();
D=b.ownerDocument.createElement("div");b.appendChild(D);D.style.position="absolute";D.style.overflow="hidden";D.style.left="0px";D.style.top="0px";D.style.width="100%";D.style.height="100%";D.style.visibility=m?"":"hidden";for(b=v.length-1;0<=b;b--)v[b].Initialize(a)};this.RemoveSelf=function(){for(var a=0;a<v.length;a++)v[a].RemoveSelf();l=null};this.UpdateElement=function(){if(this.getVisible()){var a;for(a=0;a<v.length;a++)v[a].UpdateElement()}};this.RebuildElement=function(){if(this.getVisible())for(var a=
0;a<v.length;a++)v[a].RebuildElement()};var E=function(a,b){y=b};this.CreateLegend=function(a){if(1<v.length)for(var b=0;b<v.length;b++)a.CreateSubLegend(v[b],E)};this.ExecuteQuery=function(a,b,d,e){null!=y&&y.ExecuteQuery(a,b,d,e)};this.getFeatureType=function(){if(null!=y)return y.getFeatureType()};this.getFields=function(){if(null!=y)return y.getFields()}}
function MapCachedImage(a,d,b,e,f,g,k,l,h,s){var m,t=!1;m=d.ownerDocument.createElement("img");m.onerror=function(){m.alt="\u4e0d\u63d0\u4f9b\u5716\u78da\u670d\u52d9";m.onload=null;m.onerror=null;t=!0};m.onmousedown=function(){return!1};m.onload=function(){m&&(m.alt="");this.loaded=!0;TGOS.TGEvent.trigger(s,"tilesloaded")};m.galleryImg=!1;m.hideFocus=!0;m.style.MozUserSelect="none";m.style.border="0 none";m.style.position="absolute";m.src=a;d.appendChild(m);this.IsComplete=function(){return m.loaded||
"complete"==m.readyState};this.getStatus=function(){return!t};this.getHObject=function(){return m};this.getScale=function(){return b};this.getLeft=function(){return g};this.getTop=function(){return k};this.getRight=function(){return l};this.getBottom=function(){return h};this.RemoveSelf=function(){m&&(m.onmousedown=null,d.removeChild(m));m=null};this.ReloadStatus=function(a,b,d,e){d=a+d;a=Math.round(a);e=b+e;b=Math.round(b);m.style.left=a+"px";m.style.top=b+"px";m.style.width=Math.round(d-a)+"px";
m.style.height=Math.round(e-b)+"px"};this.isEqual=function(a,d,g){return b==a&&e==d&&f==g}};/*

Rapha?l 2.1.2 - JavaScript Vector Library                          
Copyright ? 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    
Copyright ? 2008-2012 Sencha Labs (http://sencha.com)              
Licensed under the MIT (http://raphaeljs.com/license.html) license.
*/
(function(a){var d=/[\.\/]/,b=function(){},e=function(a,b){return a-b},f,g,k={n:{}},l=function(a,b){a=String(a);var d=g,k=Array.prototype.slice.call(arguments,2),n=l.listeners(a),q=0,w,z=[],A={},C=[],F=f;f=a;for(var B=g=0,u=n.length;B<u;B++)"zIndex"in n[B]&&(z.push(n[B].zIndex),0>n[B].zIndex&&(A[n[B].zIndex]=n[B]));for(z.sort(e);0>z[q];)if(w=A[z[q++]],C.push(w.apply(b,k)),g)return g=d,C;for(B=0;B<u;B++)if(w=n[B],"zIndex"in w)if(w.zIndex==z[q]){C.push(w.apply(b,k));if(g)break;do if(q++,(w=A[z[q]])&&
C.push(w.apply(b,k)),g)break;while(w)}else A[w.zIndex]=w;else if(C.push(w.apply(b,k)),g)break;g=d;f=F;return C.length?C:null};l._events=k;l.listeners=function(a){a=a.split(d);var b=k,e,f,g,l,w,z,A,C=[b],F=[];g=0;for(l=a.length;g<l;g++){A=[];w=0;for(z=C.length;w<z;w++)for(b=C[w].n,e=[b[a[g]],b["*"]],f=2;f--;)if(b=e[f])A.push(b),F=F.concat(b.f||[]);C=A}return F};l.on=function(a,e){a=String(a);if("function"!=typeof e)return function(){};for(var f=a.split(d),g=k,l=0,q=f.length;l<q;l++)g=g.n,g=g.hasOwnProperty(f[l])&&
g[f[l]]||(g[f[l]]={n:{}});g.f=g.f||[];l=0;for(q=g.f.length;l<q;l++)if(g.f[l]==e)return b;g.f.push(e);return function(a){+a==+a&&(e.zIndex=+a)}};l.f=function(a){var b=[].slice.call(arguments,1);return function(){l.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}};l.stop=function(){g=1};l.nt=function(a){return a?RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(f):f};l.nts=function(){return f.split(d)};l.off=l.unbind=function(a,b){if(a){var e=a.split(d),f,g,q,w,z,A,C=[k];w=0;for(z=e.length;w<
z;w++)for(A=0;A<C.length;A+=q.length-2){q=[A,1];f=C[A].n;if("*"!=e[w])f[e[w]]&&q.push(f[e[w]]);else for(g in f)f.hasOwnProperty(g)&&q.push(f[g]);C.splice.apply(C,q)}w=0;for(z=C.length;w<z;w++)for(f=C[w];f.n;){if(b){if(f.f){A=0;for(e=f.f.length;A<e;A++)if(f.f[A]==b){f.f.splice(A,1);break}!f.f.length&&delete f.f}for(g in f.n)if(f.n.hasOwnProperty(g)&&f.n[g].f){q=f.n[g].f;A=0;for(e=q.length;A<e;A++)if(q[A]==b){q.splice(A,1);break}!q.length&&delete f.n[g].f}}else for(g in delete f.f,f.n)f.n.hasOwnProperty(g)&&
f.n[g].f&&delete f.n[g].f;f=f.n}}else l._events=k={n:{}}};l.once=function(a,b){var d=function(){l.unbind(a,d);return b.apply(this,arguments)};return l.on(a,d)};l.version="0.4.2";l.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=l:"undefined"!=typeof define?define("eve",[],function(){return l}):a.eve=l})(window||this);
(function(a,d){"function"===typeof define&&define.amd?define(["eve"],function(b){return d(a,b)}):d(a,a.eve)})(this,function(a,d){function b(a){if(b.is(a,"function"))return A?a():d.on("raphael.DOMload",a);if(b.is(a,$))return b._engine.create[N](b,a.splice(0,3+b.is(a[0],R))).add(a);var e=Array.prototype.slice.call(arguments,0);if(b.is(e[e.length-1],"function")){var f=e.pop();return A?f.call(b._engine.create[N](b,e)):d.on("raphael.DOMload",function(){f.call(b._engine.create[N](b,e))})}return b._engine.create[N](b,
arguments)}function e(a){if("function"==typeof a||Object(a)!==a)return a;var b=new a.constructor,d;for(d in a)a[u](d)&&(b[d]=e(a[d]));return b}function f(a,b,d){function e(){var f=Array.prototype.slice.call(arguments,0),g=f.join("\u2400"),h=e.cache=e.cache||{},k=e.count=e.count||[];if(h[u](g)){a:for(var f=k,k=g,l=0,n=f.length;l<n;l++)if(f[l]===k){f.push(f.splice(l,1)[0]);break a}return d?d(h[g]):h[g]}1E3<=k.length&&delete h[k.shift()];k.push(g);h[g]=a[N](b,f);return d?d(h[g]):h[g]}return e}function g(){return this.hex}
function k(a,b){for(var d=[],e=0,f=a.length;f-2*!b>e;e+=2){var g=[{x:+a[e-2],y:+a[e-1]},{x:+a[e],y:+a[e+1]},{x:+a[e+2],y:+a[e+3]},{x:+a[e+4],y:+a[e+5]}];b?e?f-4==e?g[3]={x:+a[0],y:+a[1]}:f-2==e&&(g[2]={x:+a[0],y:+a[1]},g[3]={x:+a[2],y:+a[3]}):g[0]={x:+a[f-2],y:+a[f-1]}:f-4==e?g[3]=g[2]:e||(g[0]={x:+a[e],y:+a[e+1]});d.push(["C",(-g[0].x+6*g[1].x+g[2].x)/6,(-g[0].y+6*g[1].y+g[2].y)/6,(g[1].x+6*g[2].x-g[3].x)/6,(g[1].y+6*g[2].y-g[3].y)/6,g[2].x,g[2].y])}return d}function l(a,b,d,e,f,g,h,k,l){null==l&&
(l=1);l=(1<l?1:0>l?0:l)/2;for(var u=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],n=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],m=0,s=0;12>s;s++)var t=l*u[s]+l,x=t*(t*(-3*a+9*d-9*f+3*h)+6*a-12*d+6*f)-3*a+3*d,t=t*(t*(-3*b+9*e-9*g+3*k)+6*b-12*e+6*g)-3*b+3*e,m=m+n[s]*G.sqrt(x*x+t*t);return l*m}function h(a,b,d,e,f,g,h,k,u){if(!(0>u||l(a,b,d,e,f,g,h,k)<u)){var n=0.5,m=1-n,s;for(s=l(a,b,d,e,f,g,h,k,m);0.01<Z(s-u);)n/=
2,m+=(s<u?1:-1)*n,s=l(a,b,d,e,f,g,h,k,m);return m}}function s(a,d,e){a=b._path2curve(a);d=b._path2curve(d);for(var f,g,h,k,u,n,m,s,t,x,v=e?0:[],q=0,w=a.length;q<w;q++)if(t=a[q],"M"==t[0])f=u=t[1],g=n=t[2];else{"C"==t[0]?(t=[f,g].concat(t.slice(1)),f=t[6],g=t[7]):(t=[f,g,f,g,u,n,u,n],f=u,g=n);for(var y=0,D=d.length;y<D;y++)if(x=d[y],"M"==x[0])h=m=x[1],k=s=x[2];else{"C"==x[0]?(x=[h,k].concat(x.slice(1)),h=x[6],k=x[7]):(x=[h,k,h,k,m,s,m,s],h=m,k=s);var B;var C=t,z=x;B=e;var A=b.bezierBBox(C),E=b.bezierBBox(z);
if(b.isBBoxIntersect(A,E)){for(var A=l.apply(0,C),E=l.apply(0,z),A=M(~~(A/5),1),E=M(~~(E/5),1),Sa=[],F=[],ma={},Ta=B?0:[],fa=0;fa<A+1;fa++){var ka=b.findDotsAtSegment.apply(b,C.concat(fa/A));Sa.push({x:ka.x,y:ka.y,t:fa/A})}for(fa=0;fa<E+1;fa++)ka=b.findDotsAtSegment.apply(b,z.concat(fa/E)),F.push({x:ka.x,y:ka.y,t:fa/E});for(fa=0;fa<A;fa++)for(C=0;C<E;C++){var la=Sa[fa],Ka=Sa[fa+1],z=F[C],ka=F[C+1],O=0.001>Z(Ka.x-la.x)?"y":"x",N=0.001>Z(ka.x-z.x)?"y":"x",L;L=la.x;var Q=la.y,G=Ka.x,J=Ka.y,H=z.x,P=z.y,
oa=ka.x,I=ka.y;if(M(L,G)<W(H,oa)||W(L,G)>M(H,oa)||M(Q,J)<W(P,I)||W(Q,J)>M(P,I))L=void 0;else{var S=(L*J-Q*G)*(H-oa)-(L-G)*(H*I-P*oa),Ea=(L*J-Q*G)*(P-I)-(Q-J)*(H*I-P*oa),ba=(L-G)*(P-I)-(Q-J)*(H-oa);if(ba){var S=S/ba,Ea=Ea/ba,ba=+S.toFixed(2),Fa=+Ea.toFixed(2);L=ba<+W(L,G).toFixed(2)||ba>+M(L,G).toFixed(2)||ba<+W(H,oa).toFixed(2)||ba>+M(H,oa).toFixed(2)||Fa<+W(Q,J).toFixed(2)||Fa>+M(Q,J).toFixed(2)||Fa<+W(P,I).toFixed(2)||Fa>+M(P,I).toFixed(2)?void 0:{x:S,y:Ea}}else L=void 0}L&&ma[L.x.toFixed(4)]!=
L.y.toFixed(4)&&(ma[L.x.toFixed(4)]=L.y.toFixed(4),la=la.t+Z((L[O]-la[O])/(Ka[O]-la[O]))*(Ka.t-la.t),z=z.t+Z((L[N]-z[N])/(ka[N]-z[N]))*(ka.t-z.t),0<=la&&1.001>=la&&0<=z&&1.001>=z&&(B?Ta++:Ta.push({x:L.x,y:L.y,t1:W(la,1),t2:W(z,1)})))}B=Ta}else B=B?0:[];if(e)v+=B;else{A=0;for(E=B.length;A<E;A++)B[A].segment1=q,B[A].segment2=y,B[A].bez1=t,B[A].bez2=x;v=v.concat(B)}}}return v}function m(a,b,d,e,f,g){null!=a?(this.a=+a,this.b=+b,this.c=+d,this.d=+e,this.e=+f,this.f=+g):(this.a=1,this.c=this.b=0,this.d=
1,this.f=this.e=0)}function t(){return this.x+O+this.y+O+this.width+" \u00d7 "+this.height}function n(a,b,d,e,f,g){function h(a,b){var d,e,f,Ca;f=a;for(e=0;8>e;e++){Ca=((u*f+l)*f+k)*f-a;if(Z(Ca)<b)return f;d=(3*u*f+2*l)*f+k;if(1E-6>Z(d))break;f-=Ca/d}d=0;e=1;f=a;if(f<d)return d;if(f>e)return e;for(;d<e;){Ca=((u*f+l)*f+k)*f;if(Z(Ca-a)<b)break;a>Ca?d=f:e=f;f=(e-d)/2+d}return f}var k=3*b,l=3*(e-b)-k,u=1-k-l,n=3*d,m=3*(f-d)-n,t=1-n-m;return function(a,b){var d=h(a,b);return((t*d+m)*d+n)*d}(a,1/(200*g))}
function q(a,b){var d=[],e={};this.ms=b;this.times=1;if(a){for(var f in a)a[u](f)&&(e[X(f)]=a[f],d.push(X(f)));d.sort(Da)}this.anim=e;this.top=d[d.length-1];this.percents=d}function w(a,e,f,g,h,k){f=X(f);var l,t,s,x,v,q,w=a.ms,y={},D={},B={};if(g)for(q=0,A=T.length;q<A;q++){var z=T[q];if(z.el.id==e.id&&z.anim==a){z.percent!=f?(T.splice(q,1),s=1):t=z;e.attr(z.totalOrigin);break}}else g=+D;q=0;for(var A=a.percents.length;q<A;q++)if(a.percents[q]==f||a.percents[q]>g*a.top){f=a.percents[q];v=a.percents[q-
1]||0;w=w/a.top*(f-v);x=a.percents[q+1];l=a.anim[f];break}else g&&e.attr(a.anim[a.percents[q]]);if(l){if(t)t.initstatus=g,t.start=new Date-t.ms*g;else{for(var E in l)if(l[u](E)&&(ba[u](E)||e.paper.customAttributes[u](E)))switch(y[E]=e.attr(E),null==y[E]&&(y[E]=ua[E]),D[E]=l[E],ba[E]){case R:B[E]=(D[E]-y[E])/w;break;case "colour":y[E]=b.getRGB(y[E]);q=b.getRGB(D[E]);B[E]={r:(q.r-y[E].r)/w,g:(q.g-y[E].g)/w,b:(q.b-y[E].b)/w};break;case "path":q=La(y[E],D[E]);z=q[1];y[E]=q[0];B[E]=[];q=0;for(A=y[E].length;q<
A;q++){B[E][q]=[0];for(var F=1,O=y[E][q].length;F<O;F++)B[E][q][F]=(z[q][F]-y[E][q][F])/w}break;case "transform":q=e._;if(A=nb(q[E],D[E]))for(y[E]=A.from,D[E]=A.to,B[E]=[],B[E].real=!0,q=0,A=y[E].length;q<A;q++)for(B[E][q]=[y[E][q][0]],F=1,O=y[E][q].length;F<O;F++)B[E][q][F]=(D[E][q][F]-y[E][q][F])/w;else A=e.matrix||new m,q={_:{transform:q.transform},getBBox:function(){return e.getBBox(1)}},y[E]=[A.a,A.b,A.c,A.d,A.e,A.f],cb(q,D[E]),D[E]=q._.transform,B[E]=[(q.matrix.a-A.a)/w,(q.matrix.b-A.b)/w,(q.matrix.c-
A.c)/w,(q.matrix.d-A.d)/w,(q.matrix.e-A.e)/w,(q.matrix.f-A.f)/w];break;case "csv":A=L(l[E])[Q](C);z=L(y[E])[Q](C);if("clip-rect"==E)for(y[E]=z,B[E]=[],q=z.length;q--;)B[E][q]=(A[q]-y[E][q])/w;D[E]=A;break;default:for(A=[][J](l[E]),z=[][J](y[E]),B[E]=[],q=e.paper.customAttributes[E].length;q--;)B[E][q]=((A[q]||0)-(z[q]||0))/w}q=l.easing;E=b.easing_formulas[q];if(!E)if((E=L(q).match(V))&&5==E.length){var ma=E;E=function(a){return n(a,+ma[1],+ma[2],+ma[3],+ma[4],w)}}else E=qa;q=l.start||a.start||+new Date;
z={anim:a,percent:f,timestamp:q,start:q+(a.del||0),status:0,initstatus:g||0,stop:!1,ms:w,easing:E,from:y,diff:B,to:D,el:e,callback:l.callback,prev:v,next:x,repeat:k||a.times,origin:e.attr(),totalOrigin:h};T.push(z);if(g&&!t&&!s&&(z.stop=!0,z.start=new Date-w*g,1==T.length))return Ua();s&&(z.start=new Date-z.ms*g);1==T.length&&db(Ua)}d("raphael.anim.start."+e.id,e,a)}}function z(a){for(var b=0;b<T.length;b++)T[b].el.paper==a&&T.splice(b--,1)}b.version="2.1.2";b.eve=d;var A,C=/[, ]+/,F={circle:1,rect:1,
path:1,ellipse:1,text:1,image:1},B=/\{(\d+)\}/g,u="hasOwnProperty",x={doc:document,win:a},D=Object.prototype[u].call(x.win,"Raphael"),v=x.win.Raphael,y=function(){this.ca=this.customAttributes={}},E,N="apply",J="concat",U="ontouchstart"in x.win||x.win.DocumentTouch&&x.doc instanceof DocumentTouch,O=" ",L=String,Q="split",P="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[Q](O),H={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},
I=L.prototype.toLowerCase,G=Math,M=G.max,W=G.min,Z=G.abs,K=G.pow,S=G.PI,R="number",$="array",ha=Object.prototype.toString;b._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var sa=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ja={NaN:1,Infinity:1,"-Infinity":1},
V=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ca=G.round,X=parseFloat,aa=parseInt,ga=L.prototype.toUpperCase,ua=b._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"",
"stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ba=b._availableAnimAttrs={blur:R,"clip-rect":"csv",cx:R,cy:R,fill:"colour","fill-opacity":R,"font-size":R,height:R,opacity:R,path:"path",r:R,rx:R,ry:R,stroke:"colour","stroke-opacity":R,"stroke-width":R,transform:"transform",width:R,x:R,y:R},ma=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
Ea={hs:1,rg:1},Fa=/,?([achlmqrstvxz]),?/gi,ob=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
pb=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,xa=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
b._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/;var ea={},Da=function(a,b){return X(a)-X(b)},Oa=function(){},qa=function(a){return a},na=b._rectPath=function(a,b,d,e,f){return f?[["M",a+f,b],["l",d-2*f,0],["a",f,f,0,0,1,
f,f],["l",0,e-2*f],["a",f,f,0,0,1,-f,f],["l",2*f-d,0],["a",f,f,0,0,1,-f,-f],["l",0,2*f-e],["a",f,f,0,0,1,f,-f],["z"]]:[["M",a,b],["l",d,0],["l",0,e],["l",-d,0],["z"]]},Ma=function(a,b,d,e){null==e&&(e=d);return[["M",a,b],["m",0,-e],["a",d,e,0,1,1,0,2*e],["a",d,e,0,1,1,0,-2*e],["z"]]},ya=b._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return Ma(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return Ma(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return na(a.x,a.y,
a.width,a.height,a.r)},image:function(a){a=a.attrs;return na(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return na(a.x,a.y,a.width,a.height)},set:function(a){a=a._getBBox();return na(a.x,a.y,a.width,a.height)}},za=b.mapPath=function(a,b){if(!b)return a;var d,e,f,g,h,k,l;a=La(a);f=0;for(h=a.length;f<h;f++)for(l=a[f],g=1,k=l.length;g<k;g+=2)d=b.x(l[g],l[g+1]),e=b.y(l[g],l[g+1]),l[g]=d,l[g+1]=e;return a};b._g=x;b.type=x.win.SVGAngle||x.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML";if("VML"==b.type){var va=x.doc.createElement("div"),Aa;va.innerHTML='<v:shape adj="1"/>';Aa=va.firstChild;Aa.style.behavior="url(#default#VML)";if(!Aa||"object"!=typeof Aa.adj)return b.type="";va=null}b.svg=!(b.vml="VML"==b.type);b._Paper=y;b.fn=E=y.prototype=b.prototype;b._id=0;b._oid=0;b.is=function(a,b){b=I.call(b);return"finite"==b?!ja[u](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||
ha.call(a).slice(8,-1).toLowerCase()==b};b.angle=function(a,d,e,f,g,h){return null==g?(a-=e,d-=f,a||d?(180*G.atan2(-d,-a)/S+540)%360:0):b.angle(a,d,g,h)-b.angle(e,f,g,h)};b.rad=function(a){return a%360*S/180};b.deg=function(a){return 180*a/S%360};b.snapTo=function(a,d,e){e=b.is(e,"finite")?e:10;if(b.is(a,$))for(var f=a.length;f--;){if(Z(a[f]-d)<=e)return a[f]}else{a=+a;f=d%a;if(f<e)return d-f;if(f>a-e)return d-f+a}return d};b.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,
b).toUpperCase()}}(/[xy]/g,function(a){var b=16*G.random()|0;return("x"==a?b:b&3|8).toString(16)});b.setWindow=function(a){d("raphael.setWindow",b,x.win,a);x.win=a;x.doc=x.win.document;b._engine.initWin&&b._engine.initWin(x.win)};var ra=function(a){if(b.vml){var d=/^\s+|\s+$/g,e;try{var g=new ActiveXObject("htmlfile");g.write("<body>");g.close();e=g.body}catch(h){e=createPopup().document.body}var l=e.createTextRange();ra=f(function(a){try{e.style.color=L(a).replace(d,"");var b=l.queryCommandValue("ForeColor");
return"#"+("000000"+((b&255)<<16|b&65280|(b&16711680)>>>16).toString(16)).slice(-6)}catch(f){return"none"}})}else{var k=x.doc.createElement("i");k.title="Rapha\u00ebl Colour Picker";k.style.display="none";x.doc.body.appendChild(k);ra=f(function(a){k.style.color=a;return x.doc.defaultView.getComputedStyle(k,"").getPropertyValue("color")})}return ra(a)},Ga=function(){return"hsb("+[this.h,this.s,this.b]+")"},ta=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ha=function(){return this.hex},Ia=function(a,
d,e){null==d&&b.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(e=a.b,d=a.g,a=a.r);null==d&&b.is(a,"string")&&(e=b.getRGB(a),a=e.r,d=e.g,e=e.b);if(1<a||1<d||1<e)a/=255,d/=255,e/=255;return[a,d,e]},oa=function(a,d,e,f){a*=255;d*=255;e*=255;a={r:a,g:d,b:e,hex:b.rgb(a,d,e),toString:Ha};b.is(f,"finite")&&(a.opacity=f);return a};b.color=function(a){var d;b.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(d=b.hsb2rgb(a),a.r=d.r,a.g=d.g,a.b=d.b,a.hex=d.hex):b.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(d=b.hsl2rgb(a),
a.r=d.r,a.g=d.g,a.b=d.b,a.hex=d.hex):(b.is(a,"string")&&(a=b.getRGB(a)),b.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(d=b.rgb2hsl(a),a.h=d.h,a.s=d.s,a.l=d.l,d=b.rgb2hsb(a),a.v=d.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=Ha;return a};b.hsb2rgb=function(a,b,d,e){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(d=a.b,b=a.s,a=a.h,e=a.o);var f,g,h;a=360*a%360/60;h=d*b;b=h*(1-Z(a%2-1));d=f=g=d-h;a=~~a;d+=[h,b,0,0,b,h][a];f+=[b,h,h,b,0,0][a];g+=[0,0,b,h,h,b][a];return oa(d,f,g,e)};b.hsl2rgb=
function(a,b,d,e){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(d=a.l,b=a.s,a=a.h);if(1<a||1<b||1<d)a/=360,b/=100,d/=100;var f,g,h;a=360*a%360/60;h=2*b*(0.5>d?d:1-d);b=h*(1-Z(a%2-1));d=f=g=d-h/2;a=~~a;d+=[h,b,0,0,b,h][a];f+=[b,h,h,b,0,0][a];g+=[0,0,b,h,h,b][a];return oa(d,f,g,e)};b.rgb2hsb=function(a,b,d){d=Ia(a,b,d);a=d[0];b=d[1];d=d[2];var e,f;e=M(a,b,d);f=e-W(a,b,d);a=60*(((0==f?0:e==a?(b-d)/f:e==b?(d-a)/f+2:(a-b)/f+4)+360)%6)/360;return{h:a,s:0==f?0:f/e,b:e,toString:Ga}};b.rgb2hsl=function(a,
b,d){d=Ia(a,b,d);a=d[0];b=d[1];d=d[2];var e,f,g;e=M(a,b,d);f=W(a,b,d);g=e-f;a=60*(((0==g?0:e==a?(b-d)/g:e==b?(d-a)/g+2:(a-b)/g+4)+360)%6)/360;e=(e+f)/2;return{h:a,s:0==g?0:0.5>e?g/(2*e):g/(2-2*e),l:e,toString:ta}};b._path2string=function(){return this.join(",").replace(Fa,"$1")};b._preload=function(a,b){var d=x.doc.createElement("img");d.style.cssText="position:absolute;left:-9999em;top:-9999em";d.onload=function(){b.call(this);this.onload=null;x.doc.body.removeChild(this)};d.onerror=function(){x.doc.body.removeChild(this)};
x.doc.body.appendChild(d);d.src=a};b.getRGB=f(function(a){if(!a||(a=L(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!Ea[u](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=ra(a));var d,e,f,h,l;if(a=a.match(sa)){a[2]&&(f=aa(a[2].substring(5),16),e=aa(a[2].substring(3,5),16),d=aa(a[2].substring(1,3),16));a[3]&&(f=aa((l=a[3].charAt(3))+l,16),e=aa((l=a[3].charAt(2))+l,16),d=aa((l=a[3].charAt(1))+l,16));a[4]&&(l=a[4][Q](ma),
d=X(l[0]),"%"==l[0].slice(-1)&&(d*=2.55),e=X(l[1]),"%"==l[1].slice(-1)&&(e*=2.55),f=X(l[2]),"%"==l[2].slice(-1)&&(f*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(h=X(l[3])),l[3]&&"%"==l[3].slice(-1)&&(h/=100));if(a[5])return l=a[5][Q](ma),d=X(l[0]),"%"==l[0].slice(-1)&&(d*=2.55),e=X(l[1]),"%"==l[1].slice(-1)&&(e*=2.55),f=X(l[2]),"%"==l[2].slice(-1)&&(f*=2.55),"deg"!=l[0].slice(-3)&&"\u00b0"!=l[0].slice(-1)||(d/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(h=X(l[3])),l[3]&&"%"==l[3].slice(-1)&&(h/=
100),b.hsb2rgb(d,e,f,h);if(a[6])return l=a[6][Q](ma),d=X(l[0]),"%"==l[0].slice(-1)&&(d*=2.55),e=X(l[1]),"%"==l[1].slice(-1)&&(e*=2.55),f=X(l[2]),"%"==l[2].slice(-1)&&(f*=2.55),"deg"!=l[0].slice(-3)&&"\u00b0"!=l[0].slice(-1)||(d/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(h=X(l[3])),l[3]&&"%"==l[3].slice(-1)&&(h/=100),b.hsl2rgb(d,e,f,h);a={r:d,g:e,b:f,toString:g};a.hex="#"+(16777216|f|e<<8|d<<16).toString(16).slice(1);b.is(h,"finite")&&(a.opacity=h);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,
toString:g}},b);b.hsb=f(function(a,d,e){return b.hsb2rgb(a,d,e).hex});b.hsl=f(function(a,d,e){return b.hsl2rgb(a,d,e).hex});b.rgb=f(function(a,b,d){return"#"+(16777216|d|b<<8|a<<16).toString(16).slice(1)});b.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75};var b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return b.hex};b.getColor.reset=function(){delete this.start};b.parsePathString=function(a){if(!a)return null;
var d=Ba(a);if(d.arr)return pa(d.arr);var e={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},f=[];b.is(a,$)&&b.is(a[0],$)&&(f=pa(a));f.length||L(a).replace(ob,function(a,b,d){var g=[];a=b.toLowerCase();d.replace(xa,function(a,b){b&&g.push(+b)});"m"==a&&2<g.length&&(f.push([b][J](g.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)f.push([b][J](g));else for(;g.length>=e[a]&&(f.push([b][J](g.splice(0,e[a]))),e[a]););});f.toString=b._path2string;d.arr=pa(f);return f};b.parseTransformString=f(function(a){if(!a)return null;
var d=[];b.is(a,$)&&b.is(a[0],$)&&(d=pa(a));d.length||L(a).replace(pb,function(a,b,e){var f=[];I.call(b);e.replace(xa,function(a,b){b&&f.push(+b)});d.push([b][J](f))});d.toString=b._path2string;return d});var Ba=function(a){var b=Ba.ps=Ba.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var d in b)b[u](d)&&d!=a&&(b[d].sleep--,!b[d].sleep&&delete b[d])});return b[a]};b.findDotsAtSegment=function(a,b,d,e,f,g,h,l,k){var u=1-k,n=K(u,3),m=K(u,2),t=k*k,s=t*k,x=n*a+3*m*k*d+3*u*k*k*f+
s*h,n=n*b+3*m*k*e+3*u*k*k*g+s*l,m=a+2*k*(d-a)+t*(f-2*d+a),s=b+2*k*(e-b)+t*(g-2*e+b),q=d+2*k*(f-d)+t*(h-2*f+d),t=e+2*k*(g-e)+t*(l-2*g+e);a=u*a+k*d;b=u*b+k*e;f=u*f+k*h;g=u*g+k*l;l=90-180*G.atan2(m-q,s-t)/S;(m>q||s<t)&&(l+=180);return{x:x,y:n,m:{x:m,y:s},n:{x:q,y:t},start:{x:a,y:b},end:{x:f,y:g},alpha:l}};b.bezierBBox=function(a,d,e,f,g,h,l,k){b.is(a,"array")||(a=[a,d,e,f,g,h,l,k]);a=eb.apply(null,a);return{x:a.min.x,y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};b.isPointInsideBBox=
function(a,b,d){return b>=a.x&&b<=a.x2&&d>=a.y&&d<=a.y2};b.isBBoxIntersect=function(a,d){var e=b.isPointInsideBBox;return e(d,a.x,a.y)||e(d,a.x2,a.y)||e(d,a.x,a.y2)||e(d,a.x2,a.y2)||e(a,d.x,d.y)||e(a,d.x2,d.y)||e(a,d.x,d.y2)||e(a,d.x2,d.y2)||(a.x<d.x2&&a.x>d.x||d.x<a.x2&&d.x>a.x)&&(a.y<d.y2&&a.y>d.y||d.y<a.y2&&d.y>a.y)};b.pathIntersection=function(a,b){return s(a,b)};b.pathIntersectionNumber=function(a,b){return s(a,b,1)};b.isPointInsidePath=function(a,d,e){var f=b.pathBBox(a);return b.isPointInsideBBox(f,
d,e)&&1==s(a,[["M",d,e],["H",f.x2+10]],1)%2};b._removedFactory=function(a){return function(){d("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object",a)}};var Va=b.pathBBox=function(a){var b=Ba(a);if(b.bbox)return e(b.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=La(a);for(var d=0,f=0,g=[],h=[],l,k=0,u=a.length;k<u;k++)l=a[k],"M"==l[0]?(d=l[1],f=l[2],g.push(d),h.push(f)):(d=eb(d,f,l[1],l[2],l[3],l[4],l[5],l[6]),g=g[J](d.min.x,d.max.x),h=h[J](d.min.y,
d.max.y),d=l[5],f=l[6]);a=W[N](0,g);l=W[N](0,h);g=M[N](0,g);h=M[N](0,h);k=g-a;u=h-l;h={x:a,y:l,x2:g,y2:h,width:k,height:u,cx:a+k/2,cy:l+u/2};b.bbox=e(h);return h},pa=function(a){a=e(a);a.toString=b._path2string;return a},qb=b._pathToRelative=function(a){var d=Ba(a);if(d.rel)return pa(d.rel);b.is(a,$)&&b.is(a&&a[0],$)||(a=b.parsePathString(a));var e=[],f=0,g=0,h=0,l=0,k=0;"M"==a[0][0]&&(f=a[0][1],g=a[0][2],h=f,l=g,k++,e.push(["M",f,g]));for(var u=a.length;k<u;k++){var n=e[k]=[],m=a[k];if(m[0]!=I.call(m[0]))switch(n[0]=
I.call(m[0]),n[0]){case "a":n[1]=m[1];n[2]=m[2];n[3]=m[3];n[4]=m[4];n[5]=m[5];n[6]=+(m[6]-f).toFixed(3);n[7]=+(m[7]-g).toFixed(3);break;case "v":n[1]=+(m[1]-g).toFixed(3);break;case "m":h=m[1],l=m[2];default:for(var t=1,s=m.length;t<s;t++)n[t]=+(m[t]-(t%2?f:g)).toFixed(3)}else for(e[k]=[],"m"==m[0]&&(h=m[1]+f,l=m[2]+g),n=0,t=m.length;n<t;n++)e[k][n]=m[n];m=e[k].length;switch(e[k][0]){case "z":f=h;g=l;break;case "h":f+=+e[k][m-1];break;case "v":g+=+e[k][m-1];break;default:f+=+e[k][m-2],g+=+e[k][m-
1]}}e.toString=b._path2string;d.rel=pa(e);return e},fb=b._pathToAbsolute=function(a){var d=Ba(a);if(d.abs)return pa(d.abs);b.is(a,$)&&b.is(a&&a[0],$)||(a=b.parsePathString(a));if(!a||!a.length)return[["M",0,0]];var e=[],f=0,g=0,h=0,l=0,u=0;"M"==a[0][0]&&(f=+a[0][1],g=+a[0][2],h=f,l=g,u++,e[0]=["M",f,g]);for(var n=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),m,t=u,s=a.length;t<s;t++){e.push(u=[]);m=a[t];if(m[0]!=ga.call(m[0]))switch(u[0]=ga.call(m[0]),u[0]){case "A":u[1]=
m[1];u[2]=m[2];u[3]=m[3];u[4]=m[4];u[5]=m[5];u[6]=+(m[6]+f);u[7]=+(m[7]+g);break;case "V":u[1]=+m[1]+g;break;case "H":u[1]=+m[1]+f;break;case "R":for(var x=[f,g][J](m.slice(1)),q=2,v=x.length;q<v;q++)x[q]=+x[q]+f,x[++q]=+x[q]+g;e.pop();e=e[J](k(x,n));break;case "M":h=+m[1]+f,l=+m[2]+g;default:for(q=1,v=m.length;q<v;q++)u[q]=+m[q]+(q%2?f:g)}else if("R"==m[0])x=[f,g][J](m.slice(1)),e.pop(),e=e[J](k(x,n)),u=["R"][J](m.slice(-2));else for(x=0,q=m.length;x<q;x++)u[x]=m[x];switch(u[0]){case "Z":f=h;g=l;
break;case "H":f=u[1];break;case "V":g=u[1];break;case "M":h=u[u.length-2],l=u[u.length-1];default:f=u[u.length-2],g=u[u.length-1]}}e.toString=b._path2string;d.abs=pa(e);return e},gb=function(a,b,d,e,f,g){var h=1/3,l=2/3;return[h*a+l*d,h*b+l*e,h*f+l*d,h*g+l*e,f,g]},hb=function(a,b,d,e,g,h,l,k,u,m){var n=120*S/180,t=S/180*(+g||0),s=[],q,x=f(function(a,b,d){var e=a*G.cos(d)-b*G.sin(d);a=a*G.sin(d)+b*G.cos(d);return{x:e,y:a}});if(m)y=m[0],q=m[1],h=m[2],v=m[3];else{q=x(a,b,-t);a=q.x;b=q.y;q=x(k,u,-t);
k=q.x;u=q.y;G.cos(S/180*g);G.sin(S/180*g);q=(a-k)/2;y=(b-u)/2;v=q*q/(d*d)+y*y/(e*e);1<v&&(v=G.sqrt(v),d*=v,e*=v);var v=d*d,w=e*e,v=(h==l?-1:1)*G.sqrt(Z((v*w-v*y*y-w*q*q)/(v*y*y+w*q*q)));h=v*d*y/e+(a+k)/2;var v=v*-e*q/d+(b+u)/2,y=G.asin(((b-v)/e).toFixed(9));q=G.asin(((u-v)/e).toFixed(9));y=a<h?S-y:y;q=k<h?S-q:q;0>y&&(y=2*S+y);0>q&&(q=2*S+q);l&&y>q&&(y-=2*S);!l&&q>y&&(q-=2*S)}if(Z(q-y)>n){var s=q,w=k,D=u;q=y+n*(l&&q>y?1:-1);k=h+d*G.cos(q);u=v+e*G.sin(q);s=hb(k,u,d,e,g,0,l,w,D,[q,s,h,v])}h=q-y;g=G.cos(y);
n=G.sin(y);l=G.cos(q);q=G.sin(q);h=G.tan(h/4);d=4/3*d*h;h*=4/3*e;e=[a,b];a=[a+d*n,b-h*g];b=[k+d*q,u-h*l];k=[k,u];a[0]=2*e[0]-a[0];a[1]=2*e[1]-a[1];if(m)return[a,b,k][J](s);s=[a,b,k][J](s).join()[Q](",");m=[];k=0;for(u=s.length;k<u;k++)m[k]=k%2?x(s[k-1],s[k],t).y:x(s[k],s[k+1],t).x;return m},Pa=function(a,b,d,e,f,g,h,l,k){var u=1-k;return{x:K(u,3)*a+3*K(u,2)*k*d+3*u*k*k*f+K(k,3)*h,y:K(u,3)*b+3*K(u,2)*k*e+3*u*k*k*g+K(k,3)*l}},eb=f(function(a,b,d,e,f,g,h,l){var k=f-2*d+a-(h-2*f+d),u=2*(d-a)-2*(f-d),
m=a-d,n=(-u+G.sqrt(u*u-4*k*m))/2/k,k=(-u-G.sqrt(u*u-4*k*m))/2/k,q=[b,l],t=[a,h];"1e12"<Z(n)&&(n=0.5);"1e12"<Z(k)&&(k=0.5);0<n&&1>n&&(n=Pa(a,b,d,e,f,g,h,l,n),t.push(n.x),q.push(n.y));0<k&&1>k&&(n=Pa(a,b,d,e,f,g,h,l,k),t.push(n.x),q.push(n.y));k=g-2*e+b-(l-2*g+e);u=2*(e-b)-2*(g-e);m=b-e;n=(-u+G.sqrt(u*u-4*k*m))/2/k;k=(-u-G.sqrt(u*u-4*k*m))/2/k;"1e12"<Z(n)&&(n=0.5);"1e12"<Z(k)&&(k=0.5);0<n&&1>n&&(n=Pa(a,b,d,e,f,g,h,l,n),t.push(n.x),q.push(n.y));0<k&&1>k&&(n=Pa(a,b,d,e,f,g,h,l,k),t.push(n.x),q.push(n.y));
return{min:{x:W[N](0,t),y:W[N](0,q)},max:{x:M[N](0,t),y:M[N](0,q)}}}),La=b._path2curve=f(function(a,b){var d=!b&&Ba(a);if(!b&&d.curve)return pa(d.curve);var e=fb(a),f=b&&fb(b),g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=function(a,b,d){if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]in{T:1,Q:1}||(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][J](hb[N](0,[b.x,b.y][J](a.slice(1))));break;case "S":"C"==d||"S"==d?(d=2*b.x-
b.bx,b=2*b.y-b.by):(d=b.x,b=b.y);a=["C",d,b][J](a.slice(1));break;case "T":"Q"==d||"T"==d?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y);a=["C"][J](gb(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][J](gb(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][J]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][J]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][J]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][J]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},k=function(a,
b){if(7<a[b].length){a[b].shift();for(var d=a[b];d.length;)a.splice(b++,0,["C"][J](d.splice(0,6)));a.splice(b,1);m=M(e.length,f&&f.length||0)}},u=function(a,b,d,g,h){a&&b&&"M"==a[h][0]&&"M"!=b[h][0]&&(b.splice(h,0,["M",g.x,g.y]),d.bx=0,d.by=0,d.x=a[h][1],d.y=a[h][2],m=M(e.length,f&&f.length||0))},n=0,m=M(e.length,f&&f.length||0);for(;n<m;n++){e[n]=l(e[n],g);k(e,n);f&&(f[n]=l(f[n],h));f&&k(f,n);u(e,f,g,h,n);u(f,e,h,g,n);var q=e[n],t=f&&f[n],s=q.length,x=f&&t.length;g.x=q[s-2];g.y=q[s-1];g.bx=X(q[s-
4])||g.x;g.by=X(q[s-3])||g.y;h.bx=f&&(X(t[x-4])||h.x);h.by=f&&(X(t[x-3])||h.y);h.x=f&&t[x-2];h.y=f&&t[x-1]}f||(d.curve=pa(e));return f?[e,f]:e},null,pa);b._parseDots=f(function(a){for(var d=[],e=0,f=a.length;e<f;e++){var g={},h=a[e].match(/^([^:]*):?([\d\.]*)/);g.color=b.getRGB(h[1]);if(g.color.error)return null;g.color=g.color.hex;h[2]&&(g.offset=h[2]+"%");d.push(g)}e=1;for(f=d.length-1;e<f;e++)if(!d[e].offset){a=X(d[e-1].offset||0);h=0;for(g=e+1;g<f;g++)if(d[g].offset){h=d[g].offset;break}h||(h=
100,g=f);h=X(h);for(h=(h-a)/(g-e+1);e<g;e++)a+=h,d[e].offset=a+"%"}return d});var Qa=b._tear=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};b._tofront=function(a,b){b.top!==a&&(Qa(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};b._toback=function(a,b){b.bottom!==a&&(Qa(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};b._insertafter=function(a,b,d){Qa(a,d);b==d.top&&(d.top=a);b.next&&(b.next.prev=a);
a.next=b.next;a.prev=b;b.next=a};b._insertbefore=function(a,b,d){Qa(a,d);b==d.bottom&&(d.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b};var rb=b.toMatrix=function(a,b){var d=Va(a),e={_:{transform:""},getBBox:function(){return d}};cb(e,b);return e.matrix};b.transformPath=function(a,b){return za(a,rb(a,b))};var cb=b._extractTransform=function(a,d){if(null==d)return a._.transform;d=L(d).replace(/\.{3}|\u2026/g,a._.transform||"");var e=b.parseTransformString(d),f=0,g=0,h=0,l=1,k=1,
u=a._,h=new m;u.transform=e||[];if(e)for(var g=0,n=e.length;g<n;g++){var q=e[g],t=q.length,s=L(q[0]).toLowerCase(),x=q[0]!=s,v=x?h.invert():0,w;"t"==s&&3==t?x?(t=v.x(0,0),s=v.y(0,0),x=v.x(q[1],q[2]),v=v.y(q[1],q[2]),h.translate(x-t,v-s)):h.translate(q[1],q[2]):"r"==s?2==t?(w=w||a.getBBox(1),h.rotate(q[1],w.x+w.width/2,w.y+w.height/2),f+=q[1]):4==t&&(x?(x=v.x(q[2],q[3]),v=v.y(q[2],q[3]),h.rotate(q[1],x,v)):h.rotate(q[1],q[2],q[3]),f+=q[1]):"s"==s?2==t||3==t?(w=w||a.getBBox(1),h.scale(q[1],q[t-1],w.x+
w.width/2,w.y+w.height/2),l*=q[1],k*=q[t-1]):5==t&&(x?(x=v.x(q[3],q[4]),v=v.y(q[3],q[4]),h.scale(q[1],q[2],x,v)):h.scale(q[1],q[2],q[3],q[4]),l*=q[1],k*=q[2]):"m"==s&&7==t&&h.add(q[1],q[2],q[3],q[4],q[5],q[6]);u.dirtyT=1;a.matrix=h}a.matrix=h;u.sx=l;u.sy=k;u.deg=f;u.dx=g=h.e;u.dy=h=h.f;1==l&&1==k&&!f&&u.bbox?(u.bbox.x+=+g,u.bbox.y+=+h):u.dirtyT=1},ib=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,
0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},nb=b._equaliseTransform=function(a,d){d=L(d).replace(/\.{3}|\u2026/g,a);a=b.parseTransformString(a)||[];d=b.parseTransformString(d)||[];for(var e=M(a.length,d.length),f=[],g=[],h=0,l,k,u,n;h<e;h++){u=a[h]||ib(d[h]);n=d[h]||ib(u);if(u[0]!=n[0]||"r"==u[0].toLowerCase()&&(u[2]!=n[2]||u[3]!=n[3])||"s"==u[0].toLowerCase()&&(u[3]!=n[3]||u[4]!=n[4]))return;f[h]=[];g[h]=[];l=0;for(k=M(u.length,n.length);l<k;l++)l in u&&(f[h][l]=
u[l]),l in n&&(g[h][l]=n[l])}return{from:f,to:g}};b._getContainer=function(a,d,e,f){var g;g=null!=f||b.is(a,"object")?a:x.doc.getElementById(a);if(null!=g)return g.tagName?null==d?{container:g,width:g.style.pixelWidth||g.offsetWidth,height:g.style.pixelHeight||g.offsetHeight}:{container:g,width:d,height:e}:{container:1,x:a,y:d,width:e,height:f}};b.pathToRelative=qb;b._engine={};b.path2curve=La;b.matrix=function(a,b,d,e,f,g){return new m(a,b,d,e,f,g)};(function(a){function d(a){return a[0]*a[0]+a[1]*
a[1]}function e(a){var b=G.sqrt(d(a));a[0]&&(a[0]/=b);a[1]&&(a[1]/=b)}a.add=function(a,b,d,e,f,g){var h=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]];b=[[a,d,f],[b,e,g],[0,0,1]];a&&a instanceof m&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(d=0;3>d;d++){for(e=f=0;3>e;e++)f+=l[a][e]*b[e][d];h[a][d]=f}this.a=h[0][0];this.b=h[1][0];this.c=h[0][1];this.d=h[1][1];this.e=h[0][2];this.f=h[1][2]};a.invert=function(){var a=this.a*this.d-this.b*this.c;return new m(this.d/
a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new m(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,b){this.add(1,0,0,1,a,b)};a.scale=function(a,b,d,e){null==b&&(b=a);(d||e)&&this.add(1,0,0,1,d,e);this.add(a,0,0,b,0,0);(d||e)&&this.add(1,0,0,1,-d,-e)};a.rotate=function(a,d,e){a=b.rad(a);d=d||0;e=e||0;var f=+G.cos(a).toFixed(9);a=+G.sin(a).toFixed(9);this.add(f,a,-a,f,d,e);this.add(1,0,0,1,-d,-e)};a.x=function(a,
b){return a*this.a+b*this.c+this.e};a.y=function(a,b){return a*this.b+b*this.d+this.f};a.get=function(a){return+this[L.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return b.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+
this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var f=[[this.a,this.c],[this.b,this.d]];a.scalex=G.sqrt(d(f[0]));e(f[0]);a.shear=f[0][0]*f[1][0]+f[0][1]*f[1][1];f[1]=[f[1][0]-f[0][0]*a.shear,f[1][1]-f[0][1]*a.shear];a.scaley=G.sqrt(d(f[1]));e(f[1]);a.shear/=a.scaley;var g=-f[0][1],f=f[1][1];0>f?(a.rotate=b.deg(G.acos(f)),0>g&&(a.rotate=360-a.rotate)):a.rotate=b.deg(G.asin(g));
a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this[Q]();return a.isSimple?(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,
0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(m.prototype);var Ra=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Ra&&4>Ra[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ra&&8>Ra[1]?E.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:E.safari=Oa;for(var sb=function(){this.returnValue=
!1},tb=function(){return this.originalEvent.preventDefault()},ub=function(){this.cancelBubble=!0},vb=function(){return this.originalEvent.stopPropagation()},jb=function(a){return{x:a.clientX+(x.doc.documentElement.scrollLeft||x.doc.body.scrollLeft),y:a.clientY+(x.doc.documentElement.scrollTop||x.doc.body.scrollTop)}},wb=function(){if(x.doc.addEventListener)return function(a,b,d,e){var f=function(a){var b=jb(a);return d.call(e,a,b.x,b.y)};a.addEventListener(b,f,!1);U&&H[b]&&a.addEventListener(H[b],
function(b){for(var f=jb(b),g=b,h=0,l=b.targetTouches&&b.targetTouches.length;h<l;h++)if(b.targetTouches[h].target==a){b=b.targetTouches[h];b.originalEvent=g;b.preventDefault=tb;b.stopPropagation=vb;break}return d.call(e,b,f.x,f.y)},!1);return function(){a.removeEventListener(b,f,!1);U&&H[b]&&a.removeEventListener(H[b],f,!1);return!0}};if(x.doc.attachEvent)return function(a,b,d,e){var f=function(a){a=a||x.win.event;var b=a.clientX+(x.doc.documentElement.scrollLeft||x.doc.body.scrollLeft),f=a.clientY+
(x.doc.documentElement.scrollTop||x.doc.body.scrollTop);a.preventDefault=a.preventDefault||sb;a.stopPropagation=a.stopPropagation||ub;return d.call(e,a,b,f)};a.attachEvent("on"+b,f);return function(){a.detachEvent("on"+b,f);return!0}}}(),wa=[],Wa=function(a){for(var b=a.clientX,e=a.clientY,f=x.doc.documentElement.scrollTop||x.doc.body.scrollTop,g=x.doc.documentElement.scrollLeft||x.doc.body.scrollLeft,h,l=wa.length;l--;){h=wa[l];if(U&&a.touches)for(var k=a.touches.length,u;k--;){if(u=a.touches[k],
u.identifier==h.el._drag.id){b=u.clientX;e=u.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var k=h.el.node,n=k.nextSibling,m=k.parentNode,q=k.style.display;x.win.opera&&m.removeChild(k);k.style.display="none";u=h.el.paper.getElementByPoint(b,e);k.style.display=q;x.win.opera&&(n?m.insertBefore(k,n):m.appendChild(k));u&&d("raphael.drag.over."+h.el.id,h.el,u);b+=g;e+=f;d("raphael.drag.move."+h.el.id,h.move_scope||h.el,b-h.el._drag.x,e-h.el._drag.y,b,e,a)}},
Xa=function(a){b.unmousemove(Wa).unmouseup(Xa);for(var e=wa.length,f;e--;)f=wa[e],f.el._drag={},d("raphael.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,a);wa=[]},Y=b.el={},kb=P.length;kb--;)(function(a){b[a]=Y[a]=function(d,e){b.is(d,"function")&&(this.events=this.events||[],this.events.push({name:a,f:d,unbind:wb(this.shape||this.node||x.doc,a,d,e||this)}));return this};b["un"+a]=Y["un"+a]=function(d){for(var e=this.events||[],f=e.length;f--;)e[f].name!=a||!b.is(d,"undefined")&&
e[f].f!=d||(e[f].unbind(),e.splice(f,1),!e.length&&delete this.events);return this}})(P[kb]);Y.data=function(a,e){var f=ea[this.id]=ea[this.id]||{};if(0==arguments.length)return f;if(1==arguments.length){if(b.is(a,"object")){for(var g in a)a[u](g)&&this.data(g,a[g]);return this}d("raphael.data.get."+this.id,this,f[a],a);return f[a]}f[a]=e;d("raphael.data.set."+this.id,this,e,a);return this};Y.removeData=function(a){null==a?ea[this.id]={}:ea[this.id]&&delete ea[this.id][a];return this};Y.getData=function(){return e(ea[this.id]||
{})};Y.hover=function(a,b,d,e){return this.mouseover(a,d).mouseout(b,e||d)};Y.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var Ja=[];Y.drag=function(a,e,f,g,h,l){function k(u){(u.originalEvent||u).preventDefault();var n=u.clientX,m=u.clientY,q=x.doc.documentElement.scrollTop||x.doc.body.scrollTop,t=x.doc.documentElement.scrollLeft||x.doc.body.scrollLeft;this._drag.id=u.identifier;if(U&&u.touches)for(var s=u.touches.length,v;s--;)if(v=u.touches[s],this._drag.id=v.identifier,v.identifier==
this._drag.id){n=v.clientX;m=v.clientY;break}this._drag.x=n+t;this._drag.y=m+q;!wa.length&&b.mousemove(Wa).mouseup(Xa);wa.push({el:this,move_scope:g,start_scope:h,end_scope:l});e&&d.on("raphael.drag.start."+this.id,e);a&&d.on("raphael.drag.move."+this.id,a);f&&d.on("raphael.drag.end."+this.id,f);d("raphael.drag.start."+this.id,h||g||this,u.clientX+t,u.clientY+q,u)}this._drag={};Ja.push({el:this,start:k});this.mousedown(k);return this};Y.onDragOver=function(a){a?d.on("raphael.drag.over."+this.id,a):
d.unbind("raphael.drag.over."+this.id)};Y.undrag=function(){for(var a=Ja.length;a--;)Ja[a].el==this&&(this.unmousedown(Ja[a].start),Ja.splice(a,1),d.unbind("raphael.drag.*."+this.id));!Ja.length&&b.unmousemove(Wa).unmouseup(Xa);wa=[]};E.circle=function(a,d,e){a=b._engine.circle(this,a||0,d||0,e||0);this.__set__&&this.__set__.push(a);return a};E.rect=function(a,d,e,f,g){a=b._engine.rect(this,a||0,d||0,e||0,f||0,g||0);this.__set__&&this.__set__.push(a);return a};E.ellipse=function(a,d,e,f){a=b._engine.ellipse(this,
a||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(a);return a};E.path=function(a){a&&!b.is(a,"string")&&!b.is(a[0],$)&&(a+="");var d=b._engine.path(b.format[N](b,arguments),this);this.__set__&&this.__set__.push(d);return d};E.image=function(a,d,e,f,g){a=b._engine.image(this,a||"about:blank",d||0,e||0,f||0,g||0);this.__set__&&this.__set__.push(a);return a};E.text=function(a,d,e){a=b._engine.text(this,a||0,d||0,L(e));this.__set__&&this.__set__.push(a);return a};E.set=function(a){!b.is(a,"array")&&
(a=Array.prototype.splice.call(arguments,0,arguments.length));var d=new Na(a);this.__set__&&this.__set__.push(d);d.paper=this;d.type="set";return d};E.setStart=function(a){this.__set__=a||this.set()};E.setFinish=function(a){a=this.__set__;delete this.__set__;return a};E.setSize=function(a,d){return b._engine.setSize.call(this,a,d)};E.setViewBox=function(a,d,e,f,g){return b._engine.setViewBox.call(this,a,d,e,f,g)};E.top=E.bottom=null;E.raphael=b;E.getElementByPoint=function(a,b){var d,e,f=this.canvas,
g=x.doc.elementFromPoint(a,b);if(x.win.opera&&"svg"==g.tagName){e=f.getBoundingClientRect();d=f.ownerDocument;var h=d.body,l=d.documentElement;d=e.top+(x.win.pageYOffset||l.scrollTop||h.scrollTop)-(l.clientTop||h.clientTop||0);e=e.left+(x.win.pageXOffset||l.scrollLeft||h.scrollLeft)-(l.clientLeft||h.clientLeft||0);h=f.createSVGRect();h.x=a-e;h.y=b-d;h.width=h.height=1;d=f.getIntersectionList(h,null);d.length&&(g=d[d.length-1])}if(!g)return null;for(;g.parentNode&&g!=f.parentNode&&!g.raphael;)g=g.parentNode;
g==this.canvas.parentNode&&(g=f);return g=g&&g.raphael?this.getById(g.raphaelid):null};E.getElementsByBBox=function(a){var d=this.set();this.forEach(function(e){b.isBBoxIntersect(e.getBBox(),a)&&d.push(e)});return d};E.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};E.forEach=function(a,b){for(var d=this.bottom;d&&!1!==a.call(b,d);)d=d.next;return this};E.getElementsByPoint=function(a,b){var d=this.set();this.forEach(function(e){e.isPointInside(a,b)&&d.push(e)});
return d};Y.isPointInside=function(a,d){var e=this.realPath=ya[this.type](this);this.attr("transform")&&this.attr("transform").length&&(e=b.transformPath(e,this.attr("transform")));return b.isPointInsidePath(e,a,d)};Y.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=ya[this.type](this),b.bboxwt=Va(this.realPath),b.bboxwt.toString=t,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=ya[this.type](this);
b.bbox=Va(za(this.realPath,this.matrix));b.bbox.toString=t;b.dirty=b.dirtyT=0}return b.bbox};Y.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};Y.glow=function(a){if("text"==this.type)return null;a=a||{};var b=(a.width||10)+(+this.attr("stroke-width")||1),d=a.fill||!1,e=a.opacity||0.5,f=a.offsetx||0,g=a.offsety||0;a=a.color||"#000";for(var h=b/2,l=this.paper,k=l.set(),u=this.realPath||ya[this.type](this),u=this.matrix?
za(u,this.matrix):u,n=1;n<h+1;n++)k.push(l.path(u).attr({stroke:a,fill:d?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/h*n).toFixed(3),opacity:+(e/h).toFixed(3)}));return k.insertBefore(this).translate(f,g)};var Ya=function(a,d,e,f,g,k,u,n,m){return null==m?l(a,d,e,f,g,k,u,n):b.findDotsAtSegment(a,d,e,f,g,k,u,n,h(a,d,e,f,g,k,u,n,m))},Za=function(a,d){return function(e,f,g){e=La(e);for(var h,l,k,u,n="",m={},q=0,t=0,s=e.length;t<s;t++){k=e[t];if("M"==k[0])h=+k[1],l=
+k[2];else{u=Ya(h,l,k[1],k[2],k[3],k[4],k[5],k[6]);if(q+u>f){if(d&&!m.start){h=Ya(h,l,k[1],k[2],k[3],k[4],k[5],k[6],f-q);n+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(g)return n;m.start=n;n=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,k[5],k[6]].join();q+=u;h=+k[5];l=+k[6];continue}if(!a&&!d)return h=Ya(h,l,k[1],k[2],k[3],k[4],k[5],k[6],f-q),{x:h.x,y:h.y,alpha:h.alpha}}q+=u;h=+k[5];l=+k[6]}n+=k.shift()+k}m.end=n;h=a?q:d?m:b.findDotsAtSegment(h,l,k[0],k[1],k[2],k[3],k[4],k[5],1);h.alpha&&(h=
{x:h.x,y:h.y,alpha:h.alpha});return h}},lb=Za(1),mb=Za(),$a=Za(0,1);b.getTotalLength=lb;b.getPointAtLength=mb;b.getSubpath=function(a,b,d){if(1E-6>this.getTotalLength(a)-d)return $a(a,b).end;a=$a(a,d,1);return b?$a(a,b).end:a};Y.getTotalLength=function(){var a=this.getPath();if(a)return this.node.getTotalLength?this.node.getTotalLength():lb(a)};Y.getPointAtLength=function(a){var b=this.getPath();if(b)return mb(b,a)};Y.getPath=function(){var a,d=b._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return d&&
(a=d(this)),a};Y.getSubpath=function(a,d){var e=this.getPath();if(e)return b.getSubpath(e,a,d)};var ia=b.easing_formulas={linear:function(a){return a},"<":function(a){return K(a,1.7)},">":function(a){return K(a,0.48)},"<>":function(a){var b=0.48-a/1.04,d=G.sqrt(0.1734+b*b);a=d-b;a=K(Z(a),1/3)*(0>a?-1:1);b=-d-b;b=K(Z(b),1/3)*(0>b?-1:1);a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==
!!a?a:K(2,-10*a)*G.sin(2*(a-0.075)*S/0.3)+1},bounce:function(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+0.9375):(a-=2.625/2.75,a=7.5625*a*a+0.984375);return a}};ia.easeIn=ia["ease-in"]=ia["<"];ia.easeOut=ia["ease-out"]=ia[">"];ia.easeInOut=ia["ease-in-out"]=ia["<>"];ia["back-in"]=ia.backIn;ia["back-out"]=ia.backOut;var T=[],db=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||
function(a){setTimeout(a,16)},Ua=function(){for(var a=+new Date,e=0;e<T.length;e++){var f=T[e];if(!f.el.removed&&!f.paused){var g=a-f.start,h=f.ms,k=f.easing,l=f.from,n=f.diff,m=f.to,q=f.el,t={},s,x={},v;f.initstatus?(g=(f.initstatus*f.anim.top-f.prev)/(f.percent-f.prev)*h,f.status=f.initstatus,delete f.initstatus,f.stop&&T.splice(e--,1)):f.status=(f.prev+(f.percent-f.prev)*(g/h))/f.anim.top;if(!(0>g))if(g<h){var y=k(g/h),D;for(D in l)if(l[u](D)){switch(ba[D]){case R:s=+l[D]+y*h*n[D];break;case "colour":s=
"rgb("+[ab(ca(l[D].r+y*h*n[D].r)),ab(ca(l[D].g+y*h*n[D].g)),ab(ca(l[D].b+y*h*n[D].b))].join()+")";break;case "path":s=[];g=0;for(k=l[D].length;g<k;g++){s[g]=[l[D][g][0]];m=1;for(x=l[D][g].length;m<x;m++)s[g][m]=+l[D][g][m]+y*h*n[D][g][m];s[g]=s[g].join(O)}s=s.join(O);break;case "transform":if(n[D].real)for(s=[],g=0,k=l[D].length;g<k;g++)for(s[g]=[l[D][g][0]],m=1,x=l[D][g].length;m<x;m++)s[g][m]=l[D][g][m]+y*h*n[D][g][m];else s=function(a){return+l[D][a]+y*h*n[D][a]},s=[["m",s(0),s(1),s(2),s(3),s(4),
s(5)]];break;case "csv":if("clip-rect"==D)for(s=[],g=4;g--;)s[g]=+l[D][g]+y*h*n[D][g];break;default:for(k=[][J](l[D]),s=[],g=q.paper.customAttributes[D].length;g--;)s[g]=+k[g]+y*h*n[D][g]}t[D]=s}q.attr(t);(function(a,b,e){setTimeout(function(){d("raphael.anim.frame."+a,b,e)})})(q.id,q,f.anim)}else{(function(a,e,f){setTimeout(function(){d("raphael.anim.frame."+e.id,e,f);d("raphael.anim.finish."+e.id,e,f);b.is(a,"function")&&a.call(e)})})(f.callback,q,f.anim);q.attr(m);T.splice(e--,1);if(1<f.repeat&&
!f.next){for(v in m)m[u](v)&&(x[v]=f.totalOrigin[v]);f.el.attr(x);w(f.anim,f.el,f.anim.percents[0],null,f.totalOrigin,f.repeat-1)}f.next&&!f.stop&&w(f.anim,f.el,f.next,null,f.totalOrigin,f.repeat)}}}b.svg&&q&&q.paper&&q.paper.safari();T.length&&db(Ua)},ab=function(a){return 255<a?255:0>a?0:a};Y.animateWith=function(a,d,e,f,g,h){if(this.removed)return h&&h.call(this),this;e=e instanceof q?e:b.animation(e,f,g,h);w(e,this,e.percents[0],null,this.attr());e=0;for(f=T.length;e<f;e++)if(T[e].anim==d&&T[e].el==
a){T[f-1].start=T[e].start;break}return this};Y.onAnimation=function(a){a?d.on("raphael.anim.frame."+this.id,a):d.unbind("raphael.anim.frame."+this.id);return this};q.prototype.delay=function(a){var b=new q(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};q.prototype.repeat=function(a){var b=new q(this.anim,this.ms);b.del=this.del;b.times=G.floor(M(a,0))||1;return b};b.animation=function(a,d,e,f){if(a instanceof q)return a;if(b.is(e,"function")||!e)f=f||e||null,e=null;a=Object(a);d=+d||
0;var g={},h,k;for(k in a)a[u](k)&&X(k)!=k&&X(k)+"%"!=k&&(h=!0,g[k]=a[k]);return h?(e&&(g.easing=e),f&&(g.callback=f),new q({100:g},d)):new q(a,d)};Y.animate=function(a,d,e,f){if(this.removed)return f&&f.call(this),this;a=a instanceof q?a:b.animation(a,d,e,f);w(a,this,a.percents[0],null,this.attr());return this};Y.setTime=function(a,b){a&&null!=b&&this.status(a,W(b,a.ms)/a.ms);return this};Y.status=function(a,b){var d=[],e=0,f,g;if(null!=b)return w(a,this,-1,W(b,1)),this;for(f=T.length;e<f;e++)if(g=
T[e],g.el.id==this.id&&(!a||g.anim==a)){if(a)return g.status;d.push({anim:g.anim,status:g.status})}return a?0:d};Y.pause=function(a){for(var b=0;b<T.length;b++)T[b].el.id!=this.id||a&&T[b].anim!=a||!1===d("raphael.anim.pause."+this.id,this,T[b].anim)||(T[b].paused=!0);return this};Y.resume=function(a){for(var b=0;b<T.length;b++)if(T[b].el.id==this.id&&(!a||T[b].anim==a)){var e=T[b];!1!==d("raphael.anim.resume."+this.id,this,e.anim)&&(delete e.paused,this.status(e.anim,e.status))}return this};Y.stop=
function(a){for(var b=0;b<T.length;b++)T[b].el.id!=this.id||a&&T[b].anim!=a||!1!==d("raphael.anim.stop."+this.id,this,T[b].anim)&&T.splice(b--,1);return this};d.on("raphael.remove",z);d.on("raphael.clear",z);Y.toString=function(){return"Rapha\u00ebl\u2019s object"};var Na=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var b=0,d=a.length;b<d;b++)!a[b]||a[b].constructor!=Y.constructor&&a[b].constructor!=Na||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},
da=Na.prototype;da.push=function(){for(var a,b,d=0,e=arguments.length;d<e;d++)!(a=arguments[d])||a.constructor!=Y.constructor&&a.constructor!=Na||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this};da.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};da.forEach=function(a,b){for(var d=0,e=this.items.length;d<e&&!1!==a.call(b,this.items[d],d);d++);return this};for(var bb in Y)Y[u](bb)&&(da[bb]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a][N](d,
b)})}}(bb));da.attr=function(a,d){if(a&&b.is(a,$)&&b.is(a[0],"object"))for(var e=0,f=a.length;e<f;e++)this.items[e].attr(a[e]);else for(e=0,f=this.items.length;e<f;e++)this.items[e].attr(a,d);return this};da.clear=function(){for(;this.length;)this.pop()};da.splice=function(a,b,d){a=0>a?M(this.length+a,0):a;b=M(0,W(this.length-a,b));var e=[],f=[],g=[],h;for(h=2;h<arguments.length;h++)g.push(arguments[h]);for(h=0;h<b;h++)f.push(this[a+h]);for(;h<this.length-a;h++)e.push(this[a+h]);var k=g.length;for(h=
0;h<k+e.length;h++)this.items[a+h]=this[a+h]=h<k?g[h]:e[h-k];for(h=this.items.length=this.length-=b-k;this[h];)delete this[h++];return new Na(f)};da.exclude=function(a){for(var b=0,d=this.length;b<d;b++)if(this[b]==a)return this.splice(b,1),!0};da.animate=function(a,d,e,f){!b.is(e,"function")&&e||(f=e||null);var g=this.items.length,h=g,k=this,l;if(!g)return this;f&&(l=function(){!--g&&f.call(k)});e=b.is(e,"string")?e:l;d=b.animation(a,d,e,l);for(a=this.items[--h].animate(d);h--;)this.items[h]&&!this.items[h].removed&&
this.items[h].animateWith(a,d,d),this.items[h]&&!this.items[h].removed||g--;return this};da.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};da.getBBox=function(){for(var a=[],b=[],d=[],e=[],f=this.items.length;f--;)if(!this.items[f].removed){var g=this.items[f].getBBox();a.push(g.x);b.push(g.y);d.push(g.x+g.width);e.push(g.y+g.height)}a=W[N](0,a);b=W[N](0,b);d=M[N](0,d);e=M[N](0,e);return{x:a,y:b,x2:d,y2:e,width:d-a,height:e-b}};da.clone=function(a){a=
this.paper.set();for(var b=0,d=this.items.length;b<d;b++)a.push(this.items[b].clone());return a};da.toString=function(){return"Rapha\u00ebl\u2018s set"};da.glow=function(a){var b=this.paper.set();this.forEach(function(d,e){var f=d.glow(a);null!=f&&f.forEach(function(a,d){b.push(a)})});return b};da.isPointInside=function(a,b){var d=!1;this.forEach(function(e){if(e.isPointInside(a,b))return d=!0,!1});return d};b.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},
glyphs:{}},d=a.face["font-family"],e;for(e in a.face)a.face[u](e)&&(b.face[e]=a.face[e]);this.fonts[d]?this.fonts[d].push(b):this.fonts[d]=[b];if(!a.svg){b.face["units-per-em"]=aa(a.face["units-per-em"],10);for(var f in a.glyphs)if(a.glyphs[u](f)&&(d=a.glyphs[f],b.glyphs[f]={w:d.w,k:{},d:d.d&&"M"+d.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},d.k))for(var g in d.k)d[u](g)&&(b.glyphs[f].k[g]=d.k[g])}return a};E.getFont=function(a,d,e,f){f=f||"normal";
e=e||"normal";d=+d||{normal:400,bold:700,lighter:300,bolder:800}[d]||400;if(b.fonts){var g=b.fonts[a];if(!g){a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var h in b.fonts)if(b.fonts[u](h)&&a.test(h)){g=b.fonts[h];break}}var k;if(g)for(h=0,a=g.length;h<a&&(k=g[h],k.face["font-weight"]!=d||k.face["font-style"]!=e&&k.face["font-style"]||k.face["font-stretch"]!=f);h++);return k}};E.print=function(a,d,e,f,g,h,k,l){h=h||"middle";k=M(W(k||0,1),-1);l=M(W(l||1,3),1);e=L(e)[Q]("");
var u=0,n=0,m="";b.is(f,"string")&&(f=this.getFont(f));if(f){g=(g||16)/f.face["units-per-em"];var q=f.face.bbox[Q](C),t=+q[0],s=q[3]-q[1],x=0;h=+q[1]+("baseline"==h?s+ +f.face.descent:s/2);for(var q=0,v=e.length;q<v;q++){if("\n"==e[q])n=y=u=0,x+=s*l;else var w=n&&f.glyphs[e[q-1]]||{},y=f.glyphs[e[q]],u=u+(n?(w.w||f.w)+(w.k&&w.k[e[q]]||0)+f.w*k:0),n=1;y&&y.d&&(m+=b.transformPath(y.d,["t",u*g,x*g,"s",g,g,t,h,"t",(a-t)/g,(d-h)/g]))}}return this.path(m).attr({fill:"#000",stroke:"none"})};E.add=function(a){if(b.is(a,
"array"))for(var d=this.set(),e=0,f=a.length,g;e<f;e++)g=a[e]||{},F[u](g.type)&&d.push(this[g.type]().attr(g));return d};b.format=function(a,d){var e=b.is(d,$)?[0][J](d):arguments;a&&b.is(a,"string")&&e.length-1&&(a=a.replace(B,function(a,b){return null==e[++b]?"":e[b]}));return a||""};b.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,d=function(a,d,e){var f=e;d.replace(b,function(a,b,d,e,g){b=b||e;f&&(b in f&&(f=f[b]),"function"==typeof f&&g&&
(f=f()))});return f=(null==f||f==e?a:f)+""};return function(b,e){return String(b).replace(a,function(a,b){return d(a,b,e)})}}();b.ninja=function(){D?x.win.Raphael=v:delete Raphael;return b};b.st=da;(function(a,d,e){function f(){/in/.test(a.readyState)?setTimeout(f,9):b.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(d,e=function(){a.removeEventListener(d,e,!1);a.readyState="complete"},!1),a.readyState="loading");f()})(document,"DOMContentLoaded");d.on("raphael.DOMload",
function(){A=!0});(function(){if(b.svg){var a=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,k=f.pow,l=/[, ]+/,u=b.eve,n={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};b.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e.hasOwnProperty(f)&&
("xlink:"==f.substring(0,6)?d.setAttributeNS("http://www.w3.org/1999/xlink",f.substring(6),a(e[f])):d.setAttribute(f,a(e[f])))}else d=b._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},s=function(e,l){var u="linear",n=e.id+l,m=0.5,t=0.5,s=e.node,x=e.paper,v=s.style,w=b._g.doc.getElementById(n);if(!w){l=a(l).replace(b._radial_gradient,function(a,b,e){u="radial";b&&e&&(m=d(b),t=d(e),a=2*(0.5<t)-1,0.25<k(m-0.5,2)+k(t-0.5,2)&&
(t=f.sqrt(0.25-k(m-0.5,2))*a+0.5)&&0.5!=t&&(t=t.toFixed(5)-1E-5*a));return""});l=l.split(/\s*\-\s*/);if("linear"==u){w=l.shift();w=-d(w);if(isNaN(w))return null;var y=[0,0,f.cos(b.rad(w)),f.sin(b.rad(w))],w=1/(g(h(y[2]),h(y[3]))||1);y[2]*=w;y[3]*=w;0>y[2]&&(y[0]=-y[2],y[2]=0);0>y[3]&&(y[1]=-y[3],y[3]=0)}var D=b._parseDots(l);if(!D)return null;n=n.replace(/[\(\)\s,\xb0#]/g,"_");e.gradient&&n!=e.gradient.id&&(x.defs.removeChild(e.gradient),delete e.gradient);if(!e.gradient)for(w=q(u+"Gradient",{id:n}),
e.gradient=w,q(w,"radial"==u?{fx:m,fy:t}:{x1:y[0],y1:y[1],x2:y[2],y2:y[3],gradientTransform:e.matrix.invert()}),x.defs.appendChild(w),x=0,y=D.length;x<y;x++)w.appendChild(q("stop",{offset:D[x].offset?D[x].offset:x?"100%":"0%","stop-color":D[x].color||"#fff"}))}q(s,{fill:"url(#"+n+")",opacity:1,"fill-opacity":1});v.fill="";v.opacity=1;return v.fillOpacity=1},t=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},x=function(d,e,f){if("path"==
d.type){for(var g=a(e).toLowerCase().split("-"),h=d.paper,k=f?"end":"start",l=d.node,u=d.attrs,t=u["stroke-width"],s=g.length,x="classic",v,w,y=3,D=3,B=5;s--;)switch(g[s]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":x=g[s];break;case "wide":D=5;break;case "narrow":D=2;break;case "long":y=5;break;case "short":y=2}"open"==x?(y+=2,D+=2,B+=2,v=1,w=f?4:1,g={fill:"none",stroke:u.stroke}):(w=v=y/2,g={fill:u.stroke,stroke:"none"});d._.arrows?f?(d._.arrows.endPath&&m[d._.arrows.endPath]--,
d._.arrows.endMarker&&m[d._.arrows.endMarker]--):(d._.arrows.startPath&&m[d._.arrows.startPath]--,d._.arrows.startMarker&&m[d._.arrows.startMarker]--):d._.arrows={};if("none"!=x){var s="raphael-marker-"+x,z="raphael-marker-"+k+x+y+D;b._g.doc.getElementById(s)?m[s]++:(h.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:n[x],id:s})),m[s]=1);var C=b._g.doc.getElementById(z);C?(m[z]++,y=C.getElementsByTagName("use")[0]):(C=q(q("marker"),{id:z,markerHeight:D,markerWidth:y,orient:"auto",refX:w,refY:D/
2}),y=q(q("use"),{"xlink:href":"#"+s,transform:(f?"rotate(180 "+y/2+" "+D/2+") ":"")+"scale("+y/B+","+D/B+")","stroke-width":(1/((y/B+D/B)/2)).toFixed(4)}),C.appendChild(y),h.defs.appendChild(C),m[z]=1);q(y,g);h=v*("diamond"!=x&&"oval"!=x);f?(f=d._.arrows.startdx*t||0,t=b.getTotalLength(u.path)-h*t):(f=h*t,t=b.getTotalLength(u.path)-(d._.arrows.enddx*t||0));g={};g["marker-"+k]="url(#"+z+")";if(t||f)g.d=b.getSubpath(u.path,f,t);q(l,g);d._.arrows[k+"Path"]=s;d._.arrows[k+"Marker"]=z;d._.arrows[k+"dx"]=
h;d._.arrows[k+"Type"]=x;d._.arrows[k+"String"]=e}else f?(f=d._.arrows.startdx*t||0,t=b.getTotalLength(u.path)-f):(f=0,t=b.getTotalLength(u.path)-(d._.arrows.enddx*t||0)),d._.arrows[k+"Path"]&&q(l,{d:b.getSubpath(u.path,f,t)}),delete d._.arrows[k+"Path"],delete d._.arrows[k+"Marker"],delete d._.arrows[k+"dx"],delete d._.arrows[k+"Type"],delete d._.arrows[k+"String"];for(g in m)m.hasOwnProperty(g)&&!m[g]&&(d=b._g.doc.getElementById(g))&&d.parentNode.removeChild(d)}},v={"":[0],none:[0],"-":[3,1],".":[1,
1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(b,d,e){if(d=v[a(d).toLowerCase()]){var f=b.attrs["stroke-width"]||"1";e={round:f,square:f,butt:0}[b.attrs["stroke-linecap"]||e["stroke-linecap"]]||0;for(var g=[],h=d.length;h--;)g[h]=d[h]*f+(h%2?1:-1)*e;q(b.node,{"stroke-dasharray":g.join(",")})}},y=function(d,f){var k=d.node,u=d.attrs,n=k.style.visibility;k.style.visibility="hidden";for(var m in f)if(f.hasOwnProperty(m)&&
b._availableAttrs.hasOwnProperty(m)){var v=f[m];u[m]=v;switch(m){case "blur":d.blur(v);break;case "title":var y=k.getElementsByTagName("title");y.length&&(y=y[0])?y.firstChild.nodeValue=v:(y=q("title"),v=b._g.doc.createTextNode(v),y.appendChild(v),k.appendChild(y));break;case "href":case "target":y=k.parentNode;if("a"!=y.tagName.toLowerCase()){var B=q("a");y.insertBefore(B,k);B.appendChild(k);y=B}"target"==m?y.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==v?"new":v):y.setAttributeNS("http://www.w3.org/1999/xlink",
m,v);break;case "cursor":k.style.cursor=v;break;case "transform":d.transform(v);break;case "arrow-start":x(d,v);break;case "arrow-end":x(d,v,1);break;case "clip-rect":y=a(v).split(l);if(4==y.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var B=q("clipPath"),z=q("rect");B.id=b.createUUID();q(z,{x:y[0],y:y[1],width:y[2],height:y[3]});B.appendChild(z);d.paper.defs.appendChild(B);q(k,{"clip-path":"url(#"+B.id+")"});d.clip=z}!v&&(v=k.getAttribute("clip-path"))&&((v=b._g.doc.getElementById(v.replace(/(^url\(#|\)$)/g,
"")))&&v.parentNode.removeChild(v),q(k,{"clip-path":""}),delete d.clip);break;case "path":"path"==d.type&&(q(k,{d:v?u.path=b._pathToAbsolute(v):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&x(d,d._.arrows.startString),"endString"in d._.arrows&&x(d,d._.arrows.endString,1)));break;case "width":if(k.setAttribute(m,v),d._.dirty=1,u.fx)m="x",v=u.x;else break;case "x":u.fx&&(v=-u.x-(u.width||0));case "rx":if("rx"==m&&"rect"==d.type)break;case "cx":k.setAttribute(m,v);d.pattern&&t(d);d._.dirty=
1;break;case "height":if(k.setAttribute(m,v),d._.dirty=1,u.fy)m="y",v=u.y;else break;case "y":u.fy&&(v=-u.y-(u.height||0));case "ry":if("ry"==m&&"rect"==d.type)break;case "cy":k.setAttribute(m,v);d.pattern&&t(d);d._.dirty=1;break;case "r":"rect"==d.type?q(k,{rx:v,ry:v}):k.setAttribute(m,v);d._.dirty=1;break;case "src":"image"==d.type&&k.setAttributeNS("http://www.w3.org/1999/xlink","href",v);break;case "stroke-width":if(1!=d._.sx||1!=d._.sy)v/=g(h(d._.sx),h(d._.sy))||1;d.paper._vbSize&&(v*=d.paper._vbSize);
k.setAttribute(m,v);u["stroke-dasharray"]&&w(d,u["stroke-dasharray"],f);d._.arrows&&("startString"in d._.arrows&&x(d,d._.arrows.startString),"endString"in d._.arrows&&x(d,d._.arrows.endString,1));break;case "stroke-dasharray":w(d,v,f);break;case "fill":var C=a(v).match(b._ISURL);if(C){var B=q("pattern"),E=q("image");B.id=b.createUUID();q(B,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});q(E,{x:0,y:0,"xlink:href":C[1]});B.appendChild(E);(function(a){b._preload(C[1],function(){var b=this.offsetWidth,
e=this.offsetHeight;q(a,{width:b,height:e});q(E,{width:b,height:e});d.paper.safari()})})(B);d.paper.defs.appendChild(B);q(k,{fill:"url(#"+B.id+")"});d.pattern=B;d.pattern&&t(d);break}y=b.getRGB(v);if(!y.error)delete f.gradient,delete u.gradient,!b.is(u.opacity,"undefined")&&b.is(f.opacity,"undefined")&&q(k,{opacity:u.opacity}),!b.is(u["fill-opacity"],"undefined")&&b.is(f["fill-opacity"],"undefined")&&q(k,{"fill-opacity":u["fill-opacity"]});else if(("circle"==d.type||"ellipse"==d.type||"r"!=a(v).charAt())&&
s(d,v)){if("opacity"in u||"fill-opacity"in u)if(y=b._g.doc.getElementById(k.getAttribute("fill").replace(/^url\(#|\)$/g,"")))y=y.getElementsByTagName("stop"),q(y[y.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)});u.gradient=v;u.fill="none";break}y.hasOwnProperty("opacity")&&q(k,{"fill-opacity":1<y.opacity?y.opacity/100:y.opacity});case "stroke":y=b.getRGB(v);k.setAttribute(m,y.hex);"stroke"==m&&y.hasOwnProperty("opacity")&&q(k,{"stroke-opacity":1<y.opacity?
y.opacity/100:y.opacity});"stroke"==m&&d._.arrows&&("startString"in d._.arrows&&x(d,d._.arrows.startString),"endString"in d._.arrows&&x(d,d._.arrows.endString,1));break;case "gradient":"circle"!=d.type&&"ellipse"!=d.type&&"r"==a(v).charAt()||s(d,v);break;case "opacity":u.gradient&&!u.hasOwnProperty("stroke-opacity")&&q(k,{"stroke-opacity":1<v?v/100:v});case "fill-opacity":if(u.gradient){if(y=b._g.doc.getElementById(k.getAttribute("fill").replace(/^url\(#|\)$/g,"")))y=y.getElementsByTagName("stop"),
q(y[y.length-1],{"stop-opacity":v});break}default:"font-size"==m&&(v=e(v,10)+"px"),y=m.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()}),k.style[y]=v,d._.dirty=1,k.setAttribute(m,v)}}D(d,f);k.style.visibility=n},D=function(d,f){if("text"==d.type&&(f.hasOwnProperty("text")||f.hasOwnProperty("font")||f.hasOwnProperty("font-size")||f.hasOwnProperty("x")||f.hasOwnProperty("y"))){var g=d.attrs,h=d.node,k=h.firstChild?e(b._g.doc.defaultView.getComputedStyle(h.firstChild,"").getPropertyValue("font-size"),
10):10;if(f.hasOwnProperty("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var l=a(f.text).split("\n"),u=[],m,n=0,t=l.length;n<t;n++)m=q("tspan"),n&&q(m,{dy:1.2*k,x:g.x}),m.appendChild(b._g.doc.createTextNode(l[n])),h.appendChild(m),u[n]=m}else for(u=h.getElementsByTagName("tspan"),n=0,t=u.length;n<t;n++)n?q(u[n],{dy:1.2*k,x:g.x}):q(u[0],{dy:0});q(h,{x:g.x,y:g.y});d._.dirty=1;h=d._getBBox();(g=g.y-(h.y+h.height/2))&&b.is(g,"finite")&&q(u[0],{dy:g})}},B=function(a,d){this[0]=
this.node=a;a.raphael=!0;this.id=b._oid++;a.raphaelid=this.id;this.matrix=b.matrix();this.realPath=null;this.paper=d;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!d.bottom&&(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null},z=b.el;B.prototype=z;z.constructor=B;b._engine.path=function(a,b){var d=q("path");b.canvas&&b.canvas.appendChild(d);d=new B(d,b);d.type="path";y(d,{fill:"none",stroke:"#000",path:a});return d};z.rotate=function(b,
e,f){if(this.removed)return this;b=a(b).split(l);b.length-1&&(e=d(b[1]),f=d(b[2]));b=d(b[0]);null==f&&(e=f);if(null==e||null==f)f=this.getBBox(1),e=f.x+f.width/2,f=f.y+f.height/2;this.transform(this._.transform.concat([["r",b,e,f]]));return this};z.scale=function(b,e,f,g){if(this.removed)return this;b=a(b).split(l);b.length-1&&(e=d(b[1]),f=d(b[2]),g=d(b[3]));b=d(b[0]);null==e&&(e=b);null==g&&(f=g);if(null==f||null==g)var h=this.getBBox(1);f=null==f?h.x+h.width/2:f;g=null==g?h.y+h.height/2:g;this.transform(this._.transform.concat([["s",
b,e,f,g]]));return this};z.translate=function(b,e){if(this.removed)return this;b=a(b).split(l);b.length-1&&(e=d(b[1]));b=d(b[0])||0;this.transform(this._.transform.concat([["t",b,+e||0]]));return this};z.transform=function(a){var d=this._;if(null==a)return d.transform;b._extractTransform(this,a);this.clip&&q(this.clip,{transform:this.matrix.invert()});this.pattern&&t(this);this.node&&q(this.node,{transform:this.matrix});if(1!=d.sx||1!=d.sy)a=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:
1,this.attr({"stroke-width":a});return this};z.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};z.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};z.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this);u.unbind("raphael.*.*."+this.id);this.gradient&&a.defs.removeChild(this.gradient);b._tear(this,a);"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):
this.node.parentNode.removeChild(this.node);for(var d in this)this[d]="function"==typeof this[d]?b._removedFactory(d):null;this.removed=!0}};z._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(d){}finally{b=b||{}}a&&this.hide();return b};z.attr=function(a,d){if(this.removed)return this;if(null==a){var e={},f;for(f in this.attrs)this.attrs.hasOwnProperty(f)&&(e[f]=this.attrs[f]);e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient;
e.transform=this._.transform;return e}if(null==d&&b.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==a)return this._.transform;f=a.split(l);for(var e={},g=0,h=f.length;g<h;g++)a=f[g],a in this.attrs?e[a]=this.attrs[a]:b.is(this.paper.customAttributes[a],"function")?e[a]=this.paper.customAttributes[a].def:e[a]=b._availableAttrs[a];return h-1?e:e[f[0]]}if(null==d&&b.is(a,"array")){e={};g=0;for(h=a.length;g<h;g++)e[a[g]]=this.attr(a[g]);
return e}null!=d?(e={},e[a]=d):null!=a&&b.is(a,"object")&&(e=a);for(g in e)u("raphael.attr."+g+"."+this.id,this,e[g]);for(g in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(g)&&e.hasOwnProperty(g)&&b.is(this.paper.customAttributes[g],"function"))for(h in f=this.paper.customAttributes[g].apply(this,[].concat(e[g])),this.attrs[g]=e[g],f)f.hasOwnProperty(h)&&(e[h]=f[h]);y(this,e);return this};z.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?
this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&b._tofront(this,a);return this};z.toBack=function(){if(this.removed)return this;var a=this.node.parentNode;"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild);b._toback(this,this.paper);return this};z.insertAfter=
function(a){if(this.removed)return this;var d=a.node||a[a.length-1].node;d.nextSibling?d.parentNode.insertBefore(this.node,d.nextSibling):d.parentNode.appendChild(this.node);b._insertafter(this,a,this.paper);return this};z.insertBefore=function(a){if(this.removed)return this;var d=a.node||a[0].node;d.parentNode.insertBefore(this.node,d);b._insertbefore(this,a,this.paper);return this};z.blur=function(a){if(0!==+a){var d=q("filter"),e=q("feGaussianBlur");this.attrs.blur=a;d.id=b.createUUID();q(e,{stdDeviation:+a||
1.5});d.appendChild(e);this.paper.defs.appendChild(d);this._blur=d;q(this.node,{filter:"url(#"+d.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter");return this};b._engine.circle=function(a,b,d,e){var f=q("circle");a.canvas&&a.canvas.appendChild(f);a=new B(f,a);a.attrs={cx:b,cy:d,r:e,fill:"none",stroke:"#000"};a.type="circle";q(f,a.attrs);return a};b._engine.rect=function(a,b,d,e,f,g){var h=q("rect");
a.canvas&&a.canvas.appendChild(h);a=new B(h,a);a.attrs={x:b,y:d,width:e,height:f,r:g||0,rx:g||0,ry:g||0,fill:"none",stroke:"#000"};a.type="rect";q(h,a.attrs);return a};b._engine.ellipse=function(a,b,d,e,f){var g=q("ellipse");a.canvas&&a.canvas.appendChild(g);a=new B(g,a);a.attrs={cx:b,cy:d,rx:e,ry:f,fill:"none",stroke:"#000"};a.type="ellipse";q(g,a.attrs);return a};b._engine.image=function(a,b,d,e,f,g){var h=q("image");q(h,{x:d,y:e,width:f,height:g,preserveAspectRatio:"none"});h.setAttributeNS("http://www.w3.org/1999/xlink",
"href",b);a.canvas&&a.canvas.appendChild(h);a=new B(h,a);a.attrs={x:d,y:e,width:f,height:g,src:b};a.type="image";return a};b._engine.text=function(a,d,e,f){var g=q("text");a.canvas&&a.canvas.appendChild(g);a=new B(g,a);a.attrs={x:d,y:e,"text-anchor":"middle",text:f,font:b._availableAttrs.font,stroke:"none",fill:"#000"};a.type="text";y(a,a.attrs);return a};b._engine.setSize=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",
this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};b._engine.create=function(){var a=b._getContainer.apply(0,arguments),d=a&&a.container,e=a.x,f=a.y,g=a.width,a=a.height;if(!d)throw Error("SVG container not found.");var h=q("svg"),k,e=e||0,f=f||0,g=g||512,a=a||342;q(h,{height:a,version:1.1,width:g,xmlns:"http://www.w3.org/2000/svg"});1==d?(h.style.cssText="overflow:hidden;position:absolute;left:"+e+"px;top:"+f+"px",b._g.doc.body.appendChild(h),k=1):(h.style.cssText=
"overflow:hidden;position:relative",d.firstChild?d.insertBefore(h,d.firstChild):d.appendChild(h));d=new b._Paper;d.width=g;d.height=a;d.canvas=h;d.clear();d._left=d._top=0;k&&(d.renderfix=function(){});d.renderfix();return d};b._engine.setViewBox=function(a,b,d,e,f){u("raphael.setViewBox",this,this._viewBox,[a,b,d,e,f]);var h=g(d/this.width,e/this.height),k=this.top,l=f?"xMidYMid meet":"xMinYMin",n;null==a?(this._vbSize&&(h=1),delete this._vbSize,n="0 0 "+this.width+" "+this.height):(this._vbSize=
h,n=a+" "+b+" "+d+" "+e);for(q(this.canvas,{viewBox:n,preserveAspectRatio:l});h&&k;)l="stroke-width"in k.attrs?k.attrs["stroke-width"]:1,k.attr({"stroke-width":l}),k._.dirty=1,k._.dirtyT=1,k=k.prev;this._viewBox=[a,b,d,e,!!f];return this};b.prototype.renderfix=function(){var a=this.canvas,b=a.style,d;try{d=a.getScreenCTM()||a.createSVGMatrix()}catch(e){d=a.createSVGMatrix()}a=-d.e%1;d=-d.f%1;if(a||d)a&&(this._left=(this._left+a)%1,b.left=this._left+"px"),d&&(this._top=(this._top+d)%1,b.top=this._top+
"px")};b.prototype.clear=function(){b.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=q("desc")).appendChild(b._g.doc.createTextNode("Created with Rapha\u00ebl "+b.version));a.appendChild(this.desc);a.appendChild(this.defs=q("defs"))};b.prototype.remove=function(){u("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?b._removedFactory(a):
null};var E=b.st,C;for(C in z)z.hasOwnProperty(C)&&!E.hasOwnProperty(C)&&(E[C]=function(a){return function(){var b=arguments;return this.forEach(function(d){d[a].apply(d,b)})}}(C))}})();(function(){if(b.vml){var a=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,k=e.abs,l=/[, ]+/,u=b.eve,n={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,q=/ progid:\S+Blur\([^\)]+\)/g,t=/-?[^,\s-]+/g,s={path:1,rect:1,image:1},v={circle:1,ellipse:1},x=function(d){var e=/[ahqstv]/ig,
g=b._pathToAbsolute;a(d).match(e)&&(g=b._path2curve);e=/[clmz]/g;if(g==b._pathToAbsolute&&!a(d).match(e))return d=a(d).replace(m,function(a,b,d){var e=[],g="m"==b.toLowerCase(),h=n[b];d.replace(t,function(a){g&&2==e.length&&(h+=e+n["m"==b?"l":"L"],e=[]);e.push(f(21600*a))});return h+e});var e=g(d),h;d=[];for(var k=0,l=e.length;k<l;k++){g=e[k];h=e[k][0].toLowerCase();"z"==h&&(h="x");for(var u=1,q=g.length;u<q;u++)h+=f(21600*g[u])+(u!=q-1?",":"");d.push(h)}return d.join(" ")},y=function(a,d,e){var f=
b.matrix();f.rotate(-a,0.5,0.5);return{dx:f.x(d,e),dy:f.y(d,e)}},w=function(a,b,d,e,f,g){var h=a._,l=a.matrix,u=h.fillpos;a=a.node;var n=a.style,m=1,q="",t=21600/b,s=21600/d;n.visibility="hidden";if(b&&d){a.coordsize=k(t)+" "+k(s);n.rotation=g*(0>b*d?-1:1);g&&(f=y(g,e,f),e=f.dx,f=f.dy);0>b&&(q+="x");0>d&&(q+=" y")&&(m=-1);n.flip=q;a.coordorigin=e*-t+" "+f*-s;if(u||h.fillsize)e=(e=a.getElementsByTagName("fill"))&&e[0],a.removeChild(e),u&&(f=y(g,l.x(u[0],u[1]),l.y(u[0],u[1])),e.position=f.dx*m+" "+
f.dy*m),h.fillsize&&(e.size=h.fillsize[0]*k(b)+" "+h.fillsize[1]*k(d)),a.appendChild(e);n.visibility="visible"}};b.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};var D=function(b,d,e){d=a(d).toLowerCase().split("-");e=e?"end":"start";for(var f=d.length,g="classic",h="medium",k="medium";f--;)switch(d[f]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":g=d[f];break;case "wide":case "narrow":k=
d[f];break;case "long":case "short":h=d[f]}b=b.node.getElementsByTagName("stroke")[0];b[e+"arrow"]=g;b[e+"arrowlength"]=h;b[e+"arrowwidth"]=k},B=function(e,k){e.attrs=e.attrs||{};var u=e.node,n=e.attrs,m=u.style,q=s[e.type]&&(k.x!=n.x||k.y!=n.y||k.width!=n.width||k.height!=n.height||k.cx!=n.cx||k.cy!=n.cy||k.rx!=n.rx||k.ry!=n.ry||k.r!=n.r),t=v[e.type]&&(n.cx!=k.cx||n.cy!=k.cy||n.r!=k.r||n.rx!=k.rx||n.ry!=k.ry),y;for(y in k)k.hasOwnProperty(y)&&(n[y]=k[y]);q&&(n.path=b._getPath[e.type](e),e._.dirty=
1);k.href&&(u.href=k.href);k.title&&(u.title=k.title);k.target&&(u.target=k.target);k.cursor&&(m.cursor=k.cursor);"blur"in k&&e.blur(k.blur);if(k.path&&"path"==e.type||q)u.path=x(~a(n.path).toLowerCase().indexOf("r")?b._pathToAbsolute(n.path):n.path),"image"==e.type&&(e._.fillpos=[n.x,n.y],e._.fillsize=[n.width,n.height],w(e,1,1,0,0,0));"transform"in k&&e.transform(k.transform);t&&(m=+n.cx,q=+n.cy,t=+n.rx||+n.r||0,y=+n.ry||+n.r||0,u.path=b.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f(21600*(m-t)),
f(21600*(q-y)),f(21600*(m+t)),f(21600*(q+y)),f(21600*m)),e._.dirty=1);"clip-rect"in k&&(m=a(k["clip-rect"]).split(l),4==m.length&&(m[2]=+m[2]+ +m[0],m[3]=+m[3]+ +m[1],q=u.clipRect||b._g.doc.createElement("div"),t=q.style,t.clip=b.format("rect({1}px {2}px {3}px {0}px)",m),u.clipRect||(t.position="absolute",t.top=0,t.left=0,t.width=e.paper.width+"px",t.height=e.paper.height+"px",u.parentNode.insertBefore(q,u),q.appendChild(u),u.clipRect=q)),k["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto"));
e.textpath&&(m=e.textpath.style,k.font&&(m.font=k.font),k["font-family"]&&(m.fontFamily='"'+k["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),k["font-size"]&&(m.fontSize=k["font-size"]),k["font-weight"]&&(m.fontWeight=k["font-weight"]),k["font-style"]&&(m.fontStyle=k["font-style"]));"arrow-start"in k&&D(e,k["arrow-start"]);"arrow-end"in k&&D(e,k["arrow-end"],1);if(null!=k.opacity||null!=k["stroke-width"]||null!=k.fill||null!=k.src||null!=k.stroke||null!=k["stroke-width"]||null!=k["stroke-opacity"]||
null!=k["fill-opacity"]||null!=k["stroke-dasharray"]||null!=k["stroke-miterlimit"]||null!=k["stroke-linejoin"]||null!=k["stroke-linecap"]){m=(m=u.getElementsByTagName("fill"))&&m[0];!m&&(m=A("fill"));"image"==e.type&&k.src&&(m.src=k.src);k.fill&&(m.on=!0);if(null==m.on||"none"==k.fill||null===k.fill)m.on=!1;m.on&&k.fill&&((q=a(k.fill).match(b._ISURL))?(m.parentNode==u&&u.removeChild(m),m.rotate=!0,m.src=q[1],m.type="tile",t=e.getBBox(1),m.position=t.x+" "+t.y,e._.fillpos=[t.x,t.y],b._preload(q[1],
function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})):(m.color=b.getRGB(k.fill).hex,m.src="",m.type="solid",b.getRGB(k.fill).error&&(e.type in{circle:1,ellipse:1}||"r"!=a(k.fill).charAt())&&z(e,k.fill,m)&&(n.fill="none",n.gradient=k.fill,m.rotate=!1)));if("fill-opacity"in k||"opacity"in k)t=((+n["fill-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+b.getRGB(k.fill).o+1||2)-1),t=h(g(t,0),1),m.opacity=t,m.src&&(m.color="none");u.appendChild(m);m=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0];
q=!1;!m&&(q=m=A("stroke"));if(k.stroke&&"none"!=k.stroke||k["stroke-width"]||null!=k["stroke-opacity"]||k["stroke-dasharray"]||k["stroke-miterlimit"]||k["stroke-linejoin"]||k["stroke-linecap"])m.on=!0;"none"!=k.stroke&&null!==k.stroke&&null!=m.on&&0!=k.stroke&&0!=k["stroke-width"]||(m.on=!1);t=b.getRGB(k.stroke);m.on&&k.stroke&&(m.color=t.hex);t=((+n["stroke-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+t.o+1||2)-1);y=0.75*(d(k["stroke-width"])||1);t=h(g(t,0),1);null==k["stroke-width"]&&(y=n["stroke-width"]);
k["stroke-width"]&&(m.weight=y);y&&1>y&&(t*=y)&&(m.weight=1);m.opacity=t;k["stroke-linejoin"]&&(m.joinstyle=k["stroke-linejoin"]||"miter");m.miterlimit=k["stroke-miterlimit"]||8;k["stroke-linecap"]&&(m.endcap="butt"==k["stroke-linecap"]?"flat":"square"==k["stroke-linecap"]?"square":"round");"stroke-dasharray"in k&&(t={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},m.dashstyle=
t.hasOwnProperty(k["stroke-dasharray"])?t[k["stroke-dasharray"]]:"");q&&u.appendChild(m)}if("text"==e.type){e.paper.canvas.style.display="";u=e.paper.span;q=n.font&&n.font.match(/\d+(?:\.\d*)?(?=px)/);m=u.style;n.font&&(m.font=n.font);n["font-family"]&&(m.fontFamily=n["font-family"]);n["font-weight"]&&(m.fontWeight=n["font-weight"]);n["font-style"]&&(m.fontStyle=n["font-style"]);q=d(n["font-size"]||q&&q[0])||10;m.fontSize=100*q+"px";e.textpath.string&&(u.innerHTML=a(e.textpath.string).replace(/</g,
"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));u=u.getBoundingClientRect();e.W=n.w=(u.right-u.left)/100;e.H=n.h=(u.bottom-u.top)/100;e.X=n.x;e.Y=n.y+e.H/2;("x"in k||"y"in k)&&(e.path.v=b.format("m{0},{1}l{2},{1}",f(21600*n.x),f(21600*n.y),f(21600*n.x)+1));u="x y text font font-family font-weight font-style font-size".split(" ");m=0;for(q=u.length;m<q;m++)if(u[m]in k){e._.dirty=1;break}switch(n["text-anchor"]){case "start":e.textpath.style["v-text-align"]="left";e.bbx=e.W/2;break;case "end":e.textpath.style["v-text-align"]=
"right";e.bbx=-e.W/2;break;default:e.textpath.style["v-text-align"]="center",e.bbx=0}e.textpath.style["v-text-kern"]=!0}},z=function(f,g,h){f.attrs=f.attrs||{};var k=Math.pow,l="linear",u=".5 .5";f.attrs.gradient=g;g=a(g).replace(b._radial_gradient,function(a,b,f){l="radial";b&&f&&(b=d(b),f=d(f),0.25<k(b-0.5,2)+k(f-0.5,2)&&(f=e.sqrt(0.25-k(b-0.5,2))*(2*(0.5<f)-1)+0.5),u=b+" "+f);return""});g=g.split(/\s*\-\s*/);if("linear"==l){var m=g.shift(),m=-d(m);if(isNaN(m))return null}g=b._parseDots(g);if(!g)return null;
f=f.shape||f.node;if(g.length){f.removeChild(h);h.on=!0;h.method="none";h.color=g[0].color;h.color2=g[g.length-1].color;for(var n=[],q=0,t=g.length;q<t;q++)g[q].offset&&n.push(g[q].offset+" "+g[q].color);h.colors=n.length?n.join():"0% "+h.color;"radial"==l?(h.type="gradientTitle",h.focus="100%",h.focussize="0 0",h.focusposition=u,h.angle=0):(h.type="gradient",h.angle=(270-m)%360);f.appendChild(h)}return 1},C=function(a,d){this[0]=this.node=a;a.raphael=!0;this.id=b._oid++;a.raphaelid=this.id;this.Y=
this.X=0;this.attrs={};this.paper=d;this.matrix=b.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!d.bottom&&(d.bottom=this);(this.prev=d.top)&&(d.top.next=this);d.top=this;this.next=null},E=b.el;C.prototype=E;E.constructor=C;E.transform=function(d){if(null==d)return this._.transform;var e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:"",g;e&&(g=d=a(d).replace(/\.{3}|\u2026/g,this._.transform||""));b._extractTransform(this,f+d);var e=this.matrix.clone(),
h=this.skew;d=this.node;var f=~a(this.attrs.fill).indexOf("-"),k=!a(this.attrs.fill).indexOf("url(");e.translate(1,1);k||f||"image"==this.type?(h.matrix="1 0 0 1",h.offset="0 0",h=e.split(),f&&h.noRotation||!h.isSimple?(d.style.filter=e.toFilter(),f=this.getBBox(),h=this.getBBox(1),e=f.x-h.x,f=f.y-h.y,d.coordorigin=-21600*e+" "+-21600*f,w(this,1,1,e,f,0)):(d.style.filter="",w(this,h.scalex,h.scaley,h.dx,h.dy,h.rotate))):(d.style.filter="",h.matrix=a(e),h.offset=e.offset());g&&(this._.transform=g);
return this};E.rotate=function(b,e,f){if(this.removed)return this;if(null!=b){b=a(b).split(l);b.length-1&&(e=d(b[1]),f=d(b[2]));b=d(b[0]);null==f&&(e=f);if(null==e||null==f)f=this.getBBox(1),e=f.x+f.width/2,f=f.y+f.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",b,e,f]]));return this}};E.translate=function(b,e){if(this.removed)return this;b=a(b).split(l);b.length-1&&(e=d(b[1]));b=d(b[0])||0;e=+e||0;this._.bbox&&(this._.bbox.x+=b,this._.bbox.y+=e);this.transform(this._.transform.concat([["t",
b,e]]));return this};E.scale=function(b,e,f,g){if(this.removed)return this;b=a(b).split(l);b.length-1&&(e=d(b[1]),f=d(b[2]),g=d(b[3]),isNaN(f)&&(f=null),isNaN(g)&&(g=null));b=d(b[0]);null==e&&(e=b);null==g&&(f=g);if(null==f||null==g)var h=this.getBBox(1);f=null==f?h.x+h.width/2:f;g=null==g?h.y+h.height/2:g;this.transform(this._.transform.concat([["s",b,e,f,g]]));this._.dirtyT=1;return this};E.hide=function(){!this.removed&&(this.node.style.display="none");return this};E.show=function(){!this.removed&&
(this.node.style.display="");return this};E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);b.eve.unbind("raphael.*.*."+this.id);b._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]="function"==typeof this[a]?b._removedFactory(a):
null;this.removed=!0}};E.attr=function(a,d){if(this.removed)return this;if(null==a){var e={},f;for(f in this.attrs)this.attrs.hasOwnProperty(f)&&(e[f]=this.attrs[f]);e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient;e.transform=this._.transform;return e}if(null==d&&b.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;f=a.split(l);for(var e={},g=0,h=f.length;g<h;g++)a=f[g],a in this.attrs?e[a]=this.attrs[a]:b.is(this.paper.customAttributes[a],
"function")?e[a]=this.paper.customAttributes[a].def:e[a]=b._availableAttrs[a];return h-1?e:e[f[0]]}if(this.attrs&&null==d&&b.is(a,"array")){e={};g=0;for(h=a.length;g<h;g++)e[a[g]]=this.attr(a[g]);return e}null!=d&&(e={},e[a]=d);null==d&&b.is(a,"object")&&(e=a);for(g in e)u("raphael.attr."+g+"."+this.id,this,e[g]);if(e){for(g in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(g)&&e.hasOwnProperty(g)&&b.is(this.paper.customAttributes[g],"function"))for(h in f=this.paper.customAttributes[g].apply(this,
[].concat(e[g])),this.attrs[g]=e[g],f)f.hasOwnProperty(h)&&(e[h]=f[h]);e.text&&"text"==this.type&&(this.textpath.string=e.text);B(this,e)}return this};E.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&b._tofront(this,this.paper);return this};E.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),b._toback(this,this.paper));
return this};E.insertAfter=function(a){if(this.removed)return this;a.constructor==b.st.constructor&&(a=a[a.length-1]);a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node);b._insertafter(this,a,this.paper);return this};E.insertBefore=function(a){if(this.removed)return this;a.constructor==b.st.constructor&&(a=a[0]);a.node.parentNode.insertBefore(this.node,a.node);b._insertbefore(this,a,this.paper);return this};E.blur=function(a){var d=
this.node.runtimeStyle,e=d.filter,e=e.replace(q,"");0!==+a?(this.attrs.blur=a,d.filter=e+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")",d.margin=b.format("-{0}px 0 0 -{0}px",f(+a||1.5))):(d.filter=e,d.margin=0,delete this.attrs.blur);return this};b._engine.path=function(a,b){var d=A("shape");d.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";d.coordsize="21600 21600";d.coordorigin=b.coordorigin;var e=new C(d,b),f={fill:"none",stroke:"#000"};a&&(f.path=a);
e.type="path";e.path=[];e.Path="";B(e,f);b.canvas.appendChild(d);f=A("skew");f.on=!0;d.appendChild(f);e.skew=f;e.transform("");return e};b._engine.rect=function(a,d,e,f,g,h){var k=b._rectPath(d,e,f,g,h);a=a.path(k);var l=a.attrs;a.X=l.x=d;a.Y=l.y=e;a.W=l.width=f;a.H=l.height=g;l.r=h;l.path=k;a.type="rect";return a};b._engine.ellipse=function(a,b,d,e,f){a=a.path();a.X=b-e;a.Y=d-f;a.W=2*e;a.H=2*f;a.type="ellipse";B(a,{cx:b,cy:d,rx:e,ry:f});return a};b._engine.circle=function(a,b,d,e){a=a.path();a.X=
b-e;a.Y=d-e;a.W=a.H=2*e;a.type="circle";B(a,{cx:b,cy:d,r:e});return a};b._engine.image=function(a,d,e,f,g,h){var k=b._rectPath(e,f,g,h);a=a.path(k).attr({stroke:"none"});var l=a.attrs,u=a.node,m=u.getElementsByTagName("fill")[0];l.src=d;a.X=l.x=e;a.Y=l.y=f;a.W=l.width=g;a.H=l.height=h;l.path=k;a.type="image";m.parentNode==u&&u.removeChild(m);m.rotate=!0;m.src=d;m.type="tile";a._.fillpos=[e,f];a._.fillsize=[g,h];u.appendChild(m);w(a,1,1,0,0,0);return a};b._engine.text=function(d,e,g,h){var k=A("shape"),
l=A("path"),u=A("textpath");e=e||0;g=g||0;h=h||"";l.v=b.format("m{0},{1}l{2},{1}",f(21600*e),f(21600*g),f(21600*e)+1);l.textpathok=!0;u.string=a(h);u.on=!0;k.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";k.coordsize="21600 21600";k.coordorigin="0 0";var m=new C(k,d),n={fill:"#000",stroke:"none",font:b._availableAttrs.font,text:h};m.shape=k;m.path=l;m.textpath=u;m.type="text";m.attrs.text=a(h);m.attrs.x=e;m.attrs.y=g;m.attrs.w=1;m.attrs.h=1;B(m,n);k.appendChild(u);k.appendChild(l);
d.canvas.appendChild(k);d=A("skew");d.on=!0;k.appendChild(d);m.skew=d;m.transform("");return m};b._engine.setSize=function(a,d){var e=this.canvas.style;this.width=a;this.height=d;a==+a&&(a+="px");d==+d&&(d+="px");e.width=a;e.height=d;e.clip="rect(0 "+a+" "+d+" 0)";this._viewBox&&b._engine.setViewBox.apply(this,this._viewBox);return this};b._engine.setViewBox=function(a,d,e,f,h){b.eve("raphael.setViewBox",this,this._viewBox,[a,d,e,f,h]);var k=this.width,l=this.height,u=1/g(e/k,f/l),m,n;h&&(m=l/f,n=
k/e,e*m<k&&(a-=(k-e*m)/2/m),f*n<l&&(d-=(l-f*n)/2/n));this._viewBox=[a,d,e,f,!!h];this._viewBoxShift={dx:-a,dy:-d,scale:u};this.forEach(function(a){a.transform("...")});return this};var A;b._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(d){A=function(a){return b.createElement("<"+a+
' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};b._engine.initWin(b._g.win);b._engine.create=function(){var a=b._getContainer.apply(0,arguments),d=a.container,e=a.height,f=a.width,g=a.x,a=a.y;if(!d)throw Error("VML container not found.");var h=new b._Paper,k=h.canvas=b._g.doc.createElement("div"),l=k.style,g=g||0,a=a||0,f=f||512,e=e||342;h.width=f;h.height=e;f==+f&&(f+="px");e==+e&&(e+="px");h.coordsize="21600000 21600000";h.coordorigin="0 0";h.span=b._g.doc.createElement("span");h.span.style.cssText=
"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";k.appendChild(h.span);l.cssText=b.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",f,e);1==d?(b._g.doc.body.appendChild(k),l.left=g+"px",l.top=a+"px",l.position="absolute"):d.firstChild?d.insertBefore(k,d.firstChild):d.appendChild(k);h.renderfix=function(){};return h};b.prototype.clear=function(){b.eve("raphael.clear",this);this.canvas.innerHTML="";
this.span=b._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};b.prototype.remove=function(){b.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?b._removedFactory(a):null;return!0};var F=b.st,O;for(O in E)E.hasOwnProperty(O)&&!F.hasOwnProperty(O)&&(F[O]=function(a){return function(){var b=
arguments;return this.forEach(function(d){d[a].apply(d,b)})}}(O))}})();D?x.win.Raphael=b:Raphael=b;return b});TGOS.fx=TGOS.fx||function(){var a={},d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=d;var b=window.cancelAnimationFrame||window.mozCancelAnimationFrame;window.cancelAnimationFrame=b;a.easing={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return 0.5>a?2*a*a:-1+(4-2*a)*a},easeInCubic:function(a){return a*
a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return 0.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return 0.5>a?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return 0.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}};a.createAnimation=function(e){var f=e.easing?e.easing:a.easing.linear,
g="number"==typeof e.duration?e.duration:350,k="function"==typeof e.onAnimation?e.onAnimation:null,l="function"==typeof e.onEnd?e.onEnd:null,h="function"==typeof e.onStart?e.onStart:null,s=e.type?e.type:"setTimeout",m="boolean"==typeof e.repeat?e.repeat:!1,t=e.rate?e.rate:20,n=e.delay?e.delay:0,q,w=null,z,A=!1,C=function(a){null===w&&(h&&h.call(this),w="setTimeout"==s?new Date:a);z="setTimeout"==s?new Date:a;a="setTimeout"==s?Math.abs(z.getTime()-w.getTime()):Math.abs(a-w);percent=f(a/g);k&&k.call(this,
percent);1>percent&&a<g&&!A?q="setTimeout"==s?setTimeout(C,t):d(C):(l&&l.call(this),m&&F.play())},F={play:function(){w=null;"setTimeout"==s?n?setTimeout(C,n):C():n?setTimeout(function(){d(C)},n):d(C)},stop:function(){A=!0;q&&("setTimeout"==s?clearTimeout(q):b(q))}};return F};return a}();/*

  proj4js.js -- Javascript reprojection library. 

  Authors:      Mike Adair madairATdmsolutions.ca
                Richard Greenwood richATgreenwoodmap.com
                Didier Richard didier.richardATign.fr
                Stephen Irons stephen.ironsATclear.net.nz
                Olivier Terral oterralATgmail.com

  License:      
 Copyright (c) 2012, Mike Adair, Richard Greenwood, Didier Richard, 
                     Stephen Irons and Olivier Terral

 Permission is hereby granted, free of charge, to any person obtaining a
 copy of this software and associated documentation files (the "Software"),
 to deal in the Software without restriction, including without limitation
 the rights to use, copy, modify, merge, publish, distribute, sublicense,
 and/or sell copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included
 in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 DEALINGS IN THE SOFTWARE.

 Note: This program is an almost direct port of the C library PROJ.4.
*/
var Proj4js={defaultDatum:"WGS84",transform:function(a,d,b){if(!a.readyToUse)return this.reportError("Proj4js initialization for:"+a.srsCode+" not yet complete"),b;if(!d.readyToUse)return this.reportError("Proj4js initialization for:"+d.srsCode+" not yet complete"),b;if(a.datum&&d.datum&&((a.datum.datum_type==Proj4js.common.PJD_3PARAM||a.datum.datum_type==Proj4js.common.PJD_7PARAM)&&"WGS84"!=d.datumCode||(d.datum.datum_type==Proj4js.common.PJD_3PARAM||d.datum.datum_type==Proj4js.common.PJD_7PARAM)&&
"WGS84"!=a.datumCode)){var e=Proj4js.WGS84;this.transform(a,e,b);a=e}"enu"!=a.axis&&this.adjust_axis(a,!1,b);"longlat"==a.projName?(b.x*=Proj4js.common.D2R,b.y*=Proj4js.common.D2R):(a.to_meter&&(b.x*=a.to_meter,b.y*=a.to_meter),a.inverse(b));a.from_greenwich&&(b.x+=a.from_greenwich);b=this.datum_transform(a.datum,d.datum,b);d.from_greenwich&&(b.x-=d.from_greenwich);"longlat"==d.projName?(b.x*=Proj4js.common.R2D,b.y*=Proj4js.common.R2D):(d.forward(b),d.to_meter&&(b.x/=d.to_meter,b.y/=d.to_meter));
"enu"!=d.axis&&this.adjust_axis(d,!0,b);return b},datum_transform:function(a,d,b){if(a.compare_datums(d)||a.datum_type==Proj4js.common.PJD_NODATUM||d.datum_type==Proj4js.common.PJD_NODATUM)return b;if(a.es!=d.es||a.a!=d.a||a.datum_type==Proj4js.common.PJD_3PARAM||a.datum_type==Proj4js.common.PJD_7PARAM||d.datum_type==Proj4js.common.PJD_3PARAM||d.datum_type==Proj4js.common.PJD_7PARAM)a.geodetic_to_geocentric(b),a.datum_type!=Proj4js.common.PJD_3PARAM&&a.datum_type!=Proj4js.common.PJD_7PARAM||a.geocentric_to_wgs84(b),
d.datum_type!=Proj4js.common.PJD_3PARAM&&d.datum_type!=Proj4js.common.PJD_7PARAM||d.geocentric_from_wgs84(b),d.geocentric_to_geodetic(b);return b},adjust_axis:function(a,d,b){for(var e=b.x,f=b.y,g=b.z||0,k,l,h=0;3>h;h++)if(!d||2!=h||void 0!==b.z)switch(0==h?(k=e,l="x"):1==h?(k=f,l="y"):(k=g,l="z"),a.axis[h]){case "e":b[l]=k;break;case "w":b[l]=-k;break;case "n":b[l]=k;break;case "s":b[l]=-k;break;case "u":void 0!==b[l]&&(b.z=k);break;case "d":void 0!==b[l]&&(b.z=-k);break;default:return alert("ERROR: unknow axis ("+
a.axis[h]+") - check definition of "+a.projName),null}return b},reportError:function(){},extend:function(a,d){a=a||{};if(d)for(var b in d){var e=d[b];void 0!==e&&(a[b]=e)}return a},Class:function(){for(var a=function(){this.initialize.apply(this,arguments)},d={},b,e=0;e<arguments.length;++e)b="function"==typeof arguments[e]?arguments[e].prototype:arguments[e],Proj4js.extend(d,b);a.prototype=d;return a},bind:function(a,d){var b=Array.prototype.slice.apply(arguments,[2]);return function(){var e=b.concat(Array.prototype.slice.apply(arguments,
[0]));return a.apply(d,e)}},scriptName:"proj4js-compressed.js",defsLookupService:"http://spatialreference.org/ref",libPath:null,getScriptLocation:function(){if(this.libPath)return this.libPath;for(var a=this.scriptName,d=a.length,b=document.getElementsByTagName("script"),e=0;e<b.length;e++){var f=b[e].getAttribute("src");if(f){var g=f.lastIndexOf(a);if(-1<g&&g+d==f.length){this.libPath=f.slice(0,-d);break}}}return this.libPath||""},loadScript:function(a,d,b,e){var f=document.createElement("script");
f.defer=!1;f.type="text/javascript";f.id=a;f.src=a;f.onload=d;f.onerror=b;f.loadCheck=e;/MSIE/.test(navigator.userAgent)&&(f.onreadystatechange=this.checkReadyState);document.getElementsByTagName("head")[0].appendChild(f)},checkReadyState:function(){if("loaded"==this.readyState)if(this.loadCheck())this.onload();else this.onerror()}};
Proj4js.Proj=Proj4js.Class({readyToUse:!1,title:null,projName:null,units:null,datum:null,x0:0,y0:0,localCS:!1,queue:null,initialize:function(a,d){this.srsCodeInput=a;this.queue=[];d&&this.queue.push(d);if(0<=a.indexOf("GEOGCS")||0<=a.indexOf("GEOCCS")||0<=a.indexOf("PROJCS")||0<=a.indexOf("LOCAL_CS"))this.parseWKT(a),this.deriveConstants(),this.loadProjCode(this.projName);else{if(0==a.indexOf("urn:")){var b=a.split(":");"ogc"!=b[1]&&"x-ogc"!=b[1]||"def"!=b[2]||"crs"!=b[3]||(a=b[4]+":"+b[b.length-
1])}else 0==a.indexOf("http://")&&(b=a.split("#"),b[0].match(/epsg.org/)?a="EPSG:"+b[1]:b[0].match(/RIG.xml/)&&(a="IGNF:"+b[1]));this.srsCode=a.toUpperCase();0==this.srsCode.indexOf("EPSG")?(this.srsCode=this.srsCode,this.srsAuth="epsg",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("IGNF")?(this.srsCode=this.srsCode,this.srsAuth="IGNF",this.srsProjNumber=this.srsCode.substring(5)):0==this.srsCode.indexOf("CRS")?(this.srsCode=this.srsCode,this.srsAuth="CRS",this.srsProjNumber=
this.srsCode.substring(4)):(this.srsAuth="",this.srsProjNumber=this.srsCode);this.loadProjDefinition()}},loadProjDefinition:function(){if(Proj4js.defs[this.srsCode])this.defsLoaded();else{var a=Proj4js.getScriptLocation()+"defs/"+this.srsAuth.toUpperCase()+this.srsProjNumber+".js";Proj4js.loadScript(a,Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.loadFromService,this),Proj4js.bind(this.checkDefsLoaded,this))}},loadFromService:function(){Proj4js.loadScript(Proj4js.defsLookupService+"/"+this.srsAuth+
"/"+this.srsProjNumber+"/proj4js/",Proj4js.bind(this.defsLoaded,this),Proj4js.bind(this.defsFailed,this),Proj4js.bind(this.checkDefsLoaded,this))},defsLoaded:function(){this.parseDefs();this.loadProjCode(this.projName)},checkDefsLoaded:function(){return Proj4js.defs[this.srsCode]?!0:!1},defsFailed:function(){Proj4js.reportError("failed to load projection definition for: "+this.srsCode);Proj4js.defs[this.srsCode]=Proj4js.defs.WGS84;this.defsLoaded()},loadProjCode:function(a){if(Proj4js.Proj[a])this.initTransforms();
else{var d=Proj4js.getScriptLocation()+"projCode/"+a+".js";Proj4js.loadScript(d,Proj4js.bind(this.loadProjCodeSuccess,this,a),Proj4js.bind(this.loadProjCodeFailure,this,a),Proj4js.bind(this.checkCodeLoaded,this,a))}},loadProjCodeSuccess:function(a){Proj4js.Proj[a].dependsOn?this.loadProjCode(Proj4js.Proj[a].dependsOn):this.initTransforms()},loadProjCodeFailure:function(a){Proj4js.reportError("failed to find projection file for: "+a)},checkCodeLoaded:function(a){return Proj4js.Proj[a]?!0:!1},initTransforms:function(){Proj4js.extend(this,
Proj4js.Proj[this.projName]);this.init();this.readyToUse=!0;if(this.queue)for(var a;a=this.queue.shift();)a.call(this,this)},wktRE:/^(\w+)\[(.*)\]$/,parseWKT:function(a){if(a=a.match(this.wktRE)){var d=a[1],b=a[2].split(","),e;e="TOWGS84"==d.toUpperCase()?d:b.shift();e=e.replace(/^\"/,"");e=e.replace(/\"$/,"");a=[];for(var f=0,g="",k=0;k<b.length;++k){for(var l=b[k],h=0;h<l.length;++h)"["==l.charAt(h)&&++f,"]"==l.charAt(h)&&--f;g+=l;0===f?(a.push(g),g=""):g+=","}switch(d){case "LOCAL_CS":this.projName=
"identity";this.localCS=!0;this.srsCode=e;break;case "GEOGCS":this.projName="longlat";this.geocsCode=e;this.srsCode||(this.srsCode=e);break;case "PROJCS":this.srsCode=e;break;case "PROJECTION":this.projName=Proj4js.wktProjections[e];break;case "DATUM":this.datumName=e;break;case "LOCAL_DATUM":this.datumCode="none";break;case "SPHEROID":this.ellps=e;this.a=parseFloat(a.shift());this.rf=parseFloat(a.shift());break;case "PRIMEM":this.from_greenwich=parseFloat(a.shift());break;case "UNIT":this.units=
e;this.unitsPerMeter=parseFloat(a.shift());break;case "PARAMETER":d=e.toLowerCase();b=parseFloat(a.shift());switch(d){case "false_easting":this.x0=b;break;case "false_northing":this.y0=b;break;case "scale_factor":this.k0=b;break;case "central_meridian":this.long0=b*Proj4js.common.D2R;break;case "latitude_of_origin":this.lat0=b*Proj4js.common.D2R}break;case "TOWGS84":this.datum_params=a;break;case "AXIS":d=e.toLowerCase();b=a.shift();switch(b){case "EAST":b="e";break;case "WEST":b="w";break;case "NORTH":b=
"n";break;case "SOUTH":b="s";break;case "UP":b="u";break;case "DOWN":b="d";break;default:b=" "}this.axis||(this.axis="enu");switch(d){case "x":this.axis=b+this.axis.substr(1,2);break;case "y":this.axis=this.axis.substr(0,1)+b+this.axis.substr(2,1);break;case "z":this.axis=this.axis.substr(0,2)+b}}for(k=0;k<a.length;++k)this.parseWKT(a[k])}},parseDefs:function(){this.defData=Proj4js.defs[this.srsCode];var a,d;if(this.defData){for(var b=this.defData.split("+"),e=0;e<b.length;e++)switch(d=b[e].split("="),
a=d[0].toLowerCase(),d=d[1],a.replace(/\s/gi,"")){case "title":this.title=d;break;case "proj":this.projName=d.replace(/\s/gi,"");break;case "units":this.units=d.replace(/\s/gi,"");break;case "datum":this.datumCode=d.replace(/\s/gi,"");break;case "nadgrids":this.nagrids=d.replace(/\s/gi,"");break;case "ellps":this.ellps=d.replace(/\s/gi,"");break;case "a":this.a=parseFloat(d);break;case "b":this.b=parseFloat(d);break;case "rf":this.rf=parseFloat(d);break;case "lat_0":this.lat0=d*Proj4js.common.D2R;
break;case "lat_1":this.lat1=d*Proj4js.common.D2R;break;case "lat_2":this.lat2=d*Proj4js.common.D2R;break;case "lat_ts":this.lat_ts=d*Proj4js.common.D2R;break;case "lon_0":this.long0=d*Proj4js.common.D2R;break;case "alpha":this.alpha=parseFloat(d)*Proj4js.common.D2R;break;case "lonc":this.longc=d*Proj4js.common.D2R;break;case "x_0":this.x0=parseFloat(d);break;case "y_0":this.y0=parseFloat(d);break;case "k_0":this.k0=parseFloat(d);break;case "k":this.k0=parseFloat(d);break;case "r_a":this.R_A=!0;break;
case "zone":this.zone=parseInt(d,10);break;case "south":this.utmSouth=!0;break;case "towgs84":this.datum_params=d.split(",");break;case "to_meter":this.to_meter=parseFloat(d);break;case "from_greenwich":this.from_greenwich=d*Proj4js.common.D2R;break;case "pm":d=d.replace(/\s/gi,"");this.from_greenwich=Proj4js.PrimeMeridian[d]?Proj4js.PrimeMeridian[d]:parseFloat(d);this.from_greenwich*=Proj4js.common.D2R;break;case "axis":d=d.replace(/\s/gi,""),3==d.length&&-1!="ewnsud".indexOf(d.substr(0,1))&&-1!=
"ewnsud".indexOf(d.substr(1,1))&&-1!="ewnsud".indexOf(d.substr(2,1))&&(this.axis=d)}this.deriveConstants()}},deriveConstants:function(){"@null"==this.nagrids&&(this.datumCode="none");if(this.datumCode&&"none"!=this.datumCode){var a=Proj4js.Datum[this.datumCode];a&&(this.datum_params=a.towgs84?a.towgs84.split(","):null,this.ellps=a.ellipse,this.datumName=a.datumName?a.datumName:this.datumCode)}this.a||Proj4js.extend(this,Proj4js.Ellipsoid[this.ellps]?Proj4js.Ellipsoid[this.ellps]:Proj4js.Ellipsoid.WGS84);
this.rf&&!this.b&&(this.b=(1-1/this.rf)*this.a);if(0===this.rf||Math.abs(this.a-this.b)<Proj4js.common.EPSLN)this.sphere=!0,this.b=this.a;this.a2=this.a*this.a;this.b2=this.b*this.b;this.es=(this.a2-this.b2)/this.a2;this.e=Math.sqrt(this.es);this.R_A&&(this.a*=1-this.es*(Proj4js.common.SIXTH+this.es*(Proj4js.common.RA4+this.es*Proj4js.common.RA6)),this.a2=this.a*this.a,this.b2=this.b*this.b,this.es=0);this.ep2=(this.a2-this.b2)/this.b2;this.k0||(this.k0=1);this.axis||(this.axis="enu");this.datum=
new Proj4js.datum(this)}});Proj4js.Proj.longlat={init:function(){},forward:function(a){return a},inverse:function(a){return a}};Proj4js.Proj.identity=Proj4js.Proj.longlat;
Proj4js.defs={WGS84:"+title=long/lat:WGS84 +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4326":"+title=long/lat:WGS84 +proj=longlat +a=6378137.0 +b=6356752.31424518 +ellps=WGS84 +datum=WGS84 +units=degrees","EPSG:4269":"+title=long/lat:NAD83 +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees","EPSG:3875":"+title= Google Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"};
Proj4js.defs["EPSG:3785"]=Proj4js.defs["EPSG:3875"];Proj4js.defs.GOOGLE=Proj4js.defs["EPSG:3875"];Proj4js.defs["EPSG:900913"]=Proj4js.defs["EPSG:3875"];Proj4js.defs["EPSG:102113"]=Proj4js.defs["EPSG:3875"];
Proj4js.common={PI:3.141592653589793,HALF_PI:1.5707963267948966,TWO_PI:6.283185307179586,FORTPI:0.7853981633974483,R2D:57.29577951308232,D2R:0.017453292519943295,SEC_TO_RAD:4.84813681109536E-6,EPSLN:1E-10,MAX_ITER:20,COS_67P5:0.3826834323650898,AD_C:1.0026,PJD_UNKNOWN:0,PJD_3PARAM:1,PJD_7PARAM:2,PJD_GRIDSHIFT:3,PJD_WGS84:4,PJD_NODATUM:5,SRS_WGS84_SEMIMAJOR:6378137,SIXTH:0.16666666666666666,RA4:0.04722222222222222,RA6:0.022156084656084655,RV4:0.06944444444444445,RV6:0.04243827160493827,msfnz:function(a,
d,b){a*=d;return b/Math.sqrt(1-a*a)},tsfnz:function(a,d,b){b*=a;b=Math.pow((1-b)/(1+b),0.5*a);return Math.tan(0.5*(this.HALF_PI-d))/b},phi2z:function(a,d){for(var b=0.5*a,e,f=this.HALF_PI-2*Math.atan(d),g=0;15>=g;g++)if(e=a*Math.sin(f),e=this.HALF_PI-2*Math.atan(d*Math.pow((1-e)/(1+e),b))-f,f+=e,1E-10>=Math.abs(e))return f;alert("phi2z has NoConvergence");return-9999},qsfnz:function(a,d){var b;return 1E-7<a?(b=a*d,(1-a*a)*(d/(1-b*b)-0.5/a*Math.log((1-b)/(1+b)))):2*d},asinz:function(a){1<Math.abs(a)&&
(a=1<a?1:-1);return Math.asin(a)},e0fn:function(a){return 1-0.25*a*(1+a/16*(3+1.25*a))},e1fn:function(a){return 0.375*a*(1+0.25*a*(1+0.46875*a))},e2fn:function(a){return 0.05859375*a*a*(1+0.75*a)},e3fn:function(a){return a*a*a*(35/3072)},mlfn:function(a,d,b,e,f){return a*f-d*Math.sin(2*f)+b*Math.sin(4*f)-e*Math.sin(6*f)},srat:function(a,d){return Math.pow((1-a)/(1+a),d)},sign:function(a){return 0>a?-1:1},adjust_lon:function(a){return Math.abs(a)<this.PI?a:a-this.sign(a)*this.TWO_PI},adjust_lat:function(a){return Math.abs(a)<
this.HALF_PI?a:a-this.sign(a)*this.PI},latiso:function(a,d,b){if(Math.abs(d)>this.HALF_PI)return+Number.NaN;if(d==this.HALF_PI)return Number.POSITIVE_INFINITY;if(d==-1*this.HALF_PI)return-1*Number.POSITIVE_INFINITY;b*=a;return Math.log(Math.tan((this.HALF_PI+d)/2))+a*Math.log((1-b)/(1+b))/2},fL:function(a,d){return 2*Math.atan(a*Math.exp(d))-this.HALF_PI},invlatiso:function(a,d){var b=this.fL(1,d),e=0,f=0;do e=b,f=a*Math.sin(e),b=this.fL(Math.exp(a*Math.log((1+f)/(1-f))/2),d);while(1E-12<Math.abs(b-
e));return b},sinh:function(a){a=Math.exp(a);return(a-1/a)/2},cosh:function(a){a=Math.exp(a);return(a+1/a)/2},tanh:function(a){a=Math.exp(a);return(a-1/a)/(a+1/a)},asinh:function(a){return(0<=a?1:-1)*Math.log(Math.abs(a)+Math.sqrt(a*a+1))},acosh:function(a){return 2*Math.log(Math.sqrt((a+1)/2)+Math.sqrt((a-1)/2))},atanh:function(a){return Math.log((a-1)/(a+1))/2},gN:function(a,d,b){d*=b;return a/Math.sqrt(1-d*d)},pj_enfn:function(a){var d=[];d[0]=this.C00-a*(this.C02+a*(this.C04+a*(this.C06+a*this.C08)));
d[1]=a*(this.C22-a*(this.C04+a*(this.C06+a*this.C08)));var b=a*a;d[2]=b*(this.C44-a*(this.C46+a*this.C48));b*=a;d[3]=b*(this.C66-a*this.C68);d[4]=b*a*this.C88;return d},pj_mlfn:function(a,d,b,e){b*=d;d*=d;return e[0]*a-b*(e[1]+d*(e[2]+d*(e[3]+d*e[4])))},pj_inv_mlfn:function(a,d,b){for(var e=1/(1-d),f=a,g=Proj4js.common.MAX_ITER;g;--g){var k=Math.sin(f),l=1-d*k*k,l=(this.pj_mlfn(f,k,Math.cos(f),b)-a)*l*Math.sqrt(l)*e,f=f-l;if(Math.abs(l)<Proj4js.common.EPSLN)return f}Proj4js.reportError("cass:pj_inv_mlfn: Convergence error");
return f},C00:1,C02:0.25,C04:0.046875,C06:0.01953125,C08:0.01068115234375,C22:0.75,C44:0.46875,C46:0.013020833333333334,C48:0.007120768229166667,C66:0.3645833333333333,C68:0.005696614583333333,C88:0.3076171875};
Proj4js.datum=Proj4js.Class({initialize:function(a){this.datum_type=Proj4js.common.PJD_WGS84;a.datumCode&&"none"==a.datumCode&&(this.datum_type=Proj4js.common.PJD_NODATUM);if(a&&a.datum_params){for(var d=0;d<a.datum_params.length;d++)a.datum_params[d]=parseFloat(a.datum_params[d]);if(0!=a.datum_params[0]||0!=a.datum_params[1]||0!=a.datum_params[2])this.datum_type=Proj4js.common.PJD_3PARAM;3<a.datum_params.length&&(0!=a.datum_params[3]||0!=a.datum_params[4]||0!=a.datum_params[5]||0!=a.datum_params[6])&&
(this.datum_type=Proj4js.common.PJD_7PARAM,a.datum_params[3]*=Proj4js.common.SEC_TO_RAD,a.datum_params[4]*=Proj4js.common.SEC_TO_RAD,a.datum_params[5]*=Proj4js.common.SEC_TO_RAD,a.datum_params[6]=a.datum_params[6]/1E6+1)}a&&(this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params)},compare_datums:function(a){return this.datum_type!=a.datum_type||this.a!=a.a||5E-11<Math.abs(this.es-a.es)?!1:this.datum_type==Proj4js.common.PJD_3PARAM?this.datum_params[0]==a.datum_params[0]&&
this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]:this.datum_type==Proj4js.common.PJD_7PARAM?this.datum_params[0]==a.datum_params[0]&&this.datum_params[1]==a.datum_params[1]&&this.datum_params[2]==a.datum_params[2]&&this.datum_params[3]==a.datum_params[3]&&this.datum_params[4]==a.datum_params[4]&&this.datum_params[5]==a.datum_params[5]&&this.datum_params[6]==a.datum_params[6]:this.datum_type==Proj4js.common.PJD_GRIDSHIFT||a.datum_type==Proj4js.common.PJD_GRIDSHIFT?(alert("ERROR: Grid shift transformations are not implemented."),
!1):!0},geodetic_to_geocentric:function(a){var d=a.x,b=a.y,e=a.z?a.z:0,f,g,k;if(b<-Proj4js.common.HALF_PI&&b>-1.001*Proj4js.common.HALF_PI)b=-Proj4js.common.HALF_PI;else if(b>Proj4js.common.HALF_PI&&b<1.001*Proj4js.common.HALF_PI)b=Proj4js.common.HALF_PI;else if(b<-Proj4js.common.HALF_PI||b>Proj4js.common.HALF_PI)return Proj4js.reportError("geocent:lat out of range:"+b),null;d>Proj4js.common.PI&&(d-=2*Proj4js.common.PI);g=Math.sin(b);k=Math.cos(b);f=this.a/Math.sqrt(1-this.es*g*g);b=(f+e)*k*Math.cos(d);
d=(f+e)*k*Math.sin(d);e=(f*(1-this.es)+e)*g;a.x=b;a.y=d;a.z=e;return 0},geocentric_to_geodetic:function(a){var d,b,e,f,g,k,l,h,s,m,t=a.x;e=a.y;var n=a.z?a.z:0;d=Math.sqrt(t*t+e*e);b=Math.sqrt(t*t+e*e+n*n);if(1E-12>d/this.a){if(t=0,1E-12>b/this.a)return}else t=Math.atan2(e,t);e=n/b;f=d/b;g=1/Math.sqrt(1-this.es*(2-this.es)*f*f);l=f*(1-this.es)*g;h=e*g;m=0;do m++,k=this.a/Math.sqrt(1-this.es*h*h),b=d*l+n*h-k*(1-this.es*h*h),k=this.es*k/(k+b),g=1/Math.sqrt(1-k*(2-k)*f*f),k=f*(1-k)*g,g*=e,s=g*l-k*h,l=
k,h=g;while(1E-24<s*s&&30>m);d=Math.atan(g/Math.abs(k));a.x=t;a.y=d;a.z=b;return a},geocentric_to_geodetic_noniter:function(a){var d=a.x,b=a.y,e=a.z?a.z:0,f,g,k,l,h,d=parseFloat(d),b=parseFloat(b),e=parseFloat(e);h=!1;if(0!=d)f=Math.atan2(b,d);else if(0<b)f=Proj4js.common.HALF_PI;else if(0>b)f=-Proj4js.common.HALF_PI;else if(h=!0,f=0,0<e)g=Proj4js.common.HALF_PI;else if(0>e)g=-Proj4js.common.HALF_PI;else return;k=d*d+b*b;d=Math.sqrt(k);b=e*Proj4js.common.AD_C;k=Math.sqrt(b*b+k);b/=k;k=d/k;b=e+this.b*
this.ep2*b*b*b;l=d-this.a*this.es*k*k*k;k=Math.sqrt(b*b+l*l);b/=k;k=l/k;l=this.a/Math.sqrt(1-this.es*b*b);e=k>=Proj4js.common.COS_67P5?d/k-l:k<=-Proj4js.common.COS_67P5?d/-k-l:e/b+l*(this.es-1);!1==h&&(g=Math.atan(b/k));a.x=f;a.y=g;a.z=e;return a},geocentric_to_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var d=this.datum_params[3],b=this.datum_params[4],
e=this.datum_params[5],f=this.datum_params[6],g=f*(e*a.x+a.y-d*a.z)+this.datum_params[1],d=f*(-b*a.x+d*a.y+a.z)+this.datum_params[2];a.x=f*(a.x-e*a.y+b*a.z)+this.datum_params[0];a.y=g;a.z=d}},geocentric_from_wgs84:function(a){if(this.datum_type==Proj4js.common.PJD_3PARAM)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type==Proj4js.common.PJD_7PARAM){var d=this.datum_params[3],b=this.datum_params[4],e=this.datum_params[5],f=this.datum_params[6],g=(a.x-
this.datum_params[0])/f,k=(a.y-this.datum_params[1])/f,f=(a.z-this.datum_params[2])/f;a.x=g+e*k-b*f;a.y=-e*g+k+d*f;a.z=b*g-d*k+f}}});
Proj4js.Point=Proj4js.Class({initialize:function(a,d,b){"object"==typeof a?(this.x=a[0],this.y=a[1],this.z=a[2]||0):"string"==typeof a&&"undefined"==typeof d?(a=a.split(","),this.x=parseFloat(a[0]),this.y=parseFloat(a[1]),this.z=parseFloat(a[2])||0):(this.x=a,this.y=d,this.z=b||0)},clone:function(){return new Proj4js.Point(this.x,this.y,this.z)},toString:function(){return"x="+this.x+",y="+this.y},toShortString:function(){return this.x+", "+this.y}});
Proj4js.PrimeMeridian={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};
Proj4js.Ellipsoid={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},"APL4.":{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},
andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},CPM:{a:6375738.7,rf:334.29,
ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},
fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},
new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS72:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},
sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};
Proj4js.Datum={WGS84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},GGRS87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},NAD83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},NAD27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",
ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},OSGB36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"}};
Proj4js.WGS84=new Proj4js.Proj("WGS84");Proj4js.Datum.OSB36=Proj4js.Datum.OSGB36;Proj4js.wktProjections={"Lambert Tangential Conformal Conic Projection":"lcc",Mercator:"merc","Popular Visualisation Pseudo Mercator":"merc",Mercator_1SP:"merc",Transverse_Mercator:"tmerc","Transverse Mercator":"tmerc","Lambert Azimuthal Equal Area":"laea","Universal Transverse Mercator System":"utm"};
Proj4js.Proj.aea={init:function(){Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN?Proj4js.reportError("aeaInitEqualLatitudes"):(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.con=this.t1=this.sin_po,this.ms1=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=
this.sin_po,this.ms2=Proj4js.common.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Proj4js.common.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/
this.ns0)},forward:function(a){var d=a.x,b=a.y;this.sin_phi=Math.sin(b);this.cos_phi=Math.cos(b);var b=Proj4js.common.qsfnz(this.e3,this.sin_phi,this.cos_phi),b=this.a*Math.sqrt(this.c-this.ns0*b)/this.ns0,e=this.ns0*Proj4js.common.adjust_lon(d-this.long0),d=b*Math.sin(e)+this.x0,b=this.rh-b*Math.cos(e)+this.y0;a.x=d;a.y=b;return a},inverse:function(a){var d,b,e;a.x-=this.x0;a.y=this.rh-a.y+this.y0;0<=this.ns0?(d=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(d=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);e=0;0!=d&&(e=Math.atan2(b*
a.x,b*a.y));b=d*this.ns0/this.a;d=(this.c-b*b)/this.ns0;1E-10<=this.e3?(b=1-0.5*(1-this.es)*Math.log((1-this.e3)/(1+this.e3))/this.e3,b=1E-10<Math.abs(Math.abs(b)-Math.abs(d))?this.phi1z(this.e3,d):0<=d?0.5*Proj4js.common.PI:-0.5*Proj4js.common.PI):b=this.phi1z(this.e3,d);e=Proj4js.common.adjust_lon(e/this.ns0+this.long0);a.x=e;a.y=b;return a},phi1z:function(a,d){var b,e,f,g,k=Proj4js.common.asinz(0.5*d);if(a<Proj4js.common.EPSLN)return k;for(var l=a*a,h=1;25>=h;h++)if(b=Math.sin(k),e=Math.cos(k),
f=a*b,g=1-f*f,b=0.5*g*g/e*(d/(1-l)-b/g+0.5/a*Math.log((1-f)/(1+f))),k+=b,1E-7>=Math.abs(b))return k;Proj4js.reportError("aea:phi1z:Convergence error");return null}};
Proj4js.Proj.sterea={dependsOn:"gauss",init:function(){Proj4js.Proj.gauss.init.apply(this);this.rc?(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative")):Proj4js.reportError("sterea:init:E_ERROR_0")},forward:function(a){var d,b,e,f;a.x=Proj4js.common.adjust_lon(a.x-this.long0);Proj4js.Proj.gauss.forward.apply(this,[a]);d=Math.sin(a.y);b=Math.cos(a.y);e=Math.cos(a.x);f=this.k0*this.R2/(1+this.sinc0*d+this.cosc0*
b*e);a.x=f*b*Math.sin(a.x);a.y=f*(this.cosc0*d-this.sinc0*b*e);a.x=this.a*a.x+this.x0;a.y=this.a*a.y+this.y0;return a},inverse:function(a){var d,b,e,f;a.x=(a.x-this.x0)/this.a;a.y=(a.y-this.y0)/this.a;a.x/=this.k0;a.y/=this.k0;(f=Math.sqrt(a.x*a.x+a.y*a.y))?(e=2*Math.atan2(f,this.R2),d=Math.sin(e),b=Math.cos(e),e=Math.asin(b*this.sinc0+a.y*d*this.cosc0/f),d=Math.atan2(a.x*d,f*this.cosc0*b-a.y*this.sinc0*d)):(e=this.phic0,d=0);a.x=d;a.y=e;Proj4js.Proj.gauss.inverse.apply(this,[a]);a.x=Proj4js.common.adjust_lon(a.x+
this.long0);return a}};function phi4z(a,d,b,e,f,g,k,l,h){var s,m,t,n,q,w;h=g;for(w=1;15>=w;w++)if(s=Math.sin(h),t=Math.tan(h),l=t*Math.sqrt(1-a*s*s),m=Math.sin(2*h),n=d*h-b*m+e*Math.sin(4*h)-f*Math.sin(6*h),q=d-2*b*Math.cos(2*h)+4*e*Math.cos(4*h)-6*f*Math.cos(6*h),s=2*n+l*(n*n+k)-2*g*(l*n+1),t=a*m*(n*n+k-2*g*n)/(2*l),l=2*(g-n)*(l*q-2/m)-2*q,s/=t+l,h+=s,1E-10>=Math.abs(s))return h;Proj4js.reportError("phi4z: No convergence");return null}
function e4fn(a){var d;d=1+a;a=1-a;return Math.sqrt(Math.pow(d,d)*Math.pow(a,a))}
Proj4js.Proj.poly={init:function(){0==this.lat0&&(this.lat0=90);this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.ml0=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(a){var d,b,e,f,g;e=a.y;b=Proj4js.common.adjust_lon(a.x-this.long0);1E-7>=Math.abs(e)?(g=this.x0+this.a*b,d=this.y0-this.a*
this.ml0):(d=Math.sin(e),b=Math.cos(e),e=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,e),f=Proj4js.common.msfnz(this.e,d,b),b=d,g=this.x0+this.a*f*Math.sin(b)/d,d=this.y0+this.a*(e-this.ml0+f*(1-Math.cos(b))/d));a.x=g;a.y=d;return a},inverse:function(a){var d,b;a.x-=this.x0;a.y-=this.y0;d=this.ml0+a.y/this.a;if(1E-7>=Math.abs(d))d=a.x/this.a+this.long0,b=0;else{d=d*d+a.x/this.a*(a.x/this.a);d=phi4z(this.es,this.e0,this.e1,this.e2,this.e3,this.al,d,void 0,b);if(1!=d)return d;d=Proj4js.common.adjust_lon(Proj4js.common.asinz(NaN*
a.x/this.a)/Math.sin(b)+this.long0)}a.x=d;a.y=b;return a}};
Proj4js.Proj.equi={init:function(){this.x0||(this.x0=0);this.y0||(this.y0=0);this.lat0||(this.lat0=0);this.long0||(this.long0=0)},forward:function(a){var d=a.y,b=this.x0+this.a*Proj4js.common.adjust_lon(a.x-this.long0)*Math.cos(this.lat0),d=this.y0+this.a*d;this.t1=b;this.t2=Math.cos(this.lat0);a.x=b;a.y=d;return a},inverse:function(a){a.x-=this.x0;a.y-=this.y0;var d=a.y/this.a;Math.abs(d)>Proj4js.common.HALF_PI&&Proj4js.reportError("equi:Inv:DataError");var b=Proj4js.common.adjust_lon(this.long0+
a.x/(this.a*Math.cos(this.lat0)));a.x=b;a.y=d}};
Proj4js.Proj.merc={init:function(){this.lat_ts&&(this.k0=this.sphere?Math.cos(this.lat_ts):Proj4js.common.msfnz(this.es,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(a){var d=a.x,b=a.y;if(90<b*Proj4js.common.R2D&&-90>b*Proj4js.common.R2D&&180<d*Proj4js.common.R2D&&-180>d*Proj4js.common.R2D)return Proj4js.reportError("merc:forward: llInputOutOfRange: "+d+" : "+b),null;if(Math.abs(Math.abs(b)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)return Proj4js.reportError("merc:forward: ll2mAtPoles"),null;
if(this.sphere)d=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(d-this.long0),b=this.y0+this.a*this.k0*Math.log(Math.tan(Proj4js.common.FORTPI+0.5*b));else var e=Math.sin(b),b=Proj4js.common.tsfnz(this.e,b,e),d=this.x0+this.a*this.k0*Proj4js.common.adjust_lon(d-this.long0),b=this.y0-this.a*this.k0*Math.log(b);a.x=d;a.y=b;return a},inverse:function(a){var d=a.x-this.x0,b=a.y-this.y0;if(this.sphere)b=Proj4js.common.HALF_PI-2*Math.atan(Math.exp(-b/this.a*this.k0));else if(b=Math.exp(-b/(this.a*this.k0)),
b=Proj4js.common.phi2z(this.e,b),-9999==b)return Proj4js.reportError("merc:inverse: lat = -9999"),null;d=Proj4js.common.adjust_lon(this.long0+d/(this.a*this.k0));a.x=d;a.y=b;return a}};Proj4js.Proj.utm={dependsOn:"tmerc",init:function(){this.zone?(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*Proj4js.common.D2R,this.x0=5E5,this.y0=this.utmSouth?1E7:0,this.k0=0.9996,Proj4js.Proj.tmerc.init.apply(this),this.forward=Proj4js.Proj.tmerc.forward,this.inverse=Proj4js.Proj.tmerc.inverse):Proj4js.reportError("utm:init: zone must be specified for UTM")}};
Proj4js.Proj.eqdc={init:function(){this.mode||(this.mode=0);this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi);this.ml1=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1);0!=this.mode?
(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN&&Proj4js.reportError("eqdc:Init:EqualLatitudes"),this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Proj4js.common.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=Math.abs(this.lat1-this.lat2)>=Proj4js.common.EPSLN?(this.ms1-this.ms2)/(this.ml2-this.ml1):this.sinphi):this.ns=this.sinphi;this.g=this.ml1+this.ms1/this.ns;this.ml0=Proj4js.common.mlfn(this.e0,
this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)},forward:function(a){var d=a.x,b=this.a*(this.g-Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,a.y)),e=this.ns*Proj4js.common.adjust_lon(d-this.long0),d=this.x0+b*Math.sin(e),b=this.y0+this.rh-b*Math.cos(e);a.x=d;a.y=b;return a},inverse:function(a){a.x-=this.x0;a.y=this.rh-a.y+this.y0;var d,b;0<=this.ns?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1);var e=0;0!=b&&(e=Math.atan2(d*a.x,d*a.y));d=this.phi3z(this.g-
b/this.a,this.e0,this.e1,this.e2,this.e3);e=Proj4js.common.adjust_lon(this.long0+e/this.ns);a.x=e;a.y=d;return a},phi3z:function(a,d,b,e,f){var g,k;g=a;for(var l=0;15>l;l++)if(k=(a+b*Math.sin(2*g)-e*Math.sin(4*g)+f*Math.sin(6*g))/d-g,g+=k,1E-10>=Math.abs(k))return g;Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations");return null}};
Proj4js.Proj.tmerc={init:function(){this.e0=Proj4js.common.e0fn(this.es);this.e1=Proj4js.common.e1fn(this.es);this.e2=Proj4js.common.e2fn(this.es);this.e3=Proj4js.common.e3fn(this.es);this.ml0=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(a){var d=a.y,b=Proj4js.common.adjust_lon(a.x-this.long0),e,f;e=Math.sin(d);var g=Math.cos(d);if(this.sphere){var k=g*Math.sin(b);if(1E-10>Math.abs(Math.abs(k)-1))return Proj4js.reportError("tmerc:forward: Point projects into infinity"),
93;f=0.5*this.a*this.k0*Math.log((1+k)/(1-k));e=Math.acos(g*Math.cos(b)/Math.sqrt(1-k*k));0>d&&(e=-e);d=this.a*this.k0*(e-this.lat0)}else{f=g*b;var b=Math.pow(f,2),g=this.ep2*Math.pow(g,2),k=Math.tan(d),l=Math.pow(k,2);e=1-this.es*Math.pow(e,2);e=this.a/Math.sqrt(e);d=this.a*Proj4js.common.mlfn(this.e0,this.e1,this.e2,this.e3,d);f=this.k0*e*f*(1+b/6*(1-l+g+b/20*(5-18*l+Math.pow(l,2)+72*g-58*this.ep2)))+this.x0;d=this.k0*(d-this.ml0+e*k*b*(0.5+b/24*(5-l+9*g+4*Math.pow(g,2)+b/30*(61-58*l+Math.pow(l,
2)+600*g-330*this.ep2))))+this.y0}a.x=f;a.y=d;return a},inverse:function(a){var d,b,e,f;if(this.sphere){b=Math.exp(a.x/(this.a*this.k0));var g=0.5*(b-1/b);e=this.lat0+a.y/(this.a*this.k0);f=Math.cos(e);d=Math.sqrt((1-f*f)/(1+g*g));b=Proj4js.common.asinz(d);0>e&&(b=-b);d=0==g&&0==f?this.long0:Proj4js.common.adjust_lon(Math.atan2(g,f)+this.long0)}else{var g=a.x-this.x0,k=a.y-this.y0;b=d=(this.ml0+k/this.k0)/this.a;for(f=0;;f++){e=(d+this.e1*Math.sin(2*b)-this.e2*Math.sin(4*b)+this.e3*Math.sin(6*b))/
this.e0-b;b+=e;if(Math.abs(e)<=Proj4js.common.EPSLN)break;if(6<=f)return Proj4js.reportError("tmerc:inverse: Latitude failed to converge"),95}if(Math.abs(b)<Proj4js.common.HALF_PI){d=Math.sin(b);e=Math.cos(b);var l=Math.tan(b);f=this.ep2*Math.pow(e,2);var k=Math.pow(f,2),h=Math.pow(l,2),s=Math.pow(h,2);d=1-this.es*Math.pow(d,2);var m=this.a/Math.sqrt(d);d=m*(1-this.es)/d;var g=g/(m*this.k0),t=Math.pow(g,2);b-=m*l*t/d*(0.5-t/24*(5+3*h+10*f-4*k-9*this.ep2-t/30*(61+90*h+298*f+45*s-252*this.ep2-3*k)));
d=Proj4js.common.adjust_lon(this.long0+g*(1-t/6*(1+2*h+f-t/20*(5-2*f+28*h-3*k+8*this.ep2+24*s)))/e)}else b=Proj4js.common.HALF_PI*Proj4js.common.sign(k),d=this.long0}a.x=d;a.y=b;return a}};Proj4js.defs.GOOGLE="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs";Proj4js.defs["EPSG:900913"]=Proj4js.defs.GOOGLE;
Proj4js.Proj.gstmerc={init:function(){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);this.lc=this.long0;this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var a=Math.sin(this.lat0),d=Math.asin(a/this.rs),b=Math.sin(d);this.cp=Proj4js.common.latiso(0,d,b)-this.rs*Proj4js.common.latiso(this.e,this.lat0,a);this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*a*a);this.xs=this.x0;this.ys=this.y0-this.n2*d;this.title||(this.title="Gauss Schreiber transverse mercator")},
forward:function(a){var d=a.y,b=this.rs*(a.x-this.lc),d=this.cp+this.rs*Proj4js.common.latiso(this.e,d,Math.sin(d)),e=Math.asin(Math.sin(b)/Proj4js.common.cosh(d)),e=Proj4js.common.latiso(0,e,Math.sin(e));a.x=this.xs+this.n2*e;a.y=this.ys+this.n2*Math.atan(Proj4js.common.sinh(d)/Math.cos(b));return a},inverse:function(a){var d=a.x,b=a.y,e=Math.atan(Proj4js.common.sinh((d-this.xs)/this.n2)/Math.cos((b-this.ys)/this.n2)),d=Math.asin(Math.sin((b-this.ys)/this.n2)/Proj4js.common.cosh((d-this.xs)/this.n2)),
d=Proj4js.common.latiso(0,d,Math.sin(d));a.x=this.lc+e/this.rs;a.y=Proj4js.common.invlatiso(this.e,(d-this.cp)/this.rs);return a}};
Proj4js.Proj.ortho={init:function(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)},forward:function(a){var d,b,e,f,g;b=a.y;e=Proj4js.common.adjust_lon(a.x-this.long0);d=Math.sin(b);b=Math.cos(b);f=Math.cos(e);g=this.sin_p14*d+this.cos_p14*b*f;if(0<g||Math.abs(g)<=Proj4js.common.EPSLN)var k=1*this.a*b*Math.sin(e),l=this.y0+1*this.a*(this.cos_p14*d-this.sin_p14*b*f);else Proj4js.reportError("orthoFwdPointError");a.x=k;a.y=l;return a},inverse:function(a){var d,b,e,f;a.x-=this.x0;
a.y-=this.y0;d=Math.sqrt(a.x*a.x+a.y*a.y);d>this.a+1E-7&&Proj4js.reportError("orthoInvDataError");b=Proj4js.common.asinz(d/this.a);e=Math.sin(b);f=Math.cos(b);b=this.long0;Math.abs(d);e=Proj4js.common.asinz(f*this.sin_p14+a.y*e*this.cos_p14/d);d=Math.abs(this.lat0)-Proj4js.common.HALF_PI;Math.abs(d)<=Proj4js.common.EPSLN&&(b=0<=this.lat0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-a.y)):Proj4js.common.adjust_lon(this.long0-Math.atan2(-a.x,a.y)));Math.sin(e);a.x=b;a.y=e;return a}};
Proj4js.Proj.krovak={init:function(){this.a=6377397.155;this.es=0.006674372230614;this.e=Math.sqrt(this.es);this.lat0||(this.lat0=0.863937979737193);this.long0||(this.long0=0.4334234309119251);this.k0||(this.k0=0.9999);this.s45=0.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/
(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq},forward:function(a){var d,b,e;b=a.y;e=Proj4js.common.adjust_lon(a.x-this.long0);d=Math.pow((1+this.e*Math.sin(b))/(1-this.e*Math.sin(b)),this.alfa*
this.e/2);d=2*(Math.atan(this.k*Math.pow(Math.tan(b/2+this.s45),this.alfa)/d)-this.s45);b=-e*this.alfa;e=Math.asin(Math.cos(this.ad)*Math.sin(d)+Math.sin(this.ad)*Math.cos(d)*Math.cos(b));d=this.n*Math.asin(Math.cos(d)*Math.sin(b)/Math.cos(e));e=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n);a.y=e*Math.cos(d)/1;a.x=e*Math.sin(d)/1;this.czech&&(a.y*=-1,a.x*=-1);return a},inverse:function(a){var d,b,e;d=a.x;a.x=a.y;a.y=d;this.czech&&(a.y*=-1,a.x*=-1);
d=Math.sqrt(a.x*a.x+a.y*a.y);b=Math.atan2(a.y,a.x)/Math.sin(this.s0);e=2*(Math.atan(Math.pow(this.ro0/d,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);d=Math.asin(Math.cos(this.ad)*Math.sin(e)-Math.sin(this.ad)*Math.cos(e)*Math.cos(b));b=Math.asin(Math.cos(e)*Math.sin(b)/Math.cos(d));a.x=this.long0-b/this.alfa;b=d;var f=e=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(d/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(b))/(1-this.e*Math.sin(b)),this.e/2))-this.s45),1E-10>
Math.abs(b-a.y)&&(e=1),b=a.y,f+=1;while(0==e&&15>f);return 15<=f?(Proj4js.reportError("PHI3Z-CONV:Latitude failed to converge after 15 iterations"),null):a}};
Proj4js.Proj.somerc={init:function(){var a=this.lat0;this.lambda0=this.long0;var d=Math.sin(a),b=this.a,e=1/this.rf,e=2*e-Math.pow(e,2),f=this.e=Math.sqrt(e);this.R=this.k0*b*Math.sqrt(1-e)/(1-e*Math.pow(d,2));this.alpha=Math.sqrt(1+e/(1-e)*Math.pow(Math.cos(a),4));this.b0=Math.asin(d/this.alpha);this.K=Math.log(Math.tan(Math.PI/4+this.b0/2))-this.alpha*Math.log(Math.tan(Math.PI/4+a/2))+this.alpha*f/2*Math.log((1+f*d)/(1-f*d))},forward:function(a){var d=Math.log(Math.tan(Math.PI/4-a.y/2)),b=this.e/
2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),b=2*(Math.atan(Math.exp(-this.alpha*(d+b)+this.K))-Math.PI/4),e=this.alpha*(a.x-this.lambda0),d=Math.atan(Math.sin(e)/(Math.sin(this.b0)*Math.tan(b)+Math.cos(this.b0)*Math.cos(e))),b=Math.asin(Math.cos(this.b0)*Math.sin(b)-Math.sin(this.b0)*Math.cos(b)*Math.cos(e));a.y=this.R/2*Math.log((1+Math.sin(b))/(1-Math.sin(b)))+this.y0;a.x=this.R*d+this.x0;return a},inverse:function(a){for(var d=(a.x-this.x0)/this.R,b=2*(Math.atan(Math.exp((a.y-
this.y0)/this.R))-Math.PI/4),e=Math.asin(Math.cos(this.b0)*Math.sin(b)+Math.sin(this.b0)*Math.cos(b)*Math.cos(d)),d=this.lambda0+Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(b)))/this.alpha,f=e,g=-1E3,k=0;1E-7<Math.abs(f-g);){if(20<++k){Proj4js.reportError("omercFwdInfinity");return}b=1/this.alpha*(Math.log(Math.tan(Math.PI/4+e/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(f))/2));g=f;f=2*Math.atan(Math.exp(b))-Math.PI/2}a.x=d;a.y=f;return a}};
Proj4js.Proj.stere={ssfn_:function(a,d,b){d*=b;return Math.tan(0.5*(Proj4js.common.HALF_PI+a))*Math.pow((1-d)/(1+d),0.5*b)},TOL:1E-8,NITER:8,CONV:1E-10,S_POLE:0,N_POLE:1,OBLIQ:2,EQUIT:3,init:function(){this.phits=this.lat_ts?this.lat_ts:Proj4js.common.HALF_PI;var a=Math.abs(this.lat0);this.mode=Math.abs(a)-Proj4js.common.HALF_PI<Proj4js.common.EPSLN?0>this.lat0?this.S_POLE:this.N_POLE:a>Proj4js.common.EPSLN?this.OBLIQ:this.EQUIT;this.phits=Math.abs(this.phits);if(this.es){var d;switch(this.mode){case this.N_POLE:case this.S_POLE:Math.abs(this.phits-
Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?this.akm1=2*this.k0/Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)):(a=Math.sin(this.phits),this.akm1=Math.cos(this.phits)/Proj4js.common.tsfnz(this.e,this.phits,a),a*=this.e,this.akm1/=Math.sqrt(1-a*a));break;case this.EQUIT:this.akm1=2*this.k0;break;case this.OBLIQ:a=Math.sin(this.lat0),d=2*Math.atan(this.ssfn_(this.lat0,a,this.e))-Proj4js.common.HALF_PI,a*=this.e,this.akm1=2*this.k0*Math.cos(this.lat0)/Math.sqrt(1-a*a),this.sinX1=
Math.sin(d),this.cosX1=Math.cos(d)}}else switch(this.mode){case this.OBLIQ:this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0);case this.EQUIT:this.akm1=2*this.k0;break;case this.S_POLE:case this.N_POLE:this.akm1=Math.abs(this.phits-Proj4js.common.HALF_PI)>=Proj4js.common.EPSLN?Math.cos(this.phits)/Math.tan(Proj4js.common.FORTPI-0.5*this.phits):2*this.k0}},forward:function(a){var d=a.x,d=Proj4js.common.adjust_lon(d-this.long0),b=a.y,e,f;if(this.sphere){var g,k,l;g=Math.sin(b);k=Math.cos(b);
l=Math.cos(d);d=Math.sin(d);switch(this.mode){case this.EQUIT:f=1+k*l;f<=Proj4js.common.EPSLN&&Proj4js.reportError("stere:forward:Equit");f=this.akm1/f;e=f*k*d;f*=g;break;case this.OBLIQ:f=1+this.sinph0*g+this.cosph0*k*l;f<=Proj4js.common.EPSLN&&Proj4js.reportError("stere:forward:Obliq");f=this.akm1/f;e=f*k*d;f*=this.cosph0*g-this.sinph0*k*l;break;case this.N_POLE:l=-l,b=-b;case this.S_POLE:Math.abs(b-Proj4js.common.HALF_PI)<this.TOL&&Proj4js.reportError("stere:forward:S_POLE"),f=this.akm1*Math.tan(Proj4js.common.FORTPI+
0.5*b),e=d*f,f*=l}}else{l=Math.cos(d);d=Math.sin(d);g=Math.sin(b);var h;if(this.mode==this.OBLIQ||this.mode==this.EQUIT)h=2*Math.atan(this.ssfn_(b,g,this.e)),k=Math.sin(h-Proj4js.common.HALF_PI),h=Math.cos(h);switch(this.mode){case this.OBLIQ:b=this.akm1/(this.cosX1*(1+this.sinX1*k+this.cosX1*h*l));f=b*(this.cosX1*k-this.sinX1*h*l);e=b*h;break;case this.EQUIT:b=2*this.akm1/(1+h*l);f=b*k;e=b*h;break;case this.S_POLE:b=-b,l=-l,g=-g;case this.N_POLE:e=this.akm1*Proj4js.common.tsfnz(this.e,b,g),f=-e*
l}e*=d}a.x=e*this.a+this.x0;a.y=f*this.a+this.y0;return a},inverse:function(a){var d=(a.x-this.x0)/this.a,b=(a.y-this.y0)/this.a,e,f,g,k=e=0,l,h=g=0;if(this.sphere){k=Math.sqrt(d*d+b*b);h=2*Math.atan(k/this.akm1);g=Math.sin(h);h=Math.cos(h);e=0;switch(this.mode){case this.EQUIT:f=Math.abs(k)<=Proj4js.common.EPSLN?0:Math.asin(b*g/k);if(0!=h||0!=d)e=Math.atan2(d*g,h*k);break;case this.OBLIQ:f=Math.abs(k)<=Proj4js.common.EPSLN?this.phi0:Math.asin(h*this.sinph0+b*g*this.cosph0/k);h-=this.sinph0*Math.sin(f);
if(0!=h||0!=d)e=Math.atan2(d*g*this.cosph0,h*k);break;case this.N_POLE:b=-b;case this.S_POLE:f=Math.abs(k)<=Proj4js.common.EPSLN?this.phi0:Math.asin(this.mode==this.S_POLE?-h:h),e=0==d&&0==b?0:Math.atan2(d,b)}a.x=Proj4js.common.adjust_lon(e+this.long0);a.y=f}else{l=Math.sqrt(d*d+b*b);switch(this.mode){case this.OBLIQ:case this.EQUIT:e=2*Math.atan2(l*this.cosX1,this.akm1);g=Math.cos(e);f=Math.sin(e);k=0==l?Math.asin(g*this.sinX1):Math.asin(g*this.sinX1+b*f*this.cosX1/l);e=Math.tan(0.5*(Proj4js.common.HALF_PI+
k));d*=f;b=l*this.cosX1*g-b*this.sinX1*f;h=Proj4js.common.HALF_PI;g=0.5*this.e;break;case this.N_POLE:b=-b;case this.S_POLE:e=-l/this.akm1,k=Proj4js.common.HALF_PI-2*Math.atan(e),h=-Proj4js.common.HALF_PI,g=-0.5*this.e}for(l=this.NITER;l--;k=f)if(f=this.e*Math.sin(k),f=2*Math.atan(e*Math.pow((1+f)/(1-f),g))-h,Math.abs(k-f)<this.CONV)return this.mode==this.S_POLE&&(f=-f),e=0==d&&0==b?0:Math.atan2(d,b),a.x=Proj4js.common.adjust_lon(e+this.long0),a.y=f,a}}};
Proj4js.Proj.nzmg={iterations:1,init:function(){this.A=[];this.A[1]=0.6399175073;this.A[2]=-0.1358797613;this.A[3]=0.063294409;this.A[4]=-0.02526853;this.A[5]=0.0117879;this.A[6]=-0.0055161;this.A[7]=0.0026906;this.A[8]=-0.001333;this.A[9]=6.7E-4;this.A[10]=-3.4E-4;this.B_re=[];this.B_im=[];this.B_re[1]=0.7557853228;this.B_im[1]=0;this.B_re[2]=0.249204646;this.B_im[2]=0.003371507;this.B_re[3]=-0.001541739;this.B_im[3]=0.04105856;this.B_re[4]=-0.10162907;this.B_im[4]=0.01727609;this.B_re[5]=-0.26623489;
this.B_im[5]=-0.36249218;this.B_re[6]=-0.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-0.577245789;this.C_im[2]=-0.007809598;this.C_re[3]=0.508307513;this.C_im[3]=-0.112208952;this.C_re[4]=-0.15094762;this.C_im[4]=0.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=0.5185406398;this.D[3]=-0.03333098;this.D[4]=-0.1052906;this.D[5]=-0.0368594;
this.D[6]=0.007317;this.D[7]=0.0122;this.D[8]=0.00394;this.D[9]=-0.0013},forward:function(a){for(var d=1E-5*((a.y-this.lat0)/Proj4js.common.SEC_TO_RAD),b=a.x-this.long0,e=1,f=0,g=1;10>=g;g++)e*=d,f+=this.A[g]*e;for(var d=f,e=1,k=0,l=0,h=0,g=1;6>=g;g++)f=e*d-k*b,k=k*d+e*b,e=f,l=l+this.B_re[g]*e-this.B_im[g]*k,h=h+this.B_im[g]*e+this.B_re[g]*k;a.x=h*this.a+this.x0;a.y=l*this.a+this.y0;return a},inverse:function(a){for(var d=(a.y-this.y0)/this.a,b=(a.x-this.x0)/this.a,e=1,f=0,g,k=0,l=0,h=1;6>=h;h++)g=
e*d-f*b,f=f*d+e*b,e=g,k=k+this.C_re[h]*e-this.C_im[h]*f,l=l+this.C_im[h]*e+this.C_re[h]*f;for(e=0;e<this.iterations;e++){var s=k,m=l,t;g=d;f=b;for(h=2;6>=h;h++)t=s*k-m*l,m=m*k+s*l,s=t,g+=(h-1)*(this.B_re[h]*s-this.B_im[h]*m),f+=(h-1)*(this.B_im[h]*s+this.B_re[h]*m);for(var s=1,m=0,n=this.B_re[1],q=this.B_im[1],h=2;6>=h;h++)t=s*k-m*l,m=m*k+s*l,s=t,n+=h*(this.B_re[h]*s-this.B_im[h]*m),q+=h*(this.B_im[h]*s+this.B_re[h]*m);l=n*n+q*q;k=(g*n+f*q)/l;l=(f*n-g*q)/l}d=k;b=1;k=0;for(h=1;9>=h;h++)b*=d,k+=this.D[h]*
b;h=this.lat0+1E5*k*Proj4js.common.SEC_TO_RAD;a.x=this.long0+l;a.y=h;return a}};Proj4js.Proj.mill={init:function(){},forward:function(a){var d=a.y,b=this.x0+this.a*Proj4js.common.adjust_lon(a.x-this.long0),d=this.y0+1.25*this.a*Math.log(Math.tan(Proj4js.common.PI/4+d/2.5));a.x=b;a.y=d;return a},inverse:function(a){a.x-=this.x0;a.y-=this.y0;var d=Proj4js.common.adjust_lon(this.long0+a.x/this.a),b=2.5*(Math.atan(Math.exp(0.8*a.y/this.a))-Proj4js.common.PI/4);a.x=d;a.y=b;return a}};
Proj4js.Proj.gnom={init:function(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1E3*this.a;this.rc=1},forward:function(a){var d,b,e,f,g;b=a.y;e=Proj4js.common.adjust_lon(a.x-this.long0);d=Math.sin(b);b=Math.cos(b);f=Math.cos(e);g=this.sin_p14*d+this.cos_p14*b*f;0<g||Math.abs(g)<=Proj4js.common.EPSLN?(e=this.x0+1*this.a*b*Math.sin(e)/g,d=this.y0+1*this.a*(this.cos_p14*d-this.sin_p14*b*f)/g):(Proj4js.reportError("orthoFwdPointError"),e=this.x0+this.infinity_dist*
b*Math.sin(e),d=this.y0+this.infinity_dist*(this.cos_p14*d-this.sin_p14*b*f));a.x=e;a.y=d;return a},inverse:function(a){var d,b,e,f;a.x=(a.x-this.x0)/this.a;a.y=(a.y-this.y0)/this.a;a.x/=this.k0;a.y/=this.k0;(d=Math.sqrt(a.x*a.x+a.y*a.y))?(f=Math.atan2(d,this.rc),b=Math.sin(f),e=Math.cos(f),f=Proj4js.common.asinz(e*this.sin_p14+a.y*b*this.cos_p14/d),d=Math.atan2(a.x*b,d*this.cos_p14*e-a.y*this.sin_p14*b),d=Proj4js.common.adjust_lon(this.long0+d)):(f=this.phic0,d=0);a.x=d;a.y=f;return a}};
Proj4js.Proj.sinu={init:function(){this.sphere?(this.n=1,this.es=this.m=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Proj4js.common.pj_enfn(this.es)},forward:function(a){var d,b;d=a.x;b=a.y;d=Proj4js.common.adjust_lon(d-this.long0);if(this.sphere){if(this.m)for(var e=this.n*Math.sin(b),f=Proj4js.common.MAX_ITER;f;--f){var g=(this.m*b+Math.sin(b)-e)/(this.m+Math.cos(b));b-=g;if(Math.abs(g)<Proj4js.common.EPSLN)break}else b=1!=this.n?Math.asin(this.n*Math.sin(b)):b;
d=this.a*this.C_x*d*(this.m+Math.cos(b));b=b*this.a*this.C_y}else e=Math.sin(b),f=Math.cos(b),b=this.a*Proj4js.common.pj_mlfn(b,e,f,this.en),d=this.a*d*f/Math.sqrt(1-this.es*e*e);a.x=d;a.y=b;return a},inverse:function(a){var d,b;a.x-=this.x0;a.y-=this.y0;if(this.sphere)a.y/=this.C_y,d=this.m?Math.asin((this.m*a.y+Math.sin(a.y))/this.n):1!=this.n?Math.asin(Math.sin(a.y)/this.n):a.y,b=a.x/(this.C_x*(this.m+Math.cos(a.y)));else{d=Proj4js.common.pj_inv_mlfn(a.y/this.a,this.es,this.en);var e=Math.abs(d);
e<Proj4js.common.HALF_PI?(e=Math.sin(d),b=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(d)),b=Proj4js.common.adjust_lon(b)):e-Proj4js.common.EPSLN<Proj4js.common.HALF_PI&&(b=this.long0)}a.x=b;a.y=d;return a}};
Proj4js.Proj.vandg={init:function(){this.R=6370997},forward:function(a){var d=a.y,b=Proj4js.common.adjust_lon(a.x-this.long0);Math.abs(d);var e=Proj4js.common.asinz(2*Math.abs(d/Proj4js.common.PI));(Math.abs(b)<=Proj4js.common.EPSLN||Math.abs(Math.abs(d)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN)&&Math.tan(0.5*e);var f=0.5*Math.abs(Proj4js.common.PI/b-b/Proj4js.common.PI),g=f*f,k=Math.sin(e),e=Math.cos(e),e=e/(k+e-1),k=e*(2/k-1),k=k*k,g=Proj4js.common.PI*this.R*(f*(e-k)+Math.sqrt(g*(e-k)*(e-k)-
(k+g)*(e*e-k)))/(k+g);0>b&&(g=-g);b=this.x0+g;g=Math.abs(g/(Proj4js.common.PI*this.R));d=0<=d?this.y0+Proj4js.common.PI*this.R*Math.sqrt(1-g*g-2*f*g):this.y0-Proj4js.common.PI*this.R*Math.sqrt(1-g*g-2*f*g);a.x=b;a.y=d;return a},inverse:function(a){var d,b,e,f,g,k,l,h;a.x-=this.x0;a.y-=this.y0;h=Proj4js.common.PI*this.R;d=a.x/h;e=a.y/h;f=d*d+e*e;g=-Math.abs(e)*(1+f);b=g-2*e*e+d*d;k=-2*g+1+2*e*e+f*f;h=e*e/k+(2*b*b*b/k/k/k-9*g*b/k/k)/27;l=(g-b*b/3/k)/k;g=2*Math.sqrt(-l/3);h=3*h/l/g;1<Math.abs(h)&&(h=
0<=h?1:-1);h=Math.acos(h)/3;b=0<=a.y?(-g*Math.cos(h+Proj4js.common.PI/3)-b/3/k)*Proj4js.common.PI:-(-g*Math.cos(h+Proj4js.common.PI/3)-b/3/k)*Proj4js.common.PI;Math.abs(d);d=Proj4js.common.adjust_lon(this.long0+Proj4js.common.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d);a.x=d;a.y=b;return a}};
Proj4js.Proj.cea={init:function(){},forward:function(a){var d=a.y,b=this.x0+this.a*Proj4js.common.adjust_lon(a.x-this.long0)*Math.cos(this.lat_ts),d=this.y0+this.a*Math.sin(d)/Math.cos(this.lat_ts);a.x=b;a.y=d;return a},inverse:function(a){a.x-=this.x0;a.y-=this.y0;var d=Proj4js.common.adjust_lon(this.long0+a.x/this.a/Math.cos(this.lat_ts)),b=Math.asin(a.y/this.a*Math.cos(this.lat_ts));a.x=d;a.y=b;return a}};
Proj4js.Proj.eqc={init:function(){this.x0||(this.x0=0);this.y0||(this.y0=0);this.lat0||(this.lat0=0);this.long0||(this.long0=0);this.lat_ts||(this.lat_ts=0);this.title||(this.title="Equidistant Cylindrical (Plate Carre)");this.rc=Math.cos(this.lat_ts)},forward:function(a){var d=a.y,b=Proj4js.common.adjust_lon(a.x-this.long0),d=Proj4js.common.adjust_lat(d-this.lat0);a.x=this.x0+this.a*b*this.rc;a.y=this.y0+this.a*d;return a},inverse:function(a){var d=a.y;a.x=Proj4js.common.adjust_lon(this.long0+(a.x-
this.x0)/(this.a*this.rc));a.y=Proj4js.common.adjust_lat(this.lat0+(d-this.y0)/this.a);return a}};
Proj4js.Proj.cass={init:function(){this.sphere||(this.en=Proj4js.common.pj_enfn(this.es),this.m0=Proj4js.common.pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},C1:0.16666666666666666,C2:0.008333333333333333,C3:0.041666666666666664,C4:0.3333333333333333,C5:0.06666666666666667,forward:function(a){var d,b,e=a.x,f=a.y,e=Proj4js.common.adjust_lon(e-this.long0);this.sphere?(d=Math.asin(Math.cos(f)*Math.sin(e)),b=Math.atan2(Math.tan(f),Math.cos(e))-this.phi0):(this.n=Math.sin(f),this.c=
Math.cos(f),b=Proj4js.common.pj_mlfn(f,this.n,this.c,this.en),this.n=1/Math.sqrt(1-this.es*this.n*this.n),this.tn=Math.tan(f),this.t=this.tn*this.tn,this.a1=e*this.c,this.c*=this.es*this.c/(1-this.es),this.a2=this.a1*this.a1,d=this.n*this.a1*(1-this.a2*this.t*(this.C1-(8-this.t+8*this.c)*this.a2*this.C2)),b-=this.m0-this.n*this.tn*this.a2*(0.5+(5-this.t+6*this.c)*this.a2*this.C3));a.x=this.a*d+this.x0;a.y=this.a*b+this.y0;return a},inverse:function(a){a.x-=this.x0;a.y-=this.y0;var d=a.x/this.a,b=
a.y/this.a;if(this.sphere)this.dd=b+this.lat0,b=Math.asin(Math.sin(this.dd)*Math.cos(d)),d=Math.atan2(Math.tan(d),Math.cos(this.dd));else{var e=Proj4js.common.pj_inv_mlfn(this.m0+b,this.es,this.en);this.tn=Math.tan(e);this.t=this.tn*this.tn;this.n=Math.sin(e);this.r=1/(1-this.es*this.n*this.n);this.n=Math.sqrt(this.r);this.r=this.r*(1-this.es)*this.n;this.dd=d/this.n;this.d2=this.dd*this.dd;b=e-this.n*this.tn/this.r*this.d2*(0.5-(1+3*this.t)*this.d2*this.C3);d=this.dd*(1+this.t*this.d2*(-this.C4+
(1+3*this.t)*this.d2*this.C5))/Math.cos(e)}a.x=Proj4js.common.adjust_lon(this.long0+d);a.y=b;return a}};
Proj4js.Proj.gauss={init:function(){var a=Math.sin(this.lat0),d=Math.cos(this.lat0),d=d*d;this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a);this.C=Math.sqrt(1+this.es*d*d/(1-this.es));this.phic0=Math.asin(a/this.C);this.ratexp=0.5*this.C*this.e;this.K=Math.tan(0.5*this.phic0+Proj4js.common.FORTPI)/(Math.pow(Math.tan(0.5*this.lat0+Proj4js.common.FORTPI),this.C)*Proj4js.common.srat(this.e*a,this.ratexp))},forward:function(a){var d=a.x,b=a.y;a.y=2*Math.atan(this.K*Math.pow(Math.tan(0.5*b+Proj4js.common.FORTPI),
this.C)*Proj4js.common.srat(this.e*Math.sin(b),this.ratexp))-Proj4js.common.HALF_PI;a.x=this.C*d;return a},inverse:function(a){for(var d=a.x/this.C,b=a.y,e=Math.pow(Math.tan(0.5*b+Proj4js.common.FORTPI)/this.K,1/this.C),f=Proj4js.common.MAX_ITER;0<f;--f){b=2*Math.atan(e*Proj4js.common.srat(this.e*Math.sin(a.y),-0.5*this.e))-Proj4js.common.HALF_PI;if(1E-14>Math.abs(b-a.y))break;a.y=b}if(!f)return Proj4js.reportError("gauss:inverse:convergence failed"),null;a.x=d;a.y=b;return a}};
Proj4js.Proj.omerc={init:function(){this.mode||(this.mode=0);this.lon1||(this.lon1=0,this.mode=1);this.lon2||(this.lon2=0);this.lat2||(this.lat2=0);var a=1-Math.pow(this.b/this.a,2);Math.sqrt(a);this.sin_p20=Math.sin(this.lat0);this.cos_p20=Math.cos(this.lat0);this.con=1-this.es*this.sin_p20*this.sin_p20;this.com=Math.sqrt(1-a);this.bl=Math.sqrt(1+this.es*Math.pow(this.cos_p20,4)/(1-a));this.al=this.a*this.bl*this.k0*this.com/this.con;Math.abs(this.lat0)<Proj4js.common.EPSLN?this.el=this.d=this.ts=
1:(this.ts=Proj4js.common.tsfnz(this.e,this.lat0,this.sin_p20),this.con=Math.sqrt(this.con),this.d=this.bl*this.com/(this.cos_p20*this.con),this.f=0<this.d*this.d-1?0<=this.lat0?this.d+Math.sqrt(this.d*this.d-1):this.d-Math.sqrt(this.d*this.d-1):this.d,this.el=this.f*Math.pow(this.ts,this.bl));0!=this.mode?(this.g=0.5*(this.f-1/this.f),this.gama=Proj4js.common.asinz(Math.sin(this.alpha)/this.d),this.longc-=Proj4js.common.asinz(this.g*Math.tan(this.gama))/this.bl,this.con=Math.abs(this.lat0),this.con>
Proj4js.common.EPSLN&&Math.abs(this.con-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(this.singam=Math.sin(this.gama),this.cosgam=Math.cos(this.gama),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.u=0<=this.lat0?this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):-(this.al/this.bl)*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz)):Proj4js.reportError("omerc:Init:DataError")):(this.sinphi=Math.sin(this.at1),this.ts1=Proj4js.common.tsfnz(this.e,this.lat1,this.sinphi),
this.sinphi=Math.sin(this.lat2),this.ts2=Proj4js.common.tsfnz(this.e,this.lat2,this.sinphi),this.h=Math.pow(this.ts1,this.bl),this.l=Math.pow(this.ts2,this.bl),this.f=this.el/this.h,this.g=0.5*(this.f-1/this.f),this.j=(this.el*this.el-this.l*this.h)/(this.el*this.el+this.l*this.h),this.p=(this.l-this.h)/(this.l+this.h),this.dlon=this.lon1-this.lon2,this.dlon<-Proj4js.common.PI&&(this.lon2-=2*Proj4js.common.PI),this.dlon>Proj4js.common.PI&&(this.lon2+=2*Proj4js.common.PI),this.dlon=this.lon1-this.lon2,
this.longc=0.5*(this.lon1+this.lon2)-Math.atan(this.j*Math.tan(0.5*this.bl*this.dlon)/this.p)/this.bl,this.dlon=Proj4js.common.adjust_lon(this.lon1-this.longc),this.gama=Math.atan(Math.sin(this.bl*this.dlon)/this.g),this.alpha=Proj4js.common.asinz(this.d*Math.sin(this.gama)),Math.abs(this.lat1-this.lat2)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):this.con=Math.abs(this.lat1),this.con<=Proj4js.common.EPSLN||Math.abs(this.con-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN?Proj4js.reportError("omercInitDataError"):
Math.abs(Math.abs(this.lat0)-Proj4js.common.HALF_PI)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercInitDataError"),this.singam=Math.sin(this.gam),this.cosgam=Math.cos(this.gam),this.sinaz=Math.sin(this.alpha),this.cosaz=Math.cos(this.alpha),this.u=0<=this.lat0?this.al/this.bl*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz):-(this.al/this.bl)*Math.atan(Math.sqrt(this.d*this.d-1)/this.cosaz))},forward:function(a){var d,b,e,f,g;e=a.x;b=a.y;d=Math.sin(b);f=Proj4js.common.adjust_lon(e-this.longc);
e=Math.sin(this.bl*f);Math.abs(Math.abs(b)-Proj4js.common.HALF_PI)>Proj4js.common.EPSLN?(d=Proj4js.common.tsfnz(this.e,b,d),d=this.el/Math.pow(d,this.bl),g=0.5*(d-1/d),d=(g*this.singam-e*this.cosgam)/(0.5*(d+1/d)),b=Math.cos(this.bl*f),1E-7>Math.abs(b)?e=this.al*this.bl*f:(e=this.al*Math.atan((g*this.cosgam+e*this.singam)/b)/this.bl,0>b&&(e+=Proj4js.common.PI*this.al/this.bl))):(d=0<=b?this.singam:-this.singam,e=this.al*b/this.bl);Math.abs(Math.abs(d)-1)<=Proj4js.common.EPSLN&&Proj4js.reportError("omercFwdInfinity");
f=0.5*this.al*Math.log((1-d)/(1+d))/this.bl;e-=this.u;d=this.y0+e*this.cosaz-f*this.sinaz;a.x=this.x0+f*this.cosaz+e*this.sinaz;a.y=d;return a},inverse:function(a){var d,b,e,f;a.x-=this.x0;a.y-=this.y0;d=a.x*this.cosaz-a.y*this.sinaz;e=a.y*this.cosaz+a.x*this.sinaz;e+=this.u;b=Math.exp(-this.bl*d/this.al);d=0.5*(b-1/b);b=0.5*(b+1/b);e=Math.sin(this.bl*e/this.al);f=(e*this.cosgam+d*this.singam)/b;Math.abs(Math.abs(f)-1)<=Proj4js.common.EPSLN?(d=this.longc,f=0<=f?Proj4js.common.HALF_PI:-Proj4js.common.HALF_PI):
(b=1/this.bl,f=Math.pow(this.el/Math.sqrt((1+f)/(1-f)),b),f=Proj4js.common.phi2z(this.e,f),d=this.longc-Math.atan2(d*this.cosgam-e*this.singam,b)/this.bl,d=Proj4js.common.adjust_lon(d));a.x=d;a.y=f;return a}};
Proj4js.Proj.lcc={init:function(){this.lat2||(this.lat2=this.lat0);this.k0||(this.k0=1);if(Math.abs(this.lat1+this.lat2)<Proj4js.common.EPSLN)Proj4js.reportError("lcc:init: Equal Latitudes");else{var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var a=Math.sin(this.lat1),d=Math.cos(this.lat1),d=Proj4js.common.msfnz(this.e,a,d),b=Proj4js.common.tsfnz(this.e,this.lat1,a),e=Math.sin(this.lat2),f=Math.cos(this.lat2),f=Proj4js.common.msfnz(this.e,e,f),e=Proj4js.common.tsfnz(this.e,this.lat2,e),g=Proj4js.common.tsfnz(this.e,
this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Proj4js.common.EPSLN?Math.log(d/f)/Math.log(b/e):a;this.f0=d/(this.ns*Math.pow(b,this.ns));this.rh=this.a*this.f0*Math.pow(g,this.ns);this.title||(this.title="Lambert Conformal Conic")}},forward:function(a){var d=a.x,b=a.y;if(!(90>=b&&-90<=b&&180>=d&&-180<=d))return Proj4js.reportError("lcc:forward: llInputOutOfRange: "+d+" : "+b),null;var e=Math.abs(Math.abs(b)-Proj4js.common.HALF_PI);if(e>Proj4js.common.EPSLN)b=Proj4js.common.tsfnz(this.e,
b,Math.sin(b)),b=this.a*this.f0*Math.pow(b,this.ns);else{e=b*this.ns;if(0>=e)return Proj4js.reportError("lcc:forward: No Projection"),null;b=0}d=this.ns*Proj4js.common.adjust_lon(d-this.long0);a.x=this.k0*b*Math.sin(d)+this.x0;a.y=this.k0*(this.rh-b*Math.cos(d))+this.y0;return a},inverse:function(a){var d,b,e,f=(a.x-this.x0)/this.k0,g=this.rh-(a.y-this.y0)/this.k0;0<this.ns?(d=Math.sqrt(f*f+g*g),b=1):(d=-Math.sqrt(f*f+g*g),b=-1);e=0;0!=d&&(e=Math.atan2(b*f,b*g));if(0!=d||0<this.ns){if(b=1/this.ns,
d=Math.pow(d/(this.a*this.f0),b),d=Proj4js.common.phi2z(this.e,d),-9999==d)return null}else d=-Proj4js.common.HALF_PI;e=Proj4js.common.adjust_lon(e/this.ns+this.long0);a.x=e;a.y=d;return a}};
Proj4js.Proj.laea={S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4,init:function(){var a=Math.abs(this.lat0);this.mode=Math.abs(a-Proj4js.common.HALF_PI)<Proj4js.common.EPSLN?0>this.lat0?this.S_POLE:this.N_POLE:Math.abs(a)<Proj4js.common.EPSLN?this.EQUIT:this.OBLIQ;if(0<this.es)switch(this.qp=Proj4js.common.qsfnz(this.e,1),this.mmf=0.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(0.5*this.qp);this.dd=1/this.rq;this.xmf=
1;this.ymf=0.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(0.5*this.qp),a=Math.sin(this.lat0),this.sinb1=Proj4js.common.qsfnz(this.e,a)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*a*a)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode==this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(a){var d,b,e=a.x,f=a.y,e=Proj4js.common.adjust_lon(e-this.long0);if(this.sphere){var g,
k,l;l=Math.sin(f);k=Math.cos(f);g=Math.cos(e);switch(this.mode){case this.OBLIQ:case this.EQUIT:b=this.mode==this.EQUIT?1+k*g:1+this.sinph0*l+this.cosph0*k*g;if(b<=Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:y less than eps"),null;b=Math.sqrt(2/b);d=b*k*Math.sin(e);b*=this.mode==this.EQUIT?l:this.cosph0*l-this.sinph0*k*g;break;case this.N_POLE:g=-g;case this.S_POLE:if(Math.abs(f+this.phi0)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:phi < eps"),null;b=Proj4js.common.FORTPI-
0.5*f;b=2*(this.mode==this.S_POLE?Math.cos(b):Math.sin(b));d=b*Math.sin(e);b*=g}}else{var h=k=0,s=0;g=Math.cos(e);e=Math.sin(e);l=Math.sin(f);l=Proj4js.common.qsfnz(this.e,l);if(this.mode==this.OBLIQ||this.mode==this.EQUIT)k=l/this.qp,h=Math.sqrt(1-k*k);switch(this.mode){case this.OBLIQ:s=1+this.sinb1*k+this.cosb1*h*g;break;case this.EQUIT:s=1+h*g;break;case this.N_POLE:s=Proj4js.common.HALF_PI+f;l=this.qp-l;break;case this.S_POLE:s=f-Proj4js.common.HALF_PI,l=this.qp+l}if(Math.abs(s)<Proj4js.common.EPSLN)return Proj4js.reportError("laea:fwd:b < eps"),
null;switch(this.mode){case this.OBLIQ:case this.EQUIT:s=Math.sqrt(2/s);b=this.mode==this.OBLIQ?this.ymf*s*(this.cosb1*k-this.sinb1*h*g):(s=Math.sqrt(2/(1+h*g)))*k*this.ymf;d=this.xmf*s*h*e;break;case this.N_POLE:case this.S_POLE:0<=l?(d=(s=Math.sqrt(l))*e,b=g*(this.mode==this.S_POLE?s:-s)):d=b=0}}a.x=this.a*d+this.x0;a.y=this.a*b+this.y0;return a},inverse:function(a){a.x-=this.x0;a.y-=this.y0;var d=a.x/this.a,b=a.y/this.a,e;if(this.sphere){var f=0,g,k=0;g=Math.sqrt(d*d+b*b);e=0.5*g;if(1<e)return Proj4js.reportError("laea:Inv:DataError"),
null;e=2*Math.asin(e);if(this.mode==this.OBLIQ||this.mode==this.EQUIT)k=Math.sin(e),f=Math.cos(e);switch(this.mode){case this.EQUIT:e=Math.abs(g)<=Proj4js.common.EPSLN?0:Math.asin(b*k/g);d*=k;b=f*g;break;case this.OBLIQ:e=Math.abs(g)<=Proj4js.common.EPSLN?this.phi0:Math.asin(f*this.sinph0+b*k*this.cosph0/g);d=d*k*this.cosph0;b=(f-Math.sin(e)*this.sinph0)*g;break;case this.N_POLE:b=-b;e=Proj4js.common.HALF_PI-e;break;case this.S_POLE:e-=Proj4js.common.HALF_PI}d=0!=b||this.mode!=this.EQUIT&&this.mode!=
this.OBLIQ?Math.atan2(d,b):0}else{e=0;switch(this.mode){case this.EQUIT:case this.OBLIQ:d/=this.dd;b*=this.dd;k=Math.sqrt(d*d+b*b);if(k<Proj4js.common.EPSLN)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(0.5*k/this.rq);f=Math.cos(g);d*=g=Math.sin(g);this.mode==this.OBLIQ?(e=f*this.sinb1+b*g*this.cosb1/k,b=k*this.cosb1*f-b*this.sinb1*g):(e=b*g/k,b=k*f);break;case this.N_POLE:b=-b;case this.S_POLE:e=d*d+b*b;if(!e)return a.x=0,a.y=this.phi0,a;e=1-e/this.qp;this.mode==this.S_POLE&&(e=-e)}d=Math.atan2(d,b);
e=this.authlat(Math.asin(e),this.apa)}a.x=Proj4js.common.adjust_lon(this.long0+d);a.y=e;return a},P00:0.3333333333333333,P01:0.17222222222222222,P02:0.10257936507936508,P10:0.06388888888888888,P11:0.0664021164021164,P20:0.016415012942191543,authset:function(a){var d,b=[];b[0]=a*this.P00;d=a*a;b[0]+=d*this.P01;b[1]=d*this.P10;d*=a;b[0]+=d*this.P02;b[1]+=d*this.P11;b[2]=d*this.P20;return b},authlat:function(a,d){var b=a+a;return a+d[0]*Math.sin(b)+d[1]*Math.sin(b+b)+d[2]*Math.sin(b+b+b)}};
Proj4js.Proj.aeqd={init:function(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)},forward:function(a){var d=a.x,b,e=Math.sin(a.y),f=Math.cos(a.y),d=Proj4js.common.adjust_lon(d-this.long0),g=Math.cos(d),k=this.sin_p12*e+this.cos_p12*f*g;if(Math.abs(Math.abs(k)-1)<Proj4js.common.EPSLN){if(b=1,0>k){Proj4js.reportError("aeqd:Fwd:PointError");return}}else b=Math.acos(k),b/=Math.sin(b);a.x=this.x0+this.a*b*f*Math.sin(d);a.y=this.y0+this.a*b*(this.cos_p12*e-this.sin_p12*f*g);return a},
inverse:function(a){a.x-=this.x0;a.y-=this.y0;var d=Math.sqrt(a.x*a.x+a.y*a.y);if(d>2*Proj4js.common.HALF_PI*this.a)Proj4js.reportError("aeqdInvDataError");else{var b=d/this.a,e=Math.sin(b),b=Math.cos(b),f=this.long0,g;if(Math.abs(d)<=Proj4js.common.EPSLN)g=this.lat0;else{g=Proj4js.common.asinz(b*this.sin_p12+a.y*e*this.cos_p12/d);var k=Math.abs(this.lat0)-Proj4js.common.HALF_PI;Math.abs(k)<=Proj4js.common.EPSLN?f=0<=this.lat0?Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x,-a.y)):Proj4js.common.adjust_lon(this.long0-
Math.atan2(-a.x,a.y)):(k=b-this.sin_p12*Math.sin(g),Math.abs(k)<Proj4js.common.EPSLN&&Math.abs(a.x)<Proj4js.common.EPSLN||(Math.atan2(a.x*e*this.cos_p12,k*d),f=Proj4js.common.adjust_lon(this.long0+Math.atan2(a.x*e*this.cos_p12,k*d))))}a.x=f;a.y=g;return a}}};
Proj4js.Proj.moll={init:function(){},forward:function(a){for(var d=a.y,b=Proj4js.common.adjust_lon(a.x-this.long0),e=d,f=Proj4js.common.PI*Math.sin(d),g=0;;g++){var k=-(e+Math.sin(e)-f)/(1+Math.cos(e)),e=e+k;if(Math.abs(k)<Proj4js.common.EPSLN)break;50<=g&&Proj4js.reportError("moll:Fwd:IterationError")}e/=2;Proj4js.common.PI/2-Math.abs(d)<Proj4js.common.EPSLN&&(b=0);d=0.900316316158*this.a*b*Math.cos(e)+this.x0;e=1.4142135623731*this.a*Math.sin(e)+this.y0;a.x=d;a.y=e;return a},inverse:function(a){var d;
a.x-=this.x0;d=a.y/(1.4142135623731*this.a);0.999999999999<Math.abs(d)&&(d=0.999999999999);d=Math.asin(d);var b=Proj4js.common.adjust_lon(this.long0+a.x/(0.900316316158*this.a*Math.cos(d)));b<-Proj4js.common.PI&&(b=-Proj4js.common.PI);b>Proj4js.common.PI&&(b=Proj4js.common.PI);d=(2*d+Math.sin(2*d))/Proj4js.common.PI;1<Math.abs(d)&&(d=1);d=Math.asin(d);a.x=b;a.y=d;return a}};function WMTSLayer(a,d,b,e){function f(a){a=a.Contents.TileMatrixSet;if("undefined"!=typeof a.length)for(var d=0;d<a.length;d++){var e=a[d]["ows:Identifier"];if(e&&e==b.matrixSet){x=a[d];break}x=a[0]}else x=a;return x}var g=e.left,k=e.top,l=e.right,h=e.bottom,s="auto",m=[],t=document.createElement("div"),n,q=!1,w=this,z=0,A=0,C=0,F=0,B=1;e.opacity&&(B=e.opacity);var u=0,x=null;t.style.position="absolute";t.style.left="0px";t.style.top="0px";t.style.width="100%";t.style.height="100%";document.createElement("img");
var D;this.getMatrixSetId=function(){return x["ows:Identifier"]};this.getThemeTile=function(){};this.setTileOpacity=function(a){if("number"==typeof a)for(B=a,a=0;a<m.length;a++)for(var b=0;b<m[a].length;b++)null!=m[a][b]&&(m[a][b].style.opacity=B,m[a][b].style.filter="alpha(opacity="+100*B+")")};this.setZIndex=function(a){s=a;t&&(t.style.zIndex=s)};this.getZIndex=function(){return s};this.RemoveSelf=function(){n.getHObject().removeChild(t)};this.getTiles=function(d,e,g,h,k,l){TGOS.getJSON(a,function(u){var m=
u.Capabilities,n=u=0,q=[],t=[];if(!m)throw"Service Error";var m=f(m),s=m.TileMatrix[k].TopLeftCorner,x=parseFloat(s.split(" ")[0]),w=parseFloat(s.split(" ")[1]),s=parseFloat(m.TileMatrix[k].ScaleDenominator),D=0.07168*s,B,x=d<x?0:Math.floor((d-x)/D);B=x+Math.ceil(Math.abs(d-g)/D);w=e>w?0:Math.floor((w-e)/D)-1;D=w+Math.ceil(Math.abs(h-e)/D);idxRange={lowerX:x,upperX:B,lowerY:w,upperY:D};for(D=idxRange.lowerY;D<idxRange.upperY;D++)for(x=idxRange.lowerX;x<idxRange.upperX;x++)u+=x*s,n+=D*s,t.push(u+","+
n),q.push(a+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&Layer="+b.layer+"&Style=default&Format=image/png&TileMatrixSet="+b.matrixSet+"&TileMatrix="+m.TileMatrix[k]["ows:Identifier"]+"&TileRow="+D+"&TileCol="+x);l.call(this,{leftTopAnchor:t,imageUrl:q})},TGOS.PROXY_SERVICE2)};this.Initialize=function(b){n=b;t.style.zIndex=this.getZIndex();n.getHObject().appendChild(t);TGOS.getJSON(a,function(a){D=a.Capabilities;if(!D)throw"Service Error";f(D);e&&(g=e.left,l=e.right,k=e.top,h=e.bottom);q=!0;w.RebuildElement()},
TGOS.PROXY_SERVICE2)};this.UpdateElement=function(){if(q&&x)for(var a=x.TileMatrix[u].TopLeftCorner,b=parseFloat(a.split(" ")[0]),a=parseFloat(a.split(" ")[1]),b=n.FromMapPoint(b,a),a=0;a<m.length;a++)for(var d=0;d<m[a].length;d++){var e=256*m[a][d].yIdx;m[a][d].style.left=b.x+256*m[a][d].xIdx+"px";m[a][d].style.top=b.y+e+"px"}};this.putVisible=function(a){t.style.display=a?"inline":"none"};this.RebuildElement=function(){if(q&&x){for(var d=n.ToMapDistX(256),e=0,f=Infinity,s=0;s<x.TileMatrix.length;s++){var w=
0.07168*parseFloat(x.TileMatrix[s].ScaleDenominator),w=Math.abs(w-d);w<f&&(f=w,e=s)}if(!(f>d/2)){var f=x.TileMatrix[e].TopLeftCorner,w=parseFloat(f.split(" ")[0]),s=parseFloat(f.split(" ")[1]),f=n.FromMapPoint(w,s),D=n.ToMapPoint(0,0),O=n.ToMapPoint(n.getClientWidth(),n.getClientHeight()),L,Q,P,H,I;L=D.x<w?0:Math.floor((g-w)/d);Q=L+Math.ceil(Math.abs(g-l)/d);P=D.y>s?0:Math.floor((s-k)/d);H=P+Math.ceil(Math.abs(h-k)/d);I=D.x<w?0:Math.floor((D.x-w)/d);w=I+Math.ceil(Math.abs(D.x-O.x)/d);s=D.y>s?0:Math.floor((s-
D.y)/d);D=s+Math.ceil(Math.abs(O.y-D.y)/d);d=Math.max(I,L);Q=Math.min(w,Q);s=Math.max(s,P);H=Math.min(D,H);if(z!=d||A!=Q||C!=s||F!=H||e!=u){z=d;A=Q;C=s;F=H;u=e;parseFloat(x.TileMatrix[e].MatrixWidth);parseFloat(x.TileMatrix[e].MatrixHeight);var G;P=[];D=L=0;for(O=s;O<=H;O++){P.push([]);for(I=d;I<=Q;I++)w=f.x+256*I,s=f.y+256*O,G=document.createElement("img"),G.style.display="none",G.onload=function(){var a=this,b=0;a.style.opacity=b;var d=B/7,e=setInterval(function(){b>=B?(G.style.filter="alpha(opacity="+
100*B+")",a.style.opacity=B,clearInterval(e)):(a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")",b+=d)},33);a.style.filter="alpha(opacity=0)";this.style.display="block"},G.xIdx=I,G.yIdx=O,G.style.position="absolute",G.style.left=w+"px",G.style.top=s+"px",G.galleryImg=!1,G.hideFocus=!0,G.style.MozUserSelect="none",G.border="0px",P[D].push(G),G.src=a+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&Layer="+b.layer+"&Style=default&Format=image/png&TileMatrixSet="+b.matrixSet+"&TileMatrix="+x.TileMatrix[e]["ows:Identifier"]+
"&TileRow="+O+"&TileCol="+I,t.appendChild(G),G.style.opacity=B,G.style.filter="alpha(opacity="+100*B+")",L++;D++}if(0<m.length){for(O=0;O<m.length;O++){for(I=0;I<m[O].length;I++)t.removeChild(m[O][I]);m[O][I]=null}m=[]}m=P}}}}};TGOS.TGWmsLayer=function(a,d,b){var e=this,f,g,k,l,h=null,s=!0,m="auto",t,n=1,q=[];b=a;if(-1<b.indexOf("?")){var w=b.indexOf("?");a=b.substring(0,w);w=b.substr(w+1,b.length-w);b=a;b=w.split("&");for(w=0;w<b.length;w++)0!=b[w].toUpperCase().indexOf("BBOX")&&0!=b[w].toUpperCase().indexOf("WIDTH")&&0!=b[w].toUpperCase().indexOf("HEIGHT")&&q.push(b[w])}var z=new MercatorProjection(0,0,0,1),A=new HorizontalDatum(6378137,0);this.getDefaultViewport=function(){};this.getUrl=function(){return g};this.removeWmsLayer=
function(){h.removeLayer(this)};this.getZIndex=function(){return m};this.setZIndex=function(a){m=a;f&&(f.style.zIndex=m)};this.getWmsVisible=function(){return this.getVisible()};this.getVisible=function(){return s};this.setWmsVisible=function(a){this.setVisible(a)};this.setVisible=function(a){s=a;f&&(f.style.display=s?"block":"none")};this.putVisible=function(a){this.setVisible(a)};this.setOpacity=function(a){if(f){var b=parseInt(100*a);f.style.filter="alpha(opacity="+b+")";f.style.opacity=a}n=a};
this.getOpacity=function(){return n};this.UpdateElement=function(){var a=l.getScale(),b=t/a,d=f,e;if(h){e=l.getClientWidth();var m=l.getClientHeight(),n=l.ToMapPoint(0,0),s=l.ToMapPoint(e,m);h&&(l.ToMapPoint(0,0),l.ToMapPoint(l.getClientWidth(),l.getClientHeight()));var w=n.x,C=n.y,J=s.x,U=s.y;switch(h.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:C=z.Inverse(A,new CPoint3(n.x,n.y,0));s=z.Inverse(A,new CPoint3(s.x,s.y,0));w=C.X;C=C.Y;J=s.X;U=s.Y;break;default:w=n.x,C=n.y,J=s.x,U=s.y}e=g+"?BBOX="+w+
","+U+","+J+","+C+"&WIDTH="+e+"&HEIGHT="+m;e+="&"+q.join("&")}else e=void 0;d.src=e;f.width/=b;f.height/=b;k&&(b=l.FromMapPoint(k.x,k.y),f.style.left=b.x+"px",f.style.top=b.y+"px");t=a};var C=function(){k=l.ToMapPoint(0,0);f.style.left="0px";f.style.top="0px";f.width=l.getClientWidth();f.height=l.getClientHeight();f.style.display=e.getVisible()?"block":"none"};this.RebuildElement=function(){};(function(){h=d.map;s=!1==d.wmsVisible?!1:!0;m=d.zIndex;f=document.createElement("img");f.style.position=
"absolute";f.style.opacity=n;var b=parseInt(100*n);f.style.filter="alpha(opacity="+b+")";l=d.map.getMapBase();g=0<a.indexOf("?")?a.slice(0,a.indexOf("?")):a;l.getHObject().appendChild(f);h.addLayer(e,!0);f.onload=C})()};
TGOS.WMSLayer=function(a,d,b,e,f,g,k){function l(a){var b=null,e="",f="",g=0;a&&(e=GetXMLNodeAttribute(a,"Name"),g=parseInt(GetXMLNodeAttribute(a,"FeatureType")),f=GetXMLNodeAttribute(a,"SRName"));var h=e;if(a=FindXMLNodes(GetXMLChildNode(a,"Fields"),"Field"))for(var b=[],k=0;k<a.length;k++)b.push(GetXMLNodeAttribute(a.item(k),"Name"));this.getName=function(){return e};this.putName=function(a){e=a};this.getTitle=function(){return h};this.putTitle=function(a){h=a};this.getFields=function(){return b};
this.getFeatureType=function(){return g};this.getSRName=function(){return f};this.ExecuteQuery=function(a,b,e,f){window.open(d+"/Query?V="+P+"&S="+H.valueOf()+"&Layer="+escape(this.getName())+(b?"&GEOM=":"&EXPR=")+escape(a));pAgent=new AjaxAgent(d+"/Query",!0,!0);pAgent.SendRequest("V="+P+"&S="+H.valueOf()+"&Layer="+escape(this.getName())+(b?"&GEOM=":"&EXPR=")+escape(a),e,null,f)};this.ExecuteUpdate=function(a,b,e,f,g){window.open(d+"/Update?V="+P+"&S="+H.valueOf()+"&Layer="+escape(this.getName())+
"&ID="+a+"&GEOM="+b+"&Values="+e);pAgent=new AjaxAgent(d+"/Update",!1,!0);pAgent.SendRequest("V="+P+"&S="+H.valueOf()+"&Layer="+escape(this.getName())+"&ID="+a+"&GEOM="+b+"&Values="+e,f,null,g);Reget()};this.ExecuteDelete=function(a,b,e){pAgent=new AjaxAgent(d+"/Delete",!1,!0);pAgent.SendRequest("V="+P+"&S="+H.valueOf()+"&Layer="+escape(this.getName())+"&ID="+a,b,null,e);Reget()}}var h=new MercatorProjection(0,0,0,1),s=new HorizontalDatum(6378137,0),m=this,t=null,n=a,q=a,w=g.left,z=g.top,A=g.right,
C=g.bottom,F=!0,B=b,u=null==f?TGOS.WMSLayer.enumCoordinate.TWD97:f,x=null==e?TGOS.WMSLayer.enumCoordinate.TWD97:e,D="auto",v=[];if(-1<B.indexOf("?"))for(b=B.indexOf("?"),a=B.substring(0,b),b=B.substr(b+1,B.length-b),B=a,a=b.split("&"),b=0;b<a.length;b++)0!=a[b].toUpperCase().indexOf("BBOX")&&0!=a[b].toUpperCase().indexOf("WIDTH")&&0!=a[b].toUpperCase().indexOf("HEIGHT")&&v.push(a[b]);var y=0,E=0,N=0,J=0,U=0,O=0,L=0,Q=0,P=0,H=new Date,I=null,G=[],M=null,W=100;this.setZIndex=function(a){D=a;I&&(I.style.zIndex=
D)};this.getZIndex=function(){return D};this.getName=function(){return n};this.putName=function(a){n=a};this.getTitle=function(){return q};this.putTitle=function(a){q=a};this.getVisible=function(){return F};this.putVisible=function(a){F=a;I&&(I.style.visibility=a?"":"hidden")};this.putTransparent=function(a){W=a;this.SetTransparent(a)};this.putShpPath=function(a){m_shpPath=a};this.putLabelName=function(a){};this.getLeft=function(){return w};this.getTop=function(){return z};this.getRight=function(){return A};
this.getBottom=function(){return C};this.getLayers=function(){return G};this.getThematicLayer=function(){return M};this.Initialize=function(a){t=a;a=t.getHObject();I=a.ownerDocument.createElement("img");a.appendChild(I);I.galleryImg=!1;I.hideFocus=!0;I.style.MozUserSelect="none";I.border="0px";I.style.position="absolute";I.style.width="100%";I.style.height="100%";I.style.zIndex=D;I.style.visibility=F?"":"hidden";I.onmousedown=function(){return!1};I.galleryImg=!1;this.SetTransparent(W)};this.RemoveSelf=
function(){null!=I&&(null!=t&&t.getHObject().removeChild(I),I=null)};this.SetTransparent=function(a){if(I){var b=parseFloat(a,10)/100;I.style.filter="alpha(opacity="+a+")";I.style.opacity=b}};this.UpdateElement=function(){var a,b;"97"!=k?(a=h.Forward(s,new CPoint3(parseFloat(y),parseFloat(E),0)),b=h.Forward(s,new CPoint3(parseFloat(N),parseFloat(J),0)),a=t.FromMapPoint(a.X,a.Y),b=t.FromMapPoint(b.X,b.Y)):(a=t.FromMapPoint(y,E),b=t.FromMapPoint(N,J));I.style.zIndex=D;I.style.width=parseInt(Math.abs(b.x-
a.x))+"px";I.style.height=parseInt(Math.abs(b.y-a.y))+"px";I.style.left=Math.round(Math.min(a.x,b.x))+"px";I.style.top=Math.round(Math.min(a.y,b.y))+"px"};var Z=function(){if("complete"==I.readyState||I.complete&&null==I.readyState)"MSIE"==DeviceTest()?DetachEvent(I,"readystatechange",Z,!1):DetachEvent(I,"load",Z,!1),y=U,E=O,N=L,J=Q,m.UpdateElement&&m.UpdateElement()};this.RebuildElement=function(){if(!1!=this.getVisible()){var a=t.FromMapPoint(w,z),b=t.FromMapPoint(A,C);0>a.x?a.x=0:a.x>t.getClientWidth()&&
(a.x=t.getClientWidth());0>a.y?a.y=0:a.y>t.getClientHeight()&&(a.y=t.getClientHeight());0>b.x?b.x=0:b.x>t.getClientWidth()&&(b.x=t.getClientWidth());0>b.y?b.y=0:b.y>t.getClientHeight()&&(b.y=t.getClientHeight());if(!(a.x>b.x||a.y>b.y)){var d=t.ToMapPoint(a.x,a.y),e=t.ToMapPoint(b.x,b.y);U=d.x;O=d.y;L=e.x;Q=e.y;nWidth=parseInt(b.x-a.x);nHeight=parseInt(b.y-a.y);"MSIE"==DeviceTest()?AttachEvent(I,"readystatechange",Z,!1):AttachEvent(I,"load",Z,!1);u==x&&(a="?"+v.join("&"),"97"!=k&&(b=h.Inverse(s,new CPoint3(U,
O,0)),d=h.Inverse(s,new CPoint3(L,Q,0)),U=b.X,O=b.Y,L=d.X,Q=d.Y),a+="&BBOX="+U+","+Q+","+L+","+O+"&WIDTH="+nWidth+"&HEIGHT="+nHeight,I.src=B+a)}}};var K=function(a,b){M=b};this.CreateLegend=function(a){if(1<G.length)for(var b=0;b<G.length;b++)a.CreateSubLegend(G[b],K)};this.ExecuteQuery=function(a,b,d,e){if(null!=M)return M.ExecuteQuery(a,b,d,e)};this.ExecuteUpdate=function(a,b,d,e,f){if(null!=M)return M.ExecuteUpdate(a,b,d,e,f)};this.ExecuteDelete=function(a,b,d){if(null!=M)return M.ExecuteDelete(a,
b,d)};this.getFeatureType=function(){if(null!=M)return M.getFeatureType()};this.getFields=function(){if(null!=M)return M.getFields()};G=[];0==G.length?G.push(new l(null)):1==G.length&&(G[0].putName(""),G[0].putTitle(q));M=G[G.length-1]};TGOS.WMSLayer.enumCoordinate={WGS84:0,TWD97:1,GOOGLE:2,TWD97_119:3};MapLayer.enumFeatureType={Unknown:0,Point:1,LineString:2,Polygon:3};
function MapLayer(a,d){function b(a){var b=null,f="",g="",h=0;a&&(f=GetXMLNodeAttribute(a,"Name"),h=parseInt(GetXMLNodeAttribute(a,"FeatureType")),g=GetXMLNodeAttribute(a,"SRName"));var k=f;if(a=FindXMLNodes(GetXMLChildNode(a,"Fields"),"Field"))for(var b=[],l=0;l<a.length;l++)b.push(GetXMLNodeAttribute(a.item(l),"Name"));this.getName=function(){return f};this.putName=function(a){f=a};this.getTitle=function(){return k};this.putTitle=function(a){k=a};this.getFields=function(){return b};this.getFeatureType=
function(){return h};this.getSRName=function(){return g};this.ExecuteQuery=function(a,b,e,f){U=new AjaxAgent(d+"/Query",!0,!0);U.SendRequest("V="+x+"&S="+D.valueOf()+"&Layer="+escape(this.getName())+(b?"&GEOM=":"&EXPR=")+escape(a),e,null,f)};this.ExecuteUpdate=function(a,b,f,g,h){U=new AjaxAgent(d+"/Update",!1,!0);U.SendRequest("V="+x+"&S="+D.valueOf()+"&Layer="+escape(this.getName())+"&ID="+a+"&GEOM="+b+"&Values="+f,g,null,h);e()};this.ExecuteDelete=function(a,b,f){U=new AjaxAgent(d+"/Delete",!1,
!0);U.SendRequest("V="+x+"&S="+D.valueOf()+"&Layer="+escape(this.getName())+"&ID="+a,b,null,f);e()}}function e(){x++;(new AjaxAgent(d,!1,!0)).SendRequest("V="+x+"&S="+D.valueOf(),function(a){a=GetXMLChildNode(a.responseXML.documentElement,"Infomation");a=GetXMLChildNode(a,"Envelope");h=parseFloat(GetXMLNodeAttribute(a,"Left"));s=parseFloat(GetXMLNodeAttribute(a,"Top"));m=parseFloat(GetXMLNodeAttribute(a,"Right"));t=parseFloat(GetXMLNodeAttribute(a,"Bottom"));f.RebuildElement()})}var f=this,g=null,
k=a,l=a,h=0,s=0,m=1,t=1,n=!0,q=0,w=0,z=0,A=0,C=0,F=0,B=0,u=0,x=0,D=new Date,v=null,y=[],E=null;this.getName=function(){return k};this.putName=function(a){k=a};this.getTitle=function(){return l};this.putTitle=function(a){l=a};this.getVisible=function(){return n};this.putVisible=function(a){n=a;v&&(v.style.visibility=a?"":"hidden")};this.getResourcePath=function(){return d};this.getLeft=function(){return h};this.getTop=function(){return s};this.getRight=function(){return m};this.getBottom=function(){return t};
this.getLayers=function(){return y};this.getThematicLayer=function(){return E};this.Initialize=function(a){g=a;a=g.getHObject();v=a.ownerDocument.createElement("img");a.appendChild(v);v.galleryImg=!1;v.hideFocus=!0;v.style.MozUserSelect="none";v.border="0px";v.style.position="absolute";v.style.width="100%";v.style.height="100%";v.style.visibility=n?"":"hidden";v.onmousedown=function(){return!1};v.galleryImg=!1};this.RemoveSelf=function(){null!=v&&(null!=g&&g.getHObject().removeChild(v),v=null)};this.UpdateElement=
function(){var a=g.FromMapPoint(q,w),b=g.FromMapPoint(z,A);v.style.width=parseInt(Math.abs(b.x-a.x))+"px";v.style.height=parseInt(Math.abs(b.y-a.y))+"px";v.style.left=Math.round(Math.min(a.x,b.x))+"px";v.style.top=Math.round(Math.min(a.y,b.y))+"px"};var N=function(){if("complete"==v.readyState||v.complete&&null==v.readyState)"MSIE"==DeviceTest()?DetachEvent(v,"readystatechange",N,!1):DetachEvent(v,"load",N,!1),q=C,w=F,z=B,A=u,f.UpdateElement&&f.UpdateElement()};this.RebuildElement=function(){if(!1!=
this.getVisible()){var a=g.FromMapPoint(h,s),b=g.FromMapPoint(m,t);0>a.x?a.x=0:a.x>g.getClientWidth()&&(a.x=g.getClientWidth());0>a.y?a.y=0:a.y>g.getClientHeight()&&(a.y=g.getClientHeight());0>b.x?b.x=0:b.x>g.getClientWidth()&&(b.x=g.getClientWidth());0>b.y?b.y=0:b.y>g.getClientHeight()&&(b.y=g.getClientHeight());if(!(a.x>b.x||a.y>b.y)){var e=g.ToMapPoint(a.x,a.y),f=g.ToMapPoint(b.x,b.y);C=e.x;F=e.y;B=f.x;u=f.y;nWidth=parseInt(b.x-a.x);nHeight=parseInt(b.y-a.y);a="/GetImage?V="+x+"&S="+D.valueOf()+
"&Width="+nWidth+"&Height="+nHeight+"&Left="+C+"&Top="+F+"&Right="+B+"&Bottom="+u;"MSIE"==DeviceTest()?AttachEvent(v,"readystatechange",N,!1):AttachEvent(v,"load",N,!1);v.src=d+a}}};var J=function(a,b){E=b};this.CreateLegend=function(a){if(1<y.length)for(var b=0;b<y.length;b++)a.CreateSubLegend(y[b],J)};this.ExecuteQuery=function(a,b,d,e){if(null!=E)return E.ExecuteQuery(a,b,d,e)};this.ExecuteUpdate=function(a,b,d,e,f){if(null!=E)return E.ExecuteUpdate(a,b,d,e,f)};this.ExecuteDelete=function(a,b,
d){if(null!=E)return E.ExecuteDelete(a,b,d)};this.getFeatureType=function(){if(null!=E)return E.getFeatureType()};this.getFields=function(){if(null!=E)return E.getFields()};var y=[],U=new AjaxAgent(d,!1,!0);U.SendRequest("V="+x+"&S="+D.valueOf(),function(a){a=GetXMLChildNode(a.responseXML.documentElement,"Infomation");var d=GetXMLChildNode(a,"Envelope");h=parseFloat(GetXMLNodeAttribute(d,"Left"));s=parseFloat(GetXMLNodeAttribute(d,"Top"));m=parseFloat(GetXMLNodeAttribute(d,"Right"));t=parseFloat(GetXMLNodeAttribute(d,
"Bottom"));if(a=FindXMLNodes(GetXMLChildNode(a,"Layers"),"Layer"))for(d=0;d<a.length;d++)y.push(new b(a.item(d)))});0==y.length?y.push(new b(null)):1==y.length&&(y[0].putName(""),y[0].putTitle(l));E=y[y.length-1]};function CPoint3(a,d,b){this.X=a;this.Y=d;this.Z=b;return this}CPoint3.prototype.toString=function(){return"("+this.X+","+this.Y+","+this.Z+")"};CPoint3.prototype.Distance=function(){return Math.sqrt(this.X*this.X+this.Y*this.Y+this.Z*this.Z)};
function GeographicTransform(a,d,b,e,f,g,k){this.BursaWolfTransform=function(l){var h=Math.sin(e),s=Math.cos(e);l=new CPoint3(l.X,s*l.Y+h*l.Z,-h*l.Y+s*l.Z);h=Math.sin(f);s=Math.cos(f);l=new CPoint3(s*l.X-h*l.Z,l.Y,h*l.X+s*l.Z);h=Math.sin(g);s=Math.cos(g);l=new CPoint3(s*l.X+h*l.Y,-h*l.X+s*l.Y,l.Z);return new CPoint3(a+(1+k)*l.X,d+(1+k)*l.Y,b+(1+k)*l.Z)};this.MolodenskyBadekasTransform=function(l){return new CPoint3(a+k*l.X+(l.X+g*l.Y-f*l.Z),d+k*l.Y+(-g*l.X+l.Y+e*l.Z),b+k*l.Z+(f*l.X-e*l.Y+l.Z))};return this}
function HorizontalDatum(a,d){this.SemiMajorAxis=a;this.Flattening=d;this.SemiMinorAxis=this.SemiMajorAxis*(1-this.Flattening);this.es=1-(1-this.Flattening)*(1-this.Flattening);this.et2=this.es/(1-this.es);return this}
HorizontalDatum.prototype.CartesianFromGeodetic=function(a){if(90==a.Y||-90==a.Y)return new CPoint3(0,0,(-90==a.Y?-1:1)*this.SemiMajorAxis*(1-this.es)+a.Z);var d=a.Y*Math.PI/180,b=a.X*Math.PI/180,e=Math.sin(d),f=Math.cos(d),d=this.SemiMajorAxis/Math.sqrt(1-this.es*e*e),g=(d+a.Z)*f*Math.cos(b),b=(d+a.Z)*f*Math.sin(b);return new CPoint3(g,b,((1-this.es)*d+a.Z)*e)};
HorizontalDatum.prototype.GeodeticFromCartesian=function(a){if(0==a.X&&0==a.Y)return new CPoint3(0,0<=a.Z?90:-90,Math.abs(a.Z)-this.SemiMinorAxis);var d=a.X*a.X+a.Y*a.Y,b=Math.sqrt(d),e=1.0026*a.Z,d=Math.sqrt(e*e+d),e=e/d,d=b/d,e=a.Z+this.SemiMinorAxis*this.et2*e*e*e,d=b-this.SemiMajorAxis*this.es*d*d*d,f=Math.sqrt(e*e+d*d),e=e/f,f=d/f,g=this.SemiMajorAxis/Math.sqrt(1-this.es*e*e),d=0,d=0.3826834323650898<=f?b/f-g:-0.3826834323650898>=f?b/-f-g:a.Z/e-g*(1-this.es),b=180*Math.atan(e/f)/Math.PI;a=0!=
a.X?180*Math.atan2(a.Y,a.X)/Math.PI:0<a.Y?90:-90;return new CPoint3(a,b,d)};
function TransverseMercatorProjection(a,d,b,e,f){function g(a,b,d,e){var f,g=(f=e*e)*(0.46875-e*(0.013020833333333334+0.007120768229166667*e)),n=(f*=e)*(0.3645833333333333-0.005696614583333333*e);d*=b;b*=b;return(1-e*(0.25+e*(0.046875+e*(0.01953125+0.01068115234375*e))))*a-d*(e*(0.75-e*(0.046875+e*(0.01953125+0.01068115234375*e)))+b*(g+b*(n+0.3076171875*b*f*e)))}this.centralMeridian=a;this.falseEasting=d;this.falseNorthing=b;this.latitudeOfOrigin=e;this.scaleFactor=f;this.Forward=function(k,l){var h=
CPoint3((l.X-a)*Math.PI/180,l.Y*Math.PI/180,l.Z),s=Math.sin(h.Y),m=Math.cos(h.Y),t=1E-10<Math.abs(m)?s/m:0,t=t*t,n=m*h.X,q=n*n,n=n/Math.sqrt(1-k.es*s*s),w=k.et2*m*m,z=n*(1+q/6*(1-t+w+q/20*(5+t*(t-18)+w*(14-58*t)+q/42*(61+t*(t*(179-t)-479))))),A=e*Math.PI/180,A=g(A,Math.sin(A),Math.cos(A),k.es),s=g(h.Y,s,m,k.es)-A+s*n*h.X/2*(1+q/12*(5-t+w*(9+4*w)+q/30*(61+t*(t-58)+w*(270-330*t)+q/56*(1385+t*(t*(543-t)-3111)))));l=new CPoint3(z,s,h.Z);l.X=l.X*f*k.SemiMajorAxis+d;l.Y=l.Y*f*k.SemiMajorAxis+b;return l};
this.Inverse=function(k,l){var h=CPoint3((l.X-d)/k.SemiMajorAxis/f,(l.Y-b)/k.SemiMajorAxis/f,l.Z),s=e*Math.PI/180,s=g(s,Math.sin(s),Math.cos(s),k.es)+h.Y,m=k.es,t=1/(1-m),n=s,q;for(q=10;q;--q){var w=Math.sin(n),z=1-m*w*w,n=n-(z=(g(n,w,Math.cos(n),m)-s)*z*Math.sqrt(z)*t);if(1E-11>Math.abs(z))break}s=n;m=Math.PI/2;Math.abs(s)>=m?l=new CPoint3(0,0>h.Y?-m:m,h.Z):(q=Math.sin(s),m=Math.cos(s),t=1E-10<Math.abs(m)?q/m:0,n=k.et2*m*m,q=1-k.es*q*q,w=h.X*Math.sqrt(q),q*=t,t*=t,z=w*w,s-=q*z/(1-k.es)/2*(1-z/12*
(5+t*(3-9*n)+n*(1-4*n)-z/30*(61+t*(90-252*n+45*t)+46*n-z/56*(1385+t*(3633+t*(4095+1574*t)))))),l=new CPoint3(w*(1-z/6*(1+2*t+n-z/20*(5+t*(28+24*t+8*n)+6*n-z/42*(61+t*(662+t*(1320+720*t))))))/m,s,h.Z));l.X=180*l.X/Math.PI+a;l.Y=180*l.Y/Math.PI;return l};return this}function CoordinateTransform(a,d,b,e,f,g){d&&(g=d.Inverse(a,g));a&&b&&a!=b&&(g=a.CartesianFromGeodetic(g),f&&(g=f.BursaWolfTransform(g)),g=b.GeodeticFromCartesian(g));e&&(g=e.Forward(b,g));return g};function MercatorProjection(a,d,b,e){function f(a,b,d){b*=d;return Math.tan(0.5*(g-a))/Math.pow((1-b)/(1+b),0.5*d)}this.centralMeridian=a;this.falseEasting=d;this.falseNorthing=b;this.scaleFactor=e;this.Forward=function(l,h){var s=CPoint3((h.X-a)*Math.PI/180,h.Y*Math.PI/180,h.Z);if(0==l.es)if(1E-10>=Math.abs(Math.abs(s.Y)-g))h=null;else{var m=s.X,t=Math.log(Math.tan(k+0.5*s.Y));h=new CPoint3(m,t,s.Z)}else 1E-10>=Math.abs(Math.abs(s.Y)-g)?h=null:(m=s.X,t=-Math.log(f(s.Y,Math.sin(s.Y),Math.sqrt(l.es))),
h=new CPoint3(m,t,s.Z));h.X=h.X*e*l.SemiMajorAxis+d;h.Y=h.Y*e*l.SemiMajorAxis+b;return h};this.Inverse=function(f,h){var k=CPoint3((h.X-d)/f.SemiMajorAxis/e,(h.Y-b)/f.SemiMajorAxis/e,h.Z);if(0==f.es){var m=g-2*Math.atan(Math.exp(-k.Y));h=new CPoint3(k.X,m,k.Z)}else{var m=Math.exp(-k.Y),t=Math.sqrt(f.es),n=0.5*t,q=g-2*Math.atan(m);i=15;do var w=t*Math.sin(q),w=g-2*Math.atan(m*Math.pow((1-w)/(1+w),n))-q,q=q+w;while(1E-10<Math.abs(w)&&--i);h=new CPoint3(k.X,q,k.Z)}h.X=180*h.X/Math.PI+a;h.Y=180*h.Y/Math.PI;
return h};var g=Math.PI/2,k=Math.PI/4;return this};function ScaleTransformation(a){var d=a,b=-a,e=1,f=1;this.getBaseScaleX=function(){return d};this.putBaseScaleX=function(a){d=a};this.getBaseScaleY=function(){return b};this.putBaseScaleY=function(a){b=a};this.getScale=function(){return d*e};this.putScale=function(a){e=a/d;f=a/Math.abs(b)};this.getScaleX=function(){return d*e};this.getScaleY=function(){return b*f}}
function LevelTransformation(a,d,b){var e=a,f=-a,g=d,k=Math.pow(2,g),l=b;this.FitLevel=function(){this.putMapLevel(Math.round(g))};this.getBaseScaleX=function(){return e};this.putBaseScaleX=function(a){e=a};this.getBaseScaleY=function(){return f};this.putBaseScaleY=function(a){f=a};this.getMapMaxLevel=function(){return l};this.putMapMaxLevel=function(a){l=a};this.getMapLevel=function(){return g};this.putMapLevel=function(a){if(g==a)return!0;var b=a>l-1?l-1:0>a?0:a;if((a>=l||0>a)&&g==b)return!1;g=
b;k=Math.pow(2,g);return!0};this.getScale=function(){return e*k};this.putScale=function(a){this.putMapLevel(Math.log(a/e)/Math.LN2)};this.getScaleX=function(){return e*k};this.getScaleY=function(){return f*k}}
function MapBase(a,d){var b,e,f,g,k,l=0,h=0,s=0,m=0,t=null;f=[];g=[];k=null;t=d;b=a.ownerDocument.createElement("div");a.appendChild(b);b.style.position="absolute";b.style.overflow="hidden";b.style.left="0px";b.style.top="0px";b.style.width="100%";b.style.height="100%";b.style.zIndex=0;e=b.ownerDocument.createElement("div");b.appendChild(e);e.style.position="absolute";e.style.left="0px";e.style.top="0px";e.style.width="100%";e.style.height="100%";e.style.zIndex=0;var l=Number(e.clientWidth),h=Number(e.clientHeight),
n,q=FuncAdapter(this,function(){if(l!=Number(e.clientWidth)||h!=Number(e.clientHeight))n&&clearTimeout(n),n=setTimeout(FuncAdapter(this,function(){this.RefreshMap(!0,!0)}),1E3),this.RefreshMap(!1,!1)});AttachEvent(e,"resize",q,!1);this.setColor=function(a){e.style.background=a};this.FinalRelease=function(){this.SelectMapTool(null);this.RemoveAllElements();DetachEvent(e,"resize",q,!1);b.removeChild(b)};this.getHObject=function(){return e};this.getHPackage=function(){return b};this.getClientWidth=function(){return l};
this.getClientHeight=function(){return h};this.getCenterX=function(){return s};this.putCenterX=function(a){s=a};this.getCenterY=function(){return m};this.putCenterY=function(a){m=a};this.getTransformation=function(){return t};this.putScale=function(a){t=a};this.getScale=function(){return t.getScale()};this.putScale=function(a){t.putScale(a)};this.getCellSizeX=function(){return this.ToMapDistX(1)};this.getCellSizeY=function(){return this.ToMapDistY(1)};this.MoveMapTo=function(a,b){this.putCenterX(a);
this.putCenterY(b)};this.ZoomMapTo=function(a){if(null!=a.left&&null!=a.top&&null!=a.right&&null!=a.bottom){this.MoveMapTo((a.right+a.left)/2,(a.bottom+a.top)/2);var b=h/(a.bottom-a.top);this.putScale(Math.min(Math.abs(l/(a.right-a.left)),Math.abs(b)))}};this.getPackageOffset=function(){var a=0,d=0,d=b.getBoundingClientRect(),a=d.left,d=d.top;return new TGOS.TGPoint(a,d)};this.getCursorPosition=function(a){if(null==a)return null;var b=this.getPackageOffset();return new TGOS.TGPoint(a.clientX-b.x,
a.clientY-b.y)};this.ToMapPoint=function(a,b){return new TGOS.TGPoint(this.ToMapDistX(a-l/2)+s,this.ToMapDistY(b-h/2)+m)};this.FromMapPoint=function(a,b){return new TGOS.TGPoint(this.FromMapDistX(a-s)+l/2,this.FromMapDistY(b-m)+h/2)};this.ToMapDistX=function(a){return a/t.getScaleX()};this.ToMapDistY=function(a){return a/t.getScaleY()};this.FromMapDistX=function(a){return a*t.getScaleX()};this.FromMapDistY=function(a){return a*t.getScaleY()};this.SelectMapTool=function(a){if(a){if(a.InitMapEvent)return k&&
k.ExitMapEvent&&k.ExitMapEvent(),a.InitMapEvent(this),k=a,!0}else k&&k.ExitMapEvent&&(k.ExitMapEvent(),k=null);return!1};this.getLayers=function(){return f};this.AddLayer=function(a){null!=a&&(a.Initialize&&a.Initialize(this),f.push(a))};this.RemoveLayer=function(a){var b,d=f.length;for(b=0;b<d;b++)if(f[b]==a){f.splice(b,1);break}a.RemoveSelf&&a.RemoveSelf()};this.RemoveAllLayers=function(){var a,b=f.length;for(a=0;a<b;a++)f[a].RemoveSelf&&f[a].RemoveSelf();f=[]};this.getElements=function(a){return g};
this.AddElement=function(a){a.Initialize&&a.Initialize(this);g.push(a)};this.RemoveElement=function(a){var b,d=g.length;for(b=0;b<d;b++)if(g[b]==a){g.splice(b,1);break}a.RemoveSelf&&a.RemoveSelf()};this.RemoveAllElements=function(){var a,b=g.length;for(a=0;a<b;a++)g[a].RemoveSelf&&g[a].RemoveSelf();g=[]};this.getExtent=function(){for(var a=null,b=null,d=null,e=null,g=0;g<f.length;g++){var h=f[g];h.getLeft&&(null==a||this.FromMapDistX(a)>this.FromMapDistX(h.getLeft()))&&(a=h.getLeft());h.getTop&&(null==
b||this.FromMapDistY(b)>this.FromMapDistY(h.getTop()))&&(b=h.getTop());h.getRight&&(null==d||this.FromMapDistX(d)<this.FromMapDistX(h.getRight()))&&(d=h.getRight());h.getBottom&&(null==e||this.FromMapDistY(e)<this.FromMapDistY(h.getBottom()))&&(e=h.getBottom())}return new TGOS.TGEnvelope(a,b,d,e)};this.RefreshMap=function(a){z=!0;a&&(l=Number(e.clientWidth),h=Number(e.clientHeight));if(f&&0<f.length){var b=f.length;if(a)for(var d=0;d<b;d++)f[d].RebuildElement&&f[d].RebuildElement();for(d=0;d<b;d++)f[d].UpdateElement&&
f[d].UpdateElement(1)}if(g&&0<g.length){b=g.length;if(a)for(d=0;d<b;d++)g[d].RebuildElement&&g[d].RebuildElement();for(d=0;d<b;d++)g[d].UpdateElement&&g[d].UpdateElement(1)}};var w=null,z=!1,A=null,C=null,F=null;this.MoveToAnimation=function(a,b,d){z=!1;A=a.x;C=a.y;F=b;if(null==w){var e=function(){if(!z){var a=this.getCenterX(),b=this.getCenterY(),f=this.getScale();if(5<=this.FromMapDistX(Math.abs(a-A))||5<=this.FromMapDistY(Math.abs(b-C))||0.03125<=Math.abs(Math.log(f/F)))if(this.putScale(2/(1/f+
1/F)),f!=this.getScale()){this.MoveMapTo((a+A)/2,(b+C)/2);this.RefreshMap(!1,!0);z=!1;w=setTimeout(FuncAdapter(this,e),100);return}this.putScale(F);this.MoveMapTo(A,C);this.RefreshMap(!0,!0);z=!1}w=null;d&&d()};e.call(this)}}}
function MapPoint(a,d){this.x=a;this.y=d;this.Diff=function(a){return a.constructor!=TGOS.TGPoint?this:new TGOS.TGPoint(this.x-a.x,this.y-a.y)};this.Plus=function(a){return a.constructor!=TGOS.TGPoint?this:new TGOS.TGPoint(this.x+a.x,this.y+a.y)};this.toString=function(){return this.x+" "+this.y}}
function MapEnvelope(a,d,b,e){this.Left=a;this.Top=d;this.Right=b;this.Bottom=e;this.Extend=function(a){a.constructor==TGOS.TGEnvelope&&(!a.Left||null!=this.Left&&this.Left>a.Left!=this.Right>this.Left||(this.Left=a.Left),!a.Top||null!=this.Top&&this.Top<a.Top!=this.Bottom<this.Top||(this.Top=a.Top),!a.Right||null!=this.Right&&this.Right<a.Right!=this.Left<this.Right||(this.Right=a.Right),!a.Bottom||null!=this.Bottom&&this.Bottom>a.Bottom!=this.Top>this.Bottom||(this.Bottom=a.Bottom))};this.Shrink=
function(a){a.constructor==TGOS.TGEnvelope&&(!a.Left||null!=this.Left&&this.Left<a.Left!=this.Right>this.Left||(this.Left=a.Left),!a.Top||null!=this.Top&&this.Top>a.Top!=this.Bottom<this.Top||(this.Top=a.Top),!a.Right||null!=this.Right&&this.Right>a.Right!=this.Left<this.Right||(this.Right=a.Right),!a.Bottom||null!=this.Bottom&&this.Bottom<a.Bottom!=this.Top>this.Bottom||(this.Bottom=a.Bottom))};this.toString=function(){return Math.min(this.Left,this.Right)+" "+Math.min(this.Top,this.Bottom)+","+
Math.max(this.Left,this.Right)+" "+Math.max(this.Top,this.Bottom)}};function Overview(a,d,b,e,f,g){function k(a,b){var d,e,f=!1;this.ExitMapEvent=null;this.IsMapAction=function(){return f};this.InitMapEvent=function(g){var h=g.getHObject(),k=function(a){var b=a.screenX-d,f=a.screenY-e;d=a.screenX;e=a.screenY;g.MoveMapTo(g.getCenterX()-g.ToMapDistX(b),g.getCenterY()-g.ToMapDistY(f));g.RefreshMap(!1)},l=function(a){DetachEvent(h,"mousemove",k,!0);DetachEvent(h,"mouseup",l,!1);g.RefreshMap(!0);f=!1},m=function(a){util.disableDefault(a);f=!0;d=a.screenX;e=a.screenY;AttachEvent(h,
"mouseup",l,!1);AttachEvent(h,"mousemove",k,!0)},n=function(b){a&&(f=!0,b=g.getCursorPosition(b),b=g.ToMapPoint(b.X,b.Y),g.MoveToAnimation(b,g.getScale(),function(){f=!1}))},q=function(a){if(b){f=!0;var d=g.getCursorPosition(a),d=g.ToMapPoint(d.X,d.Y),e=g.getScale(),h=a.wheelDelta?a.wheelDelta:-a.detail;a=0;0<h?a=1:0>h&&(a=-1);h=1;h=g.getTransformation();h=null!=h&&null!=h.getLevelScale&&null!=h.getMapLevel?h.getLevelScale(h.getMapLevel()+a)/e:Math.pow(2,a);e*=h;d=new MapPoint((g.getCenterX()-d.X)/
h+d.X,(g.getCenterY()-d.Y)/h+d.Y);g.MoveToAnimation(d,e,function(){f=!1})}};this.ExitMapEvent=function(){b&&DetachEvent(h.ownerDocument,"mousewheel",q,!1);DetachEvent(h,"mousedown",m,!1);a&&DetachEvent(h,"dblclick",n,!1)};AttachEvent(h,"mousedown",m,!1);a&&AttachEvent(h,"dblclick",n,!1);b&&AttachEvent(h.ownerDocument,"mousewheel",q,!1)}}function l(b){switch(b){case "Open":a.style.width=e+"px";a.style.height=f+"px";a.style.border="2px solid";h.style.width=e+"px";h.style.height=f+"px";n.alt="Open";
n.src=TGOS.RES_PATH+"ShowClose.gif";n.status=!0;break;case "Close":a.style.width="11px",a.style.height="11px",a.style.border="0px",h.style.width="11px",h.style.height="11px",n.alt="Open",n.src=TGOS.RES_PATH+"ShowOpen.gif",n.status=!1}}var h=null,s=null,m=null,t=null,n,q=null,w=null;this.Show=function(b){b?(a.style.display="inline",l("Open")):a.style.display="none"};this.Minimize=function(){l("Close")};this.FinalRelease=function(){d.RemoveElement(this);t&&t.FinalRelease&&t.FinalRelease();t=null;m&&
m.FinalRelease&&m&&m.FinalRelease&&m.FinalRelease();m=null;s&&a.removeChild(s);s=null};this.CenterXY=function(){return new MapPoint(m.getCenterX(),m.getCenterY())};this.SelectAreaHide=function(){m_IndexObj.style.visibility="hidden"};this.SelectAreaShow=function(){m_IndexObj.style.visibility="visible"};this.getTarget=function(){return d};this.getMapBase=function(){return m};this.UpdateElement=function(){t.UpdateElement()};this.RebuildElement=function(){null!=t&&t.RebuildElement();if(null!=m){var a=
d.getScale()/Math.pow(2,g);m.MoveToAnimation(new MapPoint(d.getCenterX(),d.getCenterY()),a)}};var z=new ScaleTransformation(1);z.putBaseScaleX(b.getBaseScaleX());z.putBaseScaleY(b.getBaseScaleY());h=document.createElement("div");a.appendChild(h);h.style.position="absolute";h.style.right="0px";h.style.bottom="0px";this.setColor=function(a){h.style.backgroundColor=a};h.style.width=e-10+"px";h.style.height=f-10+"px";h.style.overflow="hidden";s=document.createElement("div");h.appendChild(s);s.style.position=
"absolute";s.style.overflow="hidden";s.style.right="0px";s.style.bottom="0px";s.style.width=e+"px";s.style.height=f+"px";n=h.ownerDocument.createElement("img");n.onreadystatechange=function(){s.style.right=n.offsetWidth-10+"px";s.style.width=e+"px";s.style.height=f+"px";n.onstatechange=null};h.appendChild(n);n.style.position="absolute";n.style.right="0px";n.style.bottom="0px";n.status=!0;n.alt="Close";n.style.cursor="pointer";var A=null;this.setStyle=function(a){};n.onclick=function(){var b=function(d,
e){var f=parseInt(h.style.width),g=parseInt(h.style.height),k=d-f,l=e-g;10>Math.abs(k)||10>Math.abs(l)?(a.style.width=d+"px",a.style.height=e+"px",h.style.width=d+"px",h.style.height=e+"px",a.style.border="0px",A=null,n.status&&(a.style.border="2px solid",a.style.width=d+"px",a.style.height=e+"px",h.style.width=d+"px",h.style.height=e+"px")):(a.style.width=f+k/2+"px",a.style.height=g+l/2+"px",h.style.width=f+k/2+"px",h.style.height=g+l/2+"px",A=setTimeout(function(){b(d,e)},50))};null!=A&&clearTimeout(A);
A=null;(n.status=!n.status)?(n.alt="Close",n.src=TGOS.RES_PATH+"ShowClose.gif",b(e,f)):(n.alt="Open",n.src=TGOS.RES_PATH+"ShowOpen.gif",a.style.border="2px solid",b(parseInt(n.offsetWidth),parseInt(n.offsetHeight)))};m=new MapBase(s,z,"0px","0px","100%","100%");m.MoveMapTo(d.getCenterX(),d.getCenterY());m.RefreshMap(!0);t=new function(a){var b=a.getTarget(),d=a.getMapBase(),e=!1,f=new k(!1,!1),g=d.getHPackage(),h=document.createElement("div");g.appendChild(h);h.style.position="absolute";h.style.overflow=
"hidden";h.style.width="40px";h.style.height="40px";h.style.left="15px";h.style.top="15px";h.style.border="inset 1px #0300FA";a=h.ownerDocument.createElement("div");h.appendChild(a);a.style.filter="Alpha(Opacity=35)";a.style.opacity=0.35;a.style.MozOpacity=0.35;a.style.MozUserSelect="none";a.style.backgroundColor="#5e38ff";a.style.width="100%";a.style.height="100%";var l,m,n=function(a){var e=a.screenX-l,f=a.screenY-m;l=a.screenX;m=a.screenY;b.MoveMapTo(b.getCenterX()+d.ToMapDistX(e),b.getCenterY()+
d.ToMapDistY(f));b.RefreshMap(!1)},t=function(a){h.style.cursor="default";DetachEvent(h,"mousemove",n,!0);DetachEvent(h,"mouseup",t,!1);b.RefreshMap(!0)},s=function(a){util.disableDefault(a);l=a.screenX;m=a.screenY;h.style.cursor="move";AttachEvent(h,"mousemove",n,!0);AttachEvent(h,"mouseup",t,!1)};AttachEvent(h,"mousedown",s,!1);d.SelectMapTool(f);d.AddElement(this);this.FinalRelease=function(){d.RemoveElement(this);DetachEvent(h,"mousedown",s,!1);f&&f.FinalRelease&&f.FinalRelease();f=null;h&&g.removeChild(h);
h=null};this.UpdateElement=function(){if(f.IsMapAction())e||(e=!0,q.x=parseInt(h.style.left)+parseInt(h.style.width)/2,q.y=parseInt(h.style.top)+parseInt(h.style.height)/2,a=d.ToMapPoint(q.x,q.y),b.MoveMapTo(a.x,a.y),b.RefreshMap(!1),e=!1);else{var a=b.ToMapPoint(0,0),g=b.ToMapPoint(b.getClientWidth(),b.getClientHeight());q=d.FromMapPoint(a.x,a.y);w=d.FromMapPoint(g.x,g.y);q.x&&q.y&&w.x&&w.y&&(h.style.left=q.x+"px",h.style.top=q.y+"px",h.style.width=w.x-q.x+"px",h.style.height=w.y-q.y+"px")}};this.RebuildElement=
function(){f.IsMapAction()&&!e&&(e=!0,b.RefreshMap(!0),e=!1)}}(this);d.AddElement(this);this.RebuildElement()};TGOS.CTRL_ZINDEX=214748364;
TGOS.CopyrightControl=function(a,d){this.getDiv=function(){return f};this.getPosition=function(){return b};this.setPosition=function(e){var k=a.controls[b].indexOf(f);d in TGOS.TGControlPosition&&(0<=k&&a.controls[b].removeAt(k),a.controls[e].push(f),b=e)};var b=null,e=null,f=null,b=TGOS.TGControlPosition.BOTTOM_LEFT;d in TGOS.TGControlPosition&&(b=d);f=document.createElement("div");f.style.width="250px";f.style.height="20px";e=document.createElement("img");f.appendChild(e);a.getHPackage().appendChild(f);
e.src=TGOS.RES_PATH+"copyright.png";e.style.position="absolute";f.style.position="absolute";this.setPosition(b)};
TGOS.MapTypeBarControl=function(a,d,b,e){function f(b){q=document.createElement("div");q.style.position="absolute";q.style.overflow="hidden";w=document.createElement("table");w.style.borderSpacing="0";w.border="0";q.appendChild(w);for(var d=w.insertRow(-1),e=0,f=0;f<b.length;f++)if(b[f]in a.getDocName()){var g=d.insertCell(0);g.width=h+"px";g.height=s+"px";g.style.padding="0px";g.style.backgroundRepeat="no-repeat";g.style.cursor="pointer";g.mapTypeId=b[f];var t=document.createElement("img");g.appendChild(t);
g.imgElem=t;t.mapTypeId=b[f];AttachEvent(t,"click",function(a){a=util.eventTarget(a);m.getMapTypeId()!=a.mapTypeId&&(a.src=l[a.mapTypeId+"_IMG_D"],k(a.mapTypeId))});m.getMapTypeId()==b[f]?t.src=l[b[f]+"_IMG_D"]:t.src=l[b[f]+"_IMG"];e+=h}AttachEvent(q,"mouseover",function(a){B.expand()});AttachEvent(q,"mouseout",function(a){B.minimize()});n.style.width=e+"px";n.appendChild(q);util.disableSelect(q)}function g(b){z=document.createElement("div");z.style.position="absolute";z.style.right="0px";z.style.backgroundColor=
"#CCCCDD";z.style.borderStyle="solid";z.style.borderColor="#888888";z.style.fontFamily="Times New Roman,\u5fae\u8edf\u6b63\u9ed1\u9ad4";C=document.createElement("div");C.innerHTML="\u5730\u5716\u985e\u578b";C.style.margin="5px";A=document.createElement("select");A.style.margin="5px";A.style.marginTop="0px";z.appendChild(C);z.appendChild(A);util.disableSelect(C);AttachEvent(A,"change",function(a){k(A.value)});for(var d=0;d<b.length;d++)if(b[d]in a.getDocName()){var e=new Option(TGOS.TGMapTypeId_zh_TW[b[d]],
b[d]);A.add(e)}n.appendChild(z)}function k(a){B.setActiveType(a);m.setMapTypeId(a);for(var d=0;d<e.length;d++)e[d].mapTypeId==a?e[d].putVisible(!0):e[d].putVisible(!1);b.getMapBase().RefreshMap(!0)}var l={ROADMAP_IMG_D:TGOS.RES_PATH+"ROADMAP_d.png",SATELLITE_IMG_D:TGOS.RES_PATH+"SATELLITE_d.png",HYBRID_IMG_D:TGOS.RES_PATH+"HYBRID_d.png",TGOSMAP_IMG_D:TGOS.RES_PATH+"TGOSMAP_d.png",NLSCMAP_IMG_D:TGOS.RES_PATH+"NLSCMAP_d.png",MOTCMAP_IMG_D:TGOS.RES_PATH+"MOTCMAP_d.png",F2IMAGE_IMG_D:TGOS.RES_PATH+"F2IMAGE_d.png",
HILLSHADE_IMG_D:TGOS.RES_PATH+"HILLSHADE_d.png",HILLSHADEMIX_IMG_D:TGOS.RES_PATH+"HILLSHADEMIX_d.png",ROADMAP_IMG:TGOS.RES_PATH+"ROADMAP_n.png",SATELLITE_IMG:TGOS.RES_PATH+"SATELLITE_n.png",HYBRID_IMG:TGOS.RES_PATH+"HYBRID_n.png",TGOSMAP_IMG:TGOS.RES_PATH+"TGOSMAP_n.png",NLSCMAP_IMG:TGOS.RES_PATH+"NLSCMAP_n.png",MOTCMAP_IMG:TGOS.RES_PATH+"MOTCMAP_n.png",F2IMAGE_IMG:TGOS.RES_PATH+"F2IMAGE_n.png",HILLSHADE_IMG:TGOS.RES_PATH+"HILLSHADE_n.png",HILLSHADEMIX_IMG:TGOS.RES_PATH+"HILLSHADEMIX_n.png"},h=70,
s=70,m=a;m.getDiv();var t=m.getMapBase(),n=null,q=null,w=null,z=null,A=null,C=null,F=d.controlPosition,B=this;this.expand=function(){for(var a=0,b=0,b=0;b<w.rows[0].cells.length;b++)w.rows[0].cells[b].style.display="table-cell",a+=h;n.style.width=a+"px"};this.minimize=function(){for(var a=0;a<w.rows[0].cells.length;a++)m.getMapTypeId()==w.rows[0].cells[a].mapTypeId?w.rows[0].cells[a].style.display="table-cell":w.rows[0].cells[a].style.display="none";n.style.width=h+"px"};this.getDiv=function(){return n};
this.init=function(){n&&t.getHPackage().removeChild(n);n=document.createElement("div");n.style.position="absolute";n.style.margin="5px";f(d.mapTypeIds);g(d.mapTypeIds);this.setStyle(TGOS.TGMapTypeControlStyle.DEFAULT);m.getHPackage().appendChild(n);this.setPosition(F)};this.setWms=function(a,b){for(var d=defaultLayer;d<pLyr.length;d++)pLyr[d].getName()==a&&pLyr[d].putVisible(b);t.RefreshMap(!0)};this.removeWms=function(a){for(var b=defaultLayer;b<pLyr.length;b++){if(pLyr[b].getName()==a){t.RemoveLayer(pLyr[b]);
for(var d=pLyr,e=b,f=Array(d.length-1),g=0,h=0;h<d.length-1;h++)h!=e&&(f[g]=d[h],g++);pLyr=f}t.RefreshMap(!0)}};this.setPosition=function(b){var d=a.controls[F].indexOf(n);b in TGOS.TGControlPosition&&(0<=d&&a.controls[F].removeAt(d),a.controls[b].push(n),F=b)};this.setStyle=function(a){if(a){q.style.display="inline";z.style.display="none";if(a==TGOS.TGMapTypeControlStyle.DEFAULT||a==TGOS.TGMapTypeControlStyle.HORIZONTAL_BAR)q.style.display="inline",z.style.display="none",n.style.width=q.scrollWidth+
"px",n.style.height=q.scrollHeight+"px";else if(a==TGOS.TGMapTypeControlStyle.DROPDOWN_MENU)q.style.display="none",z.style.display="inline",n.style.height=z.scrollHeight+10+"px",n.style.width=z.scrollWidth+10+"px";else throw"invalide map type control style";d.mapTypeControlStyle=a}};this.setMapTypeIds=function(a){n.removeChild(z);n.removeChild(q);f(a);g(a);d.mapTypeIds=a;var b=m.getDocName();a[0]in b&&(k(a[0]),this.minimize())};this.setActiveType=function(a){for(var b=0;b<w.rows[0].cells.length;b++){var d=
w.rows[0].cells[b];d.imgElem.src=d.mapTypeId==a?l[d.imgElem.mapTypeId+"_IMG_D"]:l[d.imgElem.mapTypeId+"_IMG"]}};this.remove=function(){m.getHPack().removeChild(n)};this.display=function(a){n.style.display=a?"inline":"none"};this.setOptions=function(a){void 0!=a.mapTypeIds&&(this.setMapTypeIds(a.mapTypeIds),this.setStyle(d.mapTypeControlStyle));void 0!=a.mapTypeControlStyle&&this.setStyle(a.mapTypeControlStyle);void 0!=a.controlPosition&&this.setPosition(a.controlPosition)};this.getDiv=function(){return n};
this.init()};
TGOS.LevelBarControl=function(a,d,b,e,f){function g(a){d.putMapLevel(d.getMapLevel()+a);d.FitLevel();s.RefreshMap(!0)}this.getDiv=function(){return l};var k=b,l=null,h=16,s=null,l=document.createElement("table");a.appendChild(l);l.style.position="absolute";l.style.margin="20px";l.border="0";l.cellPadding="0";l.cellSpacing="0";l.id="pLevelBarBar";l.name="pLevelBarBar";util.disableSelect(l);a=l.insertRow(-1);var m=a.insertCell(-1);m.align="center";a=document.createElement("table");m.appendChild(a);a.border=
"0";a.cellPadding="0";a.cellSpacing="0";a.width="34";m=a.insertRow(-1);a=m.insertCell(-1);a.style.padding="0px 4px 0px 0px";var t=a.ownerDocument.createElement("img");a.appendChild(t);AttachEvent(t,"click",function(){g(1)},!1);t.style.cursor="pointer";t.style["vertical-align"]="top";a=l.insertRow(-1);m=a.insertCell(-1);m.align="center";a=document.createElement("table");m.appendChild(a);a.border="0";a.cellPadding="0";a.cellSpacing="0";a.width="34";var m=a.insertRow(-1),n=m.insertCell(-1),q=n.ownerDocument.createElement("div");
n.appendChild(q);q.style.position="relative";q.style.width="12px";q.style.height="100%";var w=document.createElement("img");q.appendChild(w);w.style.position="absolute";w.src=TGOS.RES_PATH+"icons/bar_06.png";w.style.left="0px";w.style.bottom="0px";w.width="34";w.height="16";AttachEvent(q,"mousedown",function(a){function b(a){d.putMapLevel(Math.round(g+(f-a.clientY)/h));s.RefreshMap(!1)}function e(a){DetachEvent(w,"mousemove",b,!0);DetachEvent(w,"mouseup",e,!0);d.FitLevel();s.RefreshMap(!0)}util.disableDefault(a);
if(a.srcElement==w){var f=a.clientY,g=d.getMapLevel();AttachEvent(w,"mousemove",b,!0);AttachEvent(w,"mouseup",e,!0)}else d.putMapLevel((q.clientHeight-a.offsetY)/h-0.5),d.FitLevel(),s.RefreshMap(!0)},!1);n.align="center";n.style.height="0px";m=a.insertRow(-1);a=m.insertCell(-1);a.align="center";a.style.padding="0px 4px 0px 0px";var z=a.ownerDocument.createElement("img");a.appendChild(z);z.src=TGOS.RES_PATH+"/bar_bottom.png";AttachEvent(z,"click",function(){g(-1)},!1);z.style.cursor="pointer";this.Initialize=
function(a){s=a};this.UpdateElement=function(){var a,b=TGOS.MapTypeMaxZoomLevel[f.getCoordSys()][f.getMapTypeId()];a=Math.max(d.getMapMinLevel(),1);b=Math.min(d.getMapMaxLevel(),b)-a;n.style.height=(b+1)*h+"px";a=(d.getMapLevel()-a)*h;w.style.bottom=a+"px"};this.RebuildElement=function(){};this.display=function(a){l.style.display=a?"":"none"};this.setPosition=function(a){var b=f.controls[k].indexOf(l);a in TGOS.TGControlPosition&&(0<=b&&f.controls[k].removeAt(b),f.controls[a].push(l),k=a)};this.setStyle=
function(a){switch(a){case TGOS.TGNavigationControlStyle.SMALL:q.style.display="none";w.style.display="none";n.style.display="none";t.src=TGOS.RES_PATH+"/bar_head.png";t.onmousedown=null;t.onmouseup=null;z.src=TGOS.RES_PATH+"/bar_bottom.png";z.onmousedown=null;z.onmouseup=null;break;case TGOS.TGNavigationControlStyle.MEDIUM:q.style.display="none";w.style.display="none";n.style.display="none";t.src=TGOS.RES_PATH+"TGOS01_01.png";t.onmousedown=function(){this.src=TGOS.RES_PATH+"TGOS02_01.png"};t.onmouseup=
function(){this.src=TGOS.RES_PATH+"TGOS01_01.png"};z.src=TGOS.RES_PATH+"TGOS01_02.png";z.onmousedown=function(){this.src=TGOS.RES_PATH+"TGOS02_02.png"};z.onmouseup=function(){this.src=TGOS.RES_PATH+"TGOS01_02.png"};break;default:t.src=TGOS.RES_PATH+"/bar_head.png",t.onmousedown=null,t.onmouseup=null,z.src=TGOS.RES_PATH+"/bar_bottom.png",z.onmousedown=null,z.onmouseup=null,a=Math.max(1,d.getMapMaxLevel())*h,q.style.display="",w.style.display="",n.style.display="",n.style.backgroundImage="url("+TGOS.RES_PATH+
"bar_02.png)",n.style.height=a+"px",a=(d.getMapLevel()-0.5)*h-w.clientHeight/2,w.style.bottom=a+"px"}};this.setOptions=function(a){void 0!=a.navigationControlStyle&&this.setStyle(a.navigationControlStyle);void 0!=a.controlPosition&&this.setPosition(a.controlPosition)};f.controls[k].push(l);this.setPosition(b);this.setStyle(e);this.UpdateElement()};
TGOS.ScaleBarControl=function(a,d,b,e,f){function g(a,b,d,e,f,g){var h=document.createElement("div");a.appendChild(h);h.style.position="relative";h.style.width=f+"px";h.style.height=g+"px";h.style.overflow="hidden";a=document.createElement("img");h.appendChild(a);a.src=b;a.style.position="absolute";a.style.left=-d+"px";a.style.top=-e+"px";h.Img=a;return h}this.getDiv=function(){return h};this.setPosition=function(a){var b=f.controls[s].indexOf(l);a in TGOS.TGControlPosition&&(0<=b&&f.controls[s].removeAt(b),
f.controls[a].push(l),s=a)};this.setStyle=function(a){};this.setOptions=function(a){void 0!=a.scaleControlStyle&&this.setStyle(a.scaleControlStyle);void 0!=a.controlPosition&&this.setPosition(a.controlPosition)};var k=document.createElement("div");k.style.position="relative";var l=document.createElement("div");l.style.overflow="visible";l.style.margin="10px";var h=null,s=b,h=document.createElement("div");h.style.position="relative";h.style.height="36px";h.style.overflow="hidden";h.id="pScaleBar";
h.name="pScaleBar";g(h,TGOS.RES_PATH+"scale.png",0,0,4,32).style.position="absolute";b=g(h,TGOS.RES_PATH+"scale.png",4,14,508,4);b.style.position="absolute";b.style.left="4px";b.style.top="14px";var m=g(h,TGOS.RES_PATH+"scale.png",0,0,4,15);m.style.position="absolute";m.style.left="0px";m.style.top="0px";var t=g(h,TGOS.RES_PATH+"scale.png",0,17,4,15);t.style.position="absolute";t.style.left="0px";t.style.top="17px";b=g(h,TGOS.RES_PATH+"scale.png",511,14,1,4);b.style.position="absolute";b.style.right=
"0px";b.style.top="14px";var n=h.ownerDocument.createElement("div");h.appendChild(n);n.className="text";n.style.position="absolute";n.style.left="25px";n.style.top="18px";var q=h.ownerDocument.createElement("div");h.appendChild(q);q.className="text";q.style.position="absolute";q.style.left="25px";q.style.top="-2px";l.appendChild(k);l.appendChild(h);a.appendChild(l);var w=e?e:TGOS.TGScaleControlStyle.DEFAULT;this.setStyle=function(a){if(a){w=a;switch(w){case TGOS.TGScaleControlStyle.TEXT:k.style.display=
"block";h.style.display="none";break;default:k.style.display="none",h.style.display="block"}this.UpdateElement()}};var z=new HorizontalDatum(6378137,0),A=new MercatorProjection(0,0,0,1);this.UpdateElement=function(){if(w==TGOS.TGScaleControlStyle.TEXT){var a=TGOS.GetMapScale(f.getCoordSys(),f.getZoom());k.innerHTML=" 1 : "+a}else{var b=d.ToMapDistX(250),e=b,g=1,a="\u516c\u5c3a";6615<b&&(e/=1E3,g=1E3,a="\u516c\u91cc");var l=Math.floor(Math.log(e)/Math.LN10),l=Math.pow(10,l),e=Math.floor(e/l),e=(2>
e?1:5>e?2:5)*l,g=d.FromMapDistX(e*g)+2,s=b/0.3048,l=s,v=1,b="\u82f1\u544e";21702<s&&(l/=5280,v=5280,b="\u82f1\u91cc");s=Math.floor(Math.log(l)/Math.LN10);s=Math.pow(10,s);l=Math.floor(l/s);l=(2>l?1:5>l?2:5)*s;v=d.FromMapDistX(0.3048*l*v)+2;A.Inverse(z,new CPoint3(d.getCenterX(),d.getCenterY(),0));h.style.width=Math.round(Math.max(g,v))+"px";m.style.left=Math.round(g-4)+"px";t.style.left=Math.round(v-4)+"px";q.innerHTML=e+a;n.innerHTML=l+b;Math.round(Math.max(g,v))}};this.display=function(a){l.style.display=
!1==a?"none":""};this.ControlOptionsChang=function(a,b){Location(b.getClientWidth(),b.getClientHeight())};this.setPosition(s);this.setStyle(w);this.UpdateElement()};function IndexView(a,d){var b=null,e=null;this.MapCommand=function(f,g,k){null==b?(f=document.getElementById("OMap"),b=f.ownerDocument.createElement("div"),f.appendChild(b),b.style.position="absolute",b.style.right="0px",b.style.bottom="0px",b.style.width="186px",b.style.height="147px",f=b.ownerDocument.createElement("img"),b.appendChild(f),f.src="images/icons/030_01.png",f.style.position="absolute",f.style.right="0px",f.style.top="0px",pDiv=b.ownerDocument.createElement("div"),b.appendChild(pDiv),
pDiv.style.position="absolute",pDiv.style.right="0px",pDiv.style.bottom="0px",pDiv.style.width="186px",pDiv.style.height="122px",f=pDiv.ownerDocument.createElement("img"),pDiv.appendChild(f),f.src="images/windows/030_03.png",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f=pDiv.ownerDocument.createElement("div"),pDiv.appendChild(f),f.style.position="absolute",f.style.left="6px",f.style.top="8px",f.style.width="174px",f.style.height="107px",e=new Overview(f,g,a,"174px","107px",4),
e.getMapBase().AddLayer(d)):b.style.display=""==b.style.display?"none":""}}
function MagnifierBase(a,d,b,e,f){this.Visible=function(a){a?this.Show():this.Hide()};this.IsVisible=function(){return"hidden"!=k.style.visibility};this.Hide=function(){k.style.visibility="hidden"};this.Show=function(){k.style.visibility="visible"};this.getMapBase=function(){return g};this.ViewAt=function(a,b,d){var m=l.FromMapPoint(a,b),A=m.Y-s;k.style.left=m.X-h+"px";k.style.top=A+"px";g.MoveMapTo(a,b);t.putScale(e.getScale()*Math.pow(2,f));g.RefreshMap(d)};this.RebuildElement=function(){var a=
parseInt(k.style.left),b=parseInt(k.style.top),a=l.ToMapPoint(h+a,s+b);this.ViewAt(a.X,a.Y,!0)};this.UpdateElement=function(a){if(m&&this.IsVisible){a=parseInt(k.style.left);var b=parseInt(k.style.top);a=l.ToMapPoint(h+a,s+b);this.ViewAt(a.X,a.Y,!1)}};var g,k,l,h=0,s=0,m=!0;l=d;pDoc=a.ownerDocument;pTbl=k=pDoc.createElement("table");a.appendChild(pTbl);pTbl.style.position="absolute";pTbl.style.left="0px";pTbl.style.top="0px";pTbl.border=0;pTbl.cellPadding=0;pTbl.cellSpacing=0;pTbl.unselectable="on";
pRow=pTbl.insertRow(-1);pCell=pRow.insertCell(-1);pCell.style.position="absolute";a=new DragTracker(pTbl,pTbl);a.MoveEvent=FuncAdapter(this,function(){this.UpdateElement()});a.DropEvent=FuncAdapter(this,function(){this.RebuildElement()});pImg=pDoc.createElement("IMG");pCell.appendChild(pImg);pImg.onmousedown=function(){return!1};pImg.galleryImg=!1;pImg.hideFocus=!0;pImg.style.MozUserSelect="none";pImg.style.position="absolute";pImg.style.left="0px";pImg.style.top="0px";pImg.border=0;pImg.src="images/windows/030_03.png";
h=87;s=54;pDiv=pDoc.createElement("DIV");pCell.appendChild(pDiv);pDiv.style.position="absolute";pDiv.style.left="6px";pDiv.style.top="8px";pDiv.style.width="174px";pDiv.style.height="107px";pDiv.style.background="white";pDiv.style.overflow="hidden";if(b){var t=new ScaleTransformation(1);t.putBaseScaleX(e.getBaseScaleX());t.putBaseScaleY(e.getBaseScaleY());t.putScale(e.getScale()*Math.pow(2,f));g=new MapBase(pDiv,t,"0px","0px","174px","107px");g.AddLayer(b)}this.ViewAt(l.getCenterX(),l.getCenterY(),
!0)}function MagnifierTool(a,d){var b;this.MapCommand=function(e,f,g){null==b?(b=new MagnifierBase(f.getHPackage(),f,d,a,2),f.AddElement(b),f.RefreshMap(!0)):b.IsVisible()?b.Hide():b.Show()}}
function PanTool(a,d){var b,e,f=!1;this.ExitMapEvent=null;this.IsMapAction=function(){return f};this.InitMapEvent=function(g){var k=g.getHObject(),l=function(a){var d=a.screenX-b,f=a.screenY-e;b=a.screenX;e=a.screenY;g.MoveMapTo(g.getCenterX()-g.ToMapDistX(d),g.getCenterY()-g.ToMapDistY(f));g.RefreshMap(!1)},h=function(a){DetachEvent(k,"mousemove",l,!0);DetachEvent(k,"mouseup",h,!1);g.RefreshMap(!0);f=!1},s=function(a){util.disableDefault(a);f=!0;b=a.screenX;e=a.screenY;AttachEvent(k,"mouseup",h,
!1);AttachEvent(k,"mousemove",l,!0)},m=function(b){a&&(f=!0,b=g.getCursorPosition(b),b=g.ToMapPoint(b.X,b.Y),g.MoveToAnimation(b,g.getScale(),function(){f=!1}))},t=function(a){if(d){f=!0;var b=g.getCursorPosition(a),b=g.ToMapPoint(b.X,b.Y),e=g.getScale(),h=a.wheelDelta?a.wheelDelta:-a.detail;a=0;0<h?a=1:0>h&&(a=-1);h=1;h=g.getTransformation();h=null!=h&&null!=h.getLevelScale&&null!=h.getMapLevel?h.getLevelScale(h.getMapLevel()+a)/e:Math.pow(2,a);e*=h;b=new MapPoint((g.getCenterX()-b.X)/h+b.X,(g.getCenterY()-
b.Y)/h+b.Y);g.MoveToAnimation(b,e,function(){f=!1})}};this.ExitMapEvent=function(){d&&DetachEvent(k.ownerDocument,"mousewheel",t,!1);DetachEvent(k,"mousedown",s,!1);a&&DetachEvent(k,"dblclick",m,!1)};AttachEvent(k,"mousedown",s,!1);a&&AttachEvent(k,"dblclick",m,!1);d&&AttachEvent(k.ownerDocument,"mousewheel",t,!1)}}
function ZoomTool(a){this.ExitMapEvent=null;this.InitMapEvent=function(d){var b=d.getHObject(),e=function(b,e,f,h){if(0!=a){var s=d.ToMapPoint(0,0),m=d.ToMapPoint(d.getClientWidth(),d.getClientHeight()),t=Math.min((m.X-s.X)/(f-b),(m.Y-s.Y)/(h-e));b=s.X+(s.X-b)*t;f=m.X+(m.X-f)*t;e=s.Y+(s.Y-e)*t;h=m.Y+(m.Y-h)*t}d.ZoomMapTo(new MapEnvelope(b,e,f,h));d.RefreshMap(!0)},f=function(a){RectangleTracker(d,a,e)};this.ExitMapEvent=function(){DetachEvent(b,"mousedown",f,!1)};AttachEvent(b,"mousedown",f,!1)}}
function FullExtentTool(){this.MapCommand=function(a,d,b){d.ZoomMapTo(d.getExtent());d.RefreshMap(!0)}}function ZoomLastTool(a,d){this.MapCommand=null;this.InitialMapBase=function(b){this.MapCommand=d?function(d,f,g){a.PrevLocation(b)}:function(d,f,g){a.NextLocation(b)}}}
var MapZoomStep=function(a){function d(a,d,e){d.length>(d==b?1:0)&&(pLocate=d.pop())&&(e.push(pLocate),0<b.length?(f=!1,pLocate=b[b.length-1],a.MoveMapTo(pLocate.X,pLocate.Y),a.putScale(pLocate.Level),a.RefreshMap(!0),f=!0):(pLocate=e.pop(),d.push(pLocate)))}this.RebuildElement=this.RemoveSelf=null;var b=[],e=[];this.MapCommand=this.RebuildElement=null;var f=!0;this.PrevLocation=function(a){d(a,b,e)};this.NextLocation=function(a){d(a,e,b)};this.RebuildElement=function(){if(f)for(b.push({X:a.getCenterX(),
Y:a.getCenterY(),Level:a.getScale()});0<e.length;)e.pop()};this.Clear=function(){for(;0<b.length;)b.pop();for(;0<e.length;)e.pop()};this.RebuildElement();a.AddElement(this)};
function XYLocateTool(){var a=null;this.MapCommand=function(d,b,e){if(null==a){a=new SWGPanel(document.body,0,!0,!0);a.setClosedEvent(function(){a=null});a.putTitle("XY Location");d=a.getViewFrame();e=d.ownerDocument.createElement("TABLE");d.appendChild(e);e.width="240px";e.border="0";e.cellSpacing="0";e.cellPadding="2";e.unselectable="on";e.style.fontSize="8pt";pRow=e.insertRow(-1);pCell=pRow.insertCell(-1);pCell=pRow.insertCell(-1);pCell.innerHTML="Input X, Y values";pRow=e.insertRow(-1);pCell=
pRow.insertCell(-1);pCell.innerHTML="X";pCell=pRow.insertCell(-1);var f=pCell.ownerDocument.createElement("input");f.type="text";pCell.appendChild(f);f.value=b.getCenterX();f.style.fontSize="8pt";pRow=e.insertRow(-1);pCell=pRow.insertCell(-1);pCell.innerHTML="Y";pCell=pRow.insertCell(-1);var g=pCell.ownerDocument.createElement("input");g.type="text";pCell.appendChild(g);g.value=b.getCenterY();g.style.fontSize="8pt";pRow=e.insertRow(-1);pCell=pRow.insertCell(-1);pCell=pRow.insertCell(-1);d=pCell.ownerDocument.createElement("input");
d.type="button";pCell.appendChild(d);d.value="Locate";AttachEvent(d,"click",function(){b.MoveMapTo(parseFloat(f.value),parseFloat(g.value));b.RefreshMap(!0)},!1);pCell.appendChild(pCell.ownerDocument.createTextNode(" "));d=pCell.ownerDocument.createElement("input");d.type="button";pCell.appendChild(d);d.value="Current Position";AttachEvent(d,"click",function(){f.value=b.getCenterX();g.value=b.getCenterY()},!1);a.FitFrameSize();a.CenterWindow()}}};function initLocationArrayHandler(a,d){function b(){a.BOTTOM_CENTER.forEach(function(a,b){var e=parseInt(a.clientWidth,10);parseInt(a.clientHeight,10);e=0<=d.getMapSize().width/2-e/2?d.getMapSize().width/2-e/2:0;a.style.right="auto";a.style.left=e+"px";a.style.top="auto";a.style.bottom="0px"})}function e(){var b=0;a.BOTTOM_LEFT.forEach(function(a,d){var e=parseInt(a.scrollWidth,10);parseInt(a.scrollHeight,10);b+=e;a.style.right="auto";a.style.left=b-e+"px";a.style.top="auto";a.style.bottom="0px"})}
function f(){var b=0;a.BOTTOM_RIGHT.forEach(function(a,d){var e=parseInt(a.clientWidth,10);parseInt(a.clientHeight,10);b+=e;a.style.left="auto";a.style.right=b-e+"px";a.style.top="auto";a.style.bottom="0px"})}function g(){var b=0;a.TOP_LEFT.forEach(function(a,d){var e=parseInt(a.clientWidth,10);parseInt(a.clientHeight,10);b+=e;a.style.right="auto";a.style.left=b-e+"px";a.style.bottom="auto";a.style.top="0px"})}function k(){a.TOP_CENTER.forEach(function(a,b){var e=parseInt(a.clientWidth,10);parseInt(a.clientHeight,
10);e=0<=d.getMapSize().width/2-e/2?d.getMapSize().width/2-e/2:0;a.style.right="auto";a.style.left=e+"px";a.style.bottom="auto";a.style.top="0px"})}function l(){var b=0;a.TOP_RIGHT.forEach(function(a,d){var e=parseInt(a.clientWidth,10);parseInt(a.clientHeight,10);b+=e;a.style.left="auto";a.style.right=b-e+"px";a.style.bottom="auto";a.style.top="0px"})}function h(){var b=0;a.LEFT_TOP.forEach(function(d,e){parseInt(d.clientWidth,10);var f=parseInt(d.clientHeight,10);b+=f;var g=0,g=0<a.TOP_LEFT.getLength()?
parseInt(a.TOP_LEFT.getAt(0).clientHeight):0;d.style.bottom="auto";d.style.right="auto";d.style.left="0px";d.style.top=b-f+g+"px"})}function s(){a.LEFT_CENTER.forEach(function(a,b){parseInt(a.clientWidth,10);var e=parseInt(a.clientHeight,10),e=0<=d.getMapSize().height/2-e/2?d.getMapSize().height/2-e/2:0;a.style.bottom="auto";a.style.right="auto";a.style.left="0px";a.style.top=e+"px"})}function m(){var b=0;a.LEFT_BOTTOM.forEach(function(d,e){parseInt(d.clientWidth,10);var f=parseInt(d.clientHeight,
10);b+=f;var g=0,g=0<a.BOTTOM_LEFT.getLength()?parseInt(a.BOTTOM_LEFT.getAt(0).clientHeight):0;d.style.top="auto";d.style.right="auto";d.style.left="0px";d.style.bottom=g+b-f+"px"})}function t(){var b=0;a.RIGHT_TOP.forEach(function(d,e){parseInt(d.clientWidth,10);var f=parseInt(d.clientHeight,10);b+=f;var g=0,g=0<a.TOP_LEFT.getLength()?parseInt(a.TOP_LEFT.getAt(0).clientHeight):0;d.style.bottom="auto";d.style.left="auto";d.style.right="0px";d.style.top=g+b-f+"px"})}function n(){a.RIGHT_CENTER.forEach(function(a,
b){parseInt(a.clientWidth,10);var e=parseInt(a.clientHeight,10),e=0<=d.getMapSize().height/2-e/2?d.getMapSize().height/2-e/2:0;a.style.bottom="auto";a.style.left="auto";a.style.right="0px";a.style.top=e+"px"})}function q(){var b=0;a.RIGHT_BOTTOM.forEach(function(d,e){parseInt(d.clientWidth,10);var f=parseInt(d.clientHeight,10);b+=f;var g=0,g=0<a.TOP_RIGHT.getLength()?parseInt(a.TOP_RIGHT.getAt(0).clientHeight):0;d.style.top="auto";d.style.left="auto";d.style.right="0px";d.style.bottom=b-f+g+"px"})}
a.BOTTOM_CENTER.array_changed=function(){b()};a.BOTTOM_LEFT.array_changed=function(){e()};a.BOTTOM_RIGHT.array_changed=function(){f()};a.LEFT_BOTTOM.array_changed=function(){m()};a.LEFT_CENTER.array_changed=function(){s()};a.LEFT_TOP.array_changed=function(){h()};a.RIGHT_BOTTOM.array_changed=function(){q()};a.RIGHT_CENTER.array_changed=function(){n()};a.RIGHT_TOP.array_changed=function(){t()};a.TOP_CENTER.array_changed=function(){k()};a.TOP_LEFT.array_changed=function(){g()};a.TOP_RIGHT.array_changed=
function(){l()};a.BOTTOM_CENTER.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.BOTTOM_LEFT.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.BOTTOM_RIGHT.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.LEFT_BOTTOM.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.LEFT_CENTER.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};
a.LEFT_TOP.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.RIGHT_BOTTOM.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.RIGHT_CENTER.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.RIGHT_TOP.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.TOP_CENTER.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.TOP_LEFT.push_event=
function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"};a.TOP_RIGHT.push_event=function(a){a.style.zIndex=TGOS.CTRL_ZINDEX;a.style.position="absolute"}};TGOS.MVCObject=function(){this.binds_=[];this.addListener=function(a,d){};this.bindTo=function(a,d,b,e){this.binds_.push({key:a,target:d,targetKey:b?b:a,noNotify:e?!0:!1})};this.changed=function(a){};this.get=function(a){return this[a]};this.notifiy=function(a){for(var d=0;d<this.binds_.length;d++)if(this.binds_[d].key===a){if(a+"_changed"in this)this[a+"_changed"]();this.changed(a);var b=this.binds_[d].target,e=this.binds_[d].targetKey;if(e+"_changed"in b&&typeof("Function"==b[e+"_changed"]))this.binds_[d].target[e+
"_changed"]();b.changed()}};this.set=function(a,d){if(this[a]!==d){this[a]=d;for(var b=0;b<this.binds_.length;b++){var e=this.binds_[b].target;this.binds_[b].targetKey==a&&(e[a]=d)}this.notifiy(a)}};this.setValues=function(a){for(var d in a)this.set(d,a[d])};this.unbind=function(a){for(var d=0;d<this.binds_.length;d++)this.binds_[d].key===a&&this.binds_.splice(d,1),d--};this.unbindAll=function(){this.binds_=[]}};TGOS.MVCArray=function(){var a=[];this.array_changed=function(){};this.removeAt_event=function(){};this.setAt_event=function(){};this.inserAt_event=function(){};this.push_event=function(a){};this.getAt=function(d){return a[d]};this.getLength=function(){return a.length};this.push=function(d){a.push(d);this.array_changed();this.push_event(d);return a.length};this.pop=function(){var d=a.pop();this.array_changed();return d};this.forEach=function(d){for(var b=0;b<a.length;b++)d.call(this,a[b],b)};this.getArray=
function(){return a};this.removeAt=function(d){var b=a.splice(d,1);this.removeAt_event(d,b);this.array_changed();return b};this.inserAt=function(d,b){a.splice(d,0,b);this.array_changed();this.inserAt_event(d)};this.setAt=function(){var d=a[index];this.array_changed();this.setAt_event(index,d)};this.indexOf=function(d){return a.indexOf(d)}};(function(){var a=new HorizontalDatum(6378137,0),d=new MercatorProjection(0,0,0,1),b=function(a,b){this.map=b;this.add=function(b){a.push(b)};this.remove=function(b){var d=this.map.getMapBase(),e=a.indexOf(b);-1!=e&&(a.splice(e,1),d.getHPackage().contains(b.getElement())&&d.getHPackage().removeChild(b.getElement()))};this.UpdateElement=function(){for(var b=0;b<a.length;b++)a[b].update()};this.containing=function(b){return 0<=a.indexOf(b)}},e=function(a){this.getArray=function(){return a};this.add=
function(a){this.updateArrayOrder(a);this.updateElementOrder(a)};this.push=function(b){a.push(b)};this.sortElement=function(){if(!(1>=a.length)){var b=a[0].getEventElement();if(b)for(var d=1;d<a.length;d++){var e=a[d].getEventElement();e&&(e.insertAfter(b),b=e)}}};this.updateArrayOrder=function(b){var d=a.indexOf(b);0<=d&&a.splice(d,1);d=b.getZIndex();if(0===a.length)a.push(b);else for(var e=0;e<a.length;e++)if(a[e].getZIndex()>d){a.splice(e,0,b);break}else if(e==a.length-1){a.push(b);break}};this.updateElementOrder=
function(b){if(b){var d=b.getEventElement();if(d&&(b=b.getZIndex(),0!==a.length))for(var e=0;e<a.length;e++){var f=a[e].getZIndex(),g=a[e].getEventElement();if(g)if(f>b){d.insertBefore(g);break}else if(e==a.length-1){d.toFront();break}}}};this.containing=function(b){return 0<=a.indexOf(b)};this.remove=function(b){b=a.indexOf(b);a.splice(b,1)};this.UpdateElement=function(){for(var b=0;b<a.length;b++)a[b].update&&a[b].update()};this.RebuildElement=function(){for(var b=0;b<a.length;b++)a[b].redraw&&
a[b].redraw()}};TGOS.TGTransStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR"};TGOS.TGIndexViewControlOptions={NORMAL:"NORMAL",MINIMIZED:"MINIMIZED"};TGOS.tgHash="psSvlnIGPVx/9YKfstFGxagZzwEVNCichhYIorq6xY0=";TGOS.MapTypeScales={EPSG3825:{scales:[500,1E3,2500,5E3,1E4,25E3,5E4,1E5,25E4,5E5,1E6,25E5,5E6,1E7,125E5],levelX:846666.666666667,levelY:-846666.666666667},EPSG3826:{scales:[500,1E3,2500,5E3,1E4,25E3,5E4,1E5,25E4,5E5,
1E6,25E5,5E6,1E7,125E5],levelX:846666.666666667,levelY:-846666.666666667},EPSG3857:{scales:[1128,2257,4514,9028,18056,36112,72224,144448,288896,577792,1155583,2311167,4622334,9244667,18489335,36978669,73957339,147914678,295829355,591658711],levelX:4.00750166855785E7,levelY:-4.00750166855785E7,factors:[0.298582141727292,0.597164283481042,1.19432856696208,2.38865713392417,4.77731426782187,9.55462853564375,19.1092570712875,38.2185141426015,76.4370282851765,152.874056570353,305.748113140706,611.496226281412,
1222.99245256282,2445.98490512565,4891.96981025127,9783.93962050256,19567.8792410051,39135.7584820103,78271.5169640206,156543.033928041]}};TGOS.TGControlPosition={BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT",LEFT_BOTTOM:"LEFT_BOTTOM",LEFT_CENTER:"LEFT_CENTER",LEFT_TOP:"LEFT_TOP",RIGHT_BOTTOM:"RIGHT_BOTTOM",RIGHT_CENTER:"RIGHT_CENTER",RIGHT_TOP:"RIGHT_TOP",TOP_CENTER:"TOP_CENTER",TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT"};TGOS.TGMapTypeControlStyle={DEFAULT:"DEFAULT",
DROPDOWN_MENU:"DROPDOWN_MENU",HORIZONTAL_BAR:"HORIZONTAL_BAR"};TGOS.TGNavigationControlStyle={DEFAULT:"DEFAULT",LARGE:"LARGE",MEDIUM:"MEDIUM",SMALL:"SMALL"};TGOS.TGScaleControlStyle={DEFAULT:"DEFAULT",TEXT:"TEXT",BAR:"BAR",HD:"HD"};TGOS.TGCoordSys={EPSG3825:"EPSG3825",EPSG3826:"EPSG3826",EPSG3857:"EPSG3857"};TGOS.GetMapScale=function(a,b){try{return TGOS.MapTypeScales[a].scales[TGOS.MapTypeScales[a].scales.length-b]}catch(d){throw"[GetMapScale] Invalid Parameters";}};TGOS.TGOnlineMap=function(f,g,
k){this.getCurrentMapType=function(){return currentMapType};var l,n;this.getMapTypeTag=function(){return S};this.controls={BOTTOM_CENTER:new TGOS.MVCArray,BOTTOM_LEFT:new TGOS.MVCArray,BOTTOM_RIGHT:new TGOS.MVCArray,LEFT_BOTTOM:new TGOS.MVCArray,LEFT_CENTER:new TGOS.MVCArray,LEFT_TOP:new TGOS.MVCArray,RIGHT_BOTTOM:new TGOS.MVCArray,RIGHT_CENTER:new TGOS.MVCArray,RIGHT_TOP:new TGOS.MVCArray,TOP_CENTER:new TGOS.MVCArray,TOP_LEFT:new TGOS.MVCArray,TOP_RIGHT:new TGOS.MVCArray};this.getMapSize=function(){var a=
parseInt(G.offsetWidth),b=parseInt(G.offsetHeight);return new TGOS.TGSize(a,b)};this.IndexViewControl={Show:function(a){ba.Show(a)},Minimize:function(){ba.Minimize()}};this.setCoordSys=function(a){a instanceof TGOS.TGCoordSys&&TGOS.TGEvent.trigger(this,"projection_changed")};this.getDocName=function(){var a;switch(B){case TGOS.TGCoordSys.EPSG3826:a=TGOS.MapTypeDocumentName;S="97";break;case TGOS.TGCoordSys.EPSG3825:a=TGOS.MapTypeDocumentNameTWD97_119;S="97_119";break;case TGOS.TGCoordSys.EPSG3857:a=
TGOS.MapTypeDocumentNameGoogle,S="google"}return a};this.getCoordSys=function(){return B};this.getOPackage=function(){return M};this.getMapOptions=function(){return J};this.getMapTypeId=function(){return K};this.getHPackage=function(){return G};this.getHPack=function(){return H.getHPackage()};this.getHObj=function(){return H.getHObject()};this.getHMap=function(){return H.getHObject()};this.getMapBase=function(){return H};this.getMap=function(){return this};this.ZoomTo=function(a){C(a)};this.ZoomIn=
function(){C(V.getMapLevel()+1)};this.ZoomOut=function(){C(V.getMapLevel()-1)};this.setOptions=function(a){var b=function(a){V.setMapBoundsLevel(a);P.setMapBounds(a);H.RefreshMap(!0)},d=function(a){"string"==typeof a&&(H.setColor(a),J.backgroundColor=a)},e=function(a){"boolean"==typeof a&&(a?(ua.display(!1),ga.display(!1),aa.display(!1)):(ua.display(!0),ga.display(!0),aa.display(!0)),J.disableDefaultUI=a,H.RefreshMap(!0))},f=function(a){"boolean"==typeof a&&(L=a,J.scrollwheel=a,P.OpenCloseWheel(a))},
g=function(a){"boolean"==typeof a&&(ga.display(a),J.mapTypeControl=a)},h=function(a){ga.setOptions(a);J.mapTypeControlOptions=a;H.RefreshMap(!0)},k=function(a){"boolean"==typeof a&&(aa.display(a),J.navigationControl=a);H.RefreshMap(!0)},l=function(a){aa.setOptions(a);J.navigationControlOptions=a},m=function(a){"boolean"==typeof a&&(ua.display(a),J.scaleControl=a)},u=function(a){ua.setOptions(a);J.scaleControlOptions=a},n=function(a){"boolean"==typeof a&&(ba.Show(a),J.indexViewControl=a)},q=function(a){a==
TGOS.TGIndexViewControlOptions.MINIMIZED&&(ba.Minimize(),J.indexViewControlOptions=a)},t=function(a){"boolean"==typeof a&&(O=a,J.draggable=a,P.OpenCloseMove(a))},s=function(a){"boolean"==typeof a&&(P.allowKeyboard(a),J.keyboardShortcuts=a)},x=function(a){"boolean"==typeof a&&(P.setDragInertia(a),J.dragInertia=a)},y=function(a){"string"==typeof a&&(P.changeDraggableCursor(a),J.draggableCursor=a)},v=function(a){"string"==typeof a&&(P.changeDraggingCursor(a),J.draggingCursor=a)};void 0!=a&&(void 0!=
a.backgroundColor&&d(a.backgroundColor),void 0!=a.disableDefaultUI&&e(a.disableDefaultUI),void 0!=a.scrollwheel&&f(a.scrollwheel),void 0!=a.mapTypeControl&&g(a.mapTypeControl),void 0!=a.mapTypeControlOptions&&h(a.mapTypeControlOptions),void 0!=a.navigationControl&&k(a.navigationControl),void 0!=a.navigationControlOptions&&l(a.navigationControlOptions),void 0!=a.scaleControl&&m(a.scaleControl),void 0!=a.scaleControlOptions&&u(a.scaleControlOptions),void 0!=a.indexViewControl&&n(a.indexViewControl),
void 0!=a.indexViewControlOptions&&q(a.indexViewControlOptions),void 0!=a.draggable&&t(a.draggable),void 0!=a.keyboardShortcuts&&s(a.keyboardShortcuts),void 0!=a.draggableCursor&&y(a.draggableCursor),void 0!=a.dragInertia&&x(a.dragInertia),void 0!=a.draggingCursor&&v(a.draggingCursor),void 0!=a.center&&I.setCenter(a.center),void 0!==a.maxZoom&&(V.setMapMaxLevel(a.maxZoom),H.RefreshMap(!0)),void 0!==a.minZoom&&(V.setMapMinLevel(a.minZoom),H.RefreshMap(!0)),void 0!=a.dbClickZoomIn&&P.OpenCloseDblClick(a.dbClickZoomIn),
void 0!==a.mapBounds&&b(a.mapBounds))};this.freezeMap=function(){P.ExitMapEvent();ca=!0};this.unFreezeMap=function(){ca=!1;P.InitMapEvent()};this.loopThroughOverlay=function(){};this.resize=function(a,b){G.style.width=a+"px";G.style.height=b+"px";l=G.clientWidth;n=G.clientHeight};this.getBoundary=function(){return H.getExtent()};this.getLevel=function(){return V.getMapLevel()};this.getDiv=function(){return sa};this.getEventElement=function(){return this.getHObj()};this.getTransformation=function(){return V};
this.fitBounds=function(b){if(null!=b.left&&null!=b.top&&null!=b.right&&null!=b.bottom){var e={X:0,Y:0},f={X:0,Y:0};"google"==S?(e=d.Forward(a,new CPoint3(b.left,b.top,0)),f=d.Forward(a,new CPoint3(b.right,b.bottom,0))):(e.X=b.left,e.Y=b.top,f.X=b.right,f.Y=b.bottom);TGOS.moveMapTo_(this,(f.X+e.X)/2,(f.Y+e.Y)/2);b=Number(G.clientHeight)/(f.Y-e.Y);H.putScale(Math.min(Math.abs(Number(G.clientWidth)/(f.X-e.X)),Math.abs(b)));V.FitLevel();H.RefreshMap(!0)}};this.getBounds=function(){var a=l,b=n,d=H.ToMapPoint(0,
0),a=H.ToMapPoint(a,b),e,f,g,h;switch(B){case TGOS.TGCoordSys.EPSG3857:f=TGOS.GooToWGS84(d.x,d.y);d=TGOS.GooToWGS84(a.x,a.y);e=f.x;f=f.y;g=d.x;h=d.y;break;case TGOS.TGCoordSys.EPSG3826:e=d.x;f=d.y;g=a.x;h=a.y;break;case TGOS.TGCoordSys.EPSG3825:e=d.x,f=d.y,g=a.x,h=a.y}return new TGOS.TGEnvelope(e,f,g,h)};this.getCenter=function(a){a=H.getCenterX();var b=H.getCenterY(),d,e;switch(B){case TGOS.TGCoordSys.EPSG3857:e=TGOS.GooToWGS84(a,b);d=e.x;e=e.y;break;case TGOS.TGCoordSys.EPSG3826:d=a;e=b;break;case TGOS.TGCoordSys.EPSG3825:d=
a,e=b}return new TGOS.TGPoint(d,e)};this.setCenter=function(b){switch(B){case TGOS.TGCoordSys.EPSG3826:TGOS.moveMapTo_(this,b.x,b.y);break;case TGOS.TGCoordSys.EPSG3825:TGOS.moveMapTo_(this,b.x,b.y);break;case TGOS.TGCoordSys.EPSG3857:b=d.Forward(a,new CPoint3(b.x,b.y,0)),TGOS.moveMapTo_(this,b.X,b.Y)}H.RefreshMap(!0)};this.getZoom=function(){return V.getMapLevel()};this.setZoom=function(a){this.ZoomTo(a)};this.setMapTypeId=function(a){if(K!==a){var b=R,d=F?J.backgroundColor:TGOS.MapTypeBackgroundColor[a];
J.backgroundColor=d;H.setColor(d);ba.setColor(d);for(d=0;d<b.length;d++)b[d].skip||(b[d].mapTypeId==a?b[d].putVisible(!0):b[d].putVisible(!1));TGOS.TGEvent.trigger(this,"maptypeid_changed");K=a;b=V.getMapLevel();this.getCoordSys();V.getMapMinLevel();d=V.getMapMaxLevel();b>d&&(b=d);V.putMapLevel(b);ga.setActiveType(a);H.RefreshMap(!0)}};this.panBy=function(a,b){P.panBy(a,b);H.RefreshMap(!0)};this.panToBounds=function(a){if(null!=a.left&&null!=a.top&&null!=a.right&&null!=a.bottom){var b,d;switch(B){case TGOS.TGCoordSys.EPSG3857:a=
TGOS.WGS84ToGoo(a.left,a.top);b=a.x;d=a.y;break;case TGOS.TGCoordSys.EPSG3826:b=a.left;d=a.top;break;case TGOS.TGCoordSys.EPSG3825:b=a.left,d=a.top}TGOS.moveMapTo_(this,b,d);H.RefreshMap(!0)}};this.getLayerList=function(){return R};this.setMapAction=function(a,b){if(1==a){var d=H.getHObject(),e=function(a,e,g,h){DetachEvent(d,"mousedown",f,!1);freezeMap||P.InitMapEvent();null!=b&&b(a,e,g,h)},f=function(a){RectangleTracker(H,a,e)};P.ExitMapEvent();AttachEvent(d,"mousedown",f,!1)}else freezeMap||P.InitMapEvent()};
this.getCoordinateString=function(a,b){var d=H.ToMapPoint(a,b);return d.x+","+d.y};this.changeOverviewMapType=function(a,b){for(var d=0;d<a.length;d++)a[d].mapTypeId==b?a[d].putVisible(!0):a[d].putVisible(!1);ba.getMapBase().RefreshMap(!0)};var q=function(a,b){var d=TGOS.MapTypeDocumentName;switch(B){case TGOS.TGCoordSys.EPSG3826:d=TGOS.MapTypeDocumentName;b="97";break;case TGOS.TGCoordSys.EPSG3825:d=TGOS.MapTypeDocumentNameTWD97_119;b="97_119";break;case TGOS.TGCoordSys.EPSG3857:d=TGOS.MapTypeDocumentNameGoogle,
b="google"}for(var e=0;e<a.length;e++)if(a[e]in d){var f=new MapCachedLayer(TGOS.TGMapTypeId_zh_TW[a[e]],d[a[e]],!1,I,b);f.mapTypeId=a[e];R.push(f)}},w=function(a,b){var d=TGOS.MapTypeIndexViewDocumentName;switch(B){case TGOS.TGCoordSys.EPSG3826:d=TGOS.MapTypeIndexViewDocumentName;b="97";break;case TGOS.TGCoordSys.EPSG3825:d=TGOS.MapTypeIndexViewDocumentName;b="97_119";break;case TGOS.TGCoordSys.EPSG3857:d=TGOS.MapTypeIndexViewDocumentNameGoogle,b="google"}for(var e=0;e<a.length;e++)if(a[e]in d){var f=
new MapCachedLayer(TGOS.MapTypeIndexViewId_zh_TW[a[e]],d[a[e]],!1,I,b);f.mapTypeId=a[e];$.push(f)}},z=function(){G.style.width=f.offsetWidth+"px";G.style.height=f.offsetHeight+"px";n=G.clientHeight;l=G.clientWidth;v.style.width=f.offsetWidth+"px";v.style.height=f.offsetHeight+"px";y.style.width=f.offsetWidth+"px";y.style.height=f.offsetHeight+"px";E.style.width=f.offsetWidth+"px";E.style.height=f.offsetHeight+"px";u.setSize(G.offsetWidth,G.offsetHeight);x.setSize(G.offsetWidth,G.offsetHeight);D.setSize(G.offsetWidth,
G.offsetHeight);I.getMapBase().RefreshMap(!0);for(var a in I.controls)I.controls[a].array_changed();TGOS.TGEvent.trigger(I,"idle")},A=function(){M=document.createElement("div");G.appendChild(M);M.style.position="absolute";M.style.right="0px";M.style.bottom="0px";M.style.width="145px";M.style.height="145px";M.style.display="inline";M.style.backgroundColor="#ADD8E6";M.style.margin="5px";M.style.border="2px solid";M.style.zIndex=1E7;ba=new Overview(M,H,V,150,150,4);for(var a=0;a<$.length;a++)ba.getMapBase().AddLayer($[a]),
0<a&&$[a].putVisible(!0)},C=function(a){!ca&&V.putMapLevel(a)&&(a=V.getScale(),H.putScale(a),H.RefreshMap(!0))};this.getDrawingContainer=function(){return E};var F;this.setBackgroundColor=function(a){"string"==typeof a&&(F=!0,H.setColor(a),J.backgroundColor=a)};this.getBackgroundColor=function(){return J.backgroundColor};this.initialize_=function(g){this.infoWindowLayer=new b(W,this);this.overlay=new e(Z);if("EPSG3857"==B){S="google";var k=d.Forward(a,new CPoint3(118.9940295414,25.30028310652,0)),
m=d.Forward(a,new CPoint3(122.0064955717,21.896606644941,0));ja=new TGOS.TGEnvelope(m.X,m.Y,k.X,k.Y);var k=TGOS.MapTypeScales.EPSG3857.levelX,m=TGOS.MapTypeScales.EPSG3857.levelY,s=TGOS.MapTypeScales.EPSG3857.scales,C=19}else"EPSG3825"==B?(S="97_119",ja=new TGOS.TGEnvelope(339023.59349082,2425702.7292442,51368.8242689183,2799323.57990279),k=TGOS.MapTypeScales.EPSG3825.levelX,m=TGOS.MapTypeScales.EPSG3825.levelY,s=TGOS.MapTypeScales.EPSG3825.scales):(S="97",ja=new TGOS.TGEnvelope(339023.59349082,2425702.7292442,
51368.8242689183,2799323.57990279),k=TGOS.MapTypeScales.EPSG3826.levelX,m=TGOS.MapTypeScales.EPSG3826.levelY,s=TGOS.MapTypeScales.EPSG3826.scales),C=13;q(N.mapTypeControlOptions.mapTypeIds,S);w(N.mapTypeControlOptions.mapTypeIds,S);G=document.createElement("div");f.appendChild(G);G.style.position="relative";G.style.overflow="hidden";G.style.width=f.offsetWidth+"px";G.style.height=f.offsetHeight+"px";G.style.border="0px";G.style.left="0px";G.style.top="0px";G.unselectable="on";G.className="hpack";
l=G.clientWidth;n=G.clientHeight;V=new TGOS.MapScaleLevel(ha,C,k,m,s);H=new MapBase(G,V);f.style.overflow="hidden";H.AddElement(this.overlay);H.AddElement(this.infoWindowLayer);H.setColor("#a5bfdd");for(k=1;k<R.length;k++)R[k].putVisible(!1);for(k=0;k<R.length;k++)H.AddLayer(R[k]);H.ZoomMapTo(ja);V.FitLevel();initLocationArrayHandler(this.controls,this);A();this.IndexViewControl.Show(!0);k=this.getMapBase().getHObject();this.getMapBase().getHPackage().oncontextmenu=function(){return!1};y=document.createElement("div");
y.style.position="absolute";y.style.width="100%";y.style.height="100%";y.className="tgshadow";k.appendChild(y);x=Raphael(y);v=document.createElement("div");v.style.position="absolute";v.style.width="100%";v.style.height="100%";v.style.zIndex="2147483647";v.className="tgoverlay";k.appendChild(v);u=Raphael(v);E=document.createElement("div");E.style.position="absolute";E.style.left="0px";E.style.top="0px";E.style.width="100%";E.style.height="100%";E.className="tgdraw";E.style.cursor="crosshair";G.appendChild(E);
D=Raphael(E);E.style.display="none";this.changeOverviewMapType($,TGOS.TGMapTypeId.TGOSMAP);X=new TGOS.CopyrightControl(this,TGOS.TGControlPosition.BOTTOM_LEFT);H.AddElement(X);ua=new TGOS.ScaleBarControl(G,H,N.scaleControlOptions.controlPosition,N.scaleControlOptions.scaleControlStyle,this);H.AddElement(ua);ga=new TGOS.MapTypeBarControl(this,N.mapTypeControlOptions,ba,$);aa=new TGOS.LevelBarControl(this.getHPackage(),V,N.navigationControlOptions.controlPosition,N.navigationControlOptions.style,this);
H.AddElement(aa);P=new TGOS.TGMapMove(V,U,O,L,Q,N.draggableCursor,N.draggingCursor,ga,this);P.InitMapEvent(this);this.setOptions(N);this.setOptions(g);H.RefreshMap(!0);window.onresize=function(){TGOS.TGEvent.trigger(I,"resize")};TGOS.TGEvent.addListener(this,"resize",z)};this.removeLayer=function(a){a.putVisible(!1);a=R.indexOf(a);R.splice(a,1)};this.addLayer=function(a,b){a.skip=b;R.push(a);H.AddLayer(a);H.RefreshMap(!0)};this.removeLayer=function(a){a.putVisible(!1);var b=R.indexOf(a);R.splice(b,
1);H.RemoveLayer(a);H.RefreshMap(!0)};this.addWMTSLayer=function(a,b,d,e){a=new TGOS.TGWmtsLayer(b,this,d,e);a.putVisible(!0);a.skip=!0;R.push(a);H.RefreshMap(!0);return a};this.removeWMTSLayer=function(a){a.putVisible(!1);var b=R.indexOf(a);R.splice(b,1);H.RemoveLayer(a);H.RefreshMap(!0)};this.getShadowPaper=function(){return x};this.getPaper=function(){return u};this.getDrawingPaper=function(){return D};var B=g,u,x,D,v,y,E,N={backgroundColor:"#a5bfdd",disableDefaultUI:!1,draggable:!0,scrollwheel:!0,
keyboardShortcuts:!0,draggableCursor:"",draggingCursor:"",mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:"EPSG3825"==B?[TGOS.TGMapTypeId.TGOSMAP,TGOS.TGMapTypeId.NLSCMAP]:[TGOS.TGMapTypeId.TGOSMAP,TGOS.TGMapTypeId.NLSCMAP,TGOS.TGMapTypeId.MOTCMAP,TGOS.TGMapTypeId.F2IMAGE,TGOS.TGMapTypeId.ROADMAP,TGOS.TGMapTypeId.HILLSHADEMIX,TGOS.TGMapTypeId.HILLSHADE],controlPosition:TGOS.TGControlPosition.TOP_RIGHT,mapTypeControlStyle:TGOS.TGMapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,navigationControlOptions:{controlPosition:TGOS.TGControlPosition.LEFT_CENTER,
navigationControlStyle:TGOS.TGNavigationControlStyle.LARGE},scaleControl:!0,scaleControlOptions:{controlPosition:TGOS.TGControlPosition.LEFT_BOTTOM,scaleControlstyle:TGOS.TGScaleControlStyle.DEFAULT},indexViewControl:!1,indexViewControlOptions:TGOS.TGIndexViewControlOptions.MINIMIZED,maxZoom:null,minZoom:null,dbClickZoomIn:!0},J={backgroundColor:"#a5bfdd",disableDefaultUI:!0,draggable:!0,scrollwheel:!0,keyboardShortcuts:!0,draggableCursor:"",dragInertia:!0,draggingCursor:"",mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:[TGOS.TGMapTypeId.TGOSMAP,
TGOS.TGMapTypeId.NLSCMAP,TGOS.TGMapTypeId.MOTCMAP,TGOS.TGMapTypeId.F2IMAGE,TGOS.TGMapTypeId.ROADMAP,TGOS.TGMapTypeId.HILLSHADEMIX,TGOS.TGMapTypeId.HILLSHADE],controlPosition:TGOS.TGControlPosition.RIGHT_TOP,mapTypeControlStyle:TGOS.TGMapTypeControlStyle.DEFAULT},navigationControl:!0,navigationControlOptions:{controlPosition:TGOS.TGControlPosition.LEFT_TOP,navigationControlStyle:TGOS.TGNavigationControlStyle.DEFAULT},scaleControl:!0,scaleControlOptions:{controlPosition:TGOS.TGControlPosition.LEFT_BOTTOM,
scaleControlstyle:TGOS.TGScaleControlStyle.DEFAULT},indexViewControl:!1,indexViewControlOptions:TGOS.TGIndexViewControlOptions.NORMAL,maxZoom:null,minZoom:null,dbClickZoomIn:!0},U=!0,O=!0,L=!0,Q=!1,P=null,H=null,I=this,G=null,M=null,W=[],Z=[],K=TGOS.TGMapTypeId.TGOSMAP,S="97",R=[],$=[],ha=this,sa=f,ja=null,V=null,ca=!1,X=null,aa=null,ga=null,ua=null,ba=null;this.initialize_(k);TGOS.Log("web","A01","")};TGOS.TGOnlineMap.prototype=new TGOS.MVCObject;TGOS.RegisterEvent(TGOS.TGOnlineMap,"bounds_changed center_changed zoom_changed maptypeid_changed tilesloaded click mousedown mousemove mouseout mouseover projection_changed dragstart drag dragend idle resize dblclick rightclick".split(" "));
TGOS.moveMapTo_=function(a,b,d){var e=a.getMapBase().getCenterX(),f=a.getMapBase().getCenterY(),g=a.getBounds().toString();a.getMapBase().MoveMapTo(b,d);var k=a.getBounds().toString();e==b&&f==d||TGOS.TGEvent.trigger(a,"center_changed");g!=k&&TGOS.TGEvent.trigger(a,"bounds_changed")};TGOS.TGIndexViewControl=function(a){this.show=function(b){a.IndexViewControl&&a.IndexViewControl.Show(b)};this.minimize=function(){a.IndexViewControl.minimize()}};TGOS.TGMapMove=function(a,b,d,e,f,g,k,l,A,C){var F,B=
!1,u,x=!1,D=!1,v,y,E,N,J,U,O=!1,L,Q,P=!1,H,I,G=!1,M="",W="",Z=!0,K,S=!1,R=0,$=0,ha=0,sa=null,ja=null,V=null,ca=null,X=function(){var a=ca-ja;$=(V-sa)/50;ha=a/50};this.ExitMapEvent=null;this.IsMapAction=function(){return G};var aa=function(a,b,d){var e=A.getMapBase(),f=e.getCenterX(),g=e.getCenterY(),h=a.x-f,k=a.y-g;d=1E3/d;var l=(new Date).getTime(),m=setInterval(function(){var d=(new Date).getTime();d-l>1E3*b?(TGOS.moveMapTo_(A,a.x,a.y),e.RefreshMap(!0),clearInterval(m)):(d=(d-l)/(1E3*b),e.putCenterX(f+
d*h),e.putCenterY(g+d*k),e.RefreshMap(!1))},d)};this.panBy=function(a,b){var d=A.getMapBase(),e=d.getClientWidth(),f=d.getClientHeight(),g=d.getCenterX()+a,h=d.getCenterY()+b,d=d.FromMapPoint(g,h);0<=d.x&&d.x<=e&&0<=d.y&&d.y<=f?aa({x:g,y:h},0.5,30):TGOS.moveMapTo_(A,g,h)};this.panToBounds=function(a){var b=A.getMapBase();a=b.getClientWidth();var d=b.getClientHeight(),e=b.getCenterX()+offsetX,f=b.getCenterY()+offsetY,b=b.FromMapPoint(e,f);0<=b.x&&b.x<=a&&0<=b.y&&b.y<=d?aa({x:e,y:f},0.5,30):TGOS.moveMapTo_(A,
e,f)};this.setMapBounds=function(a){C=a;a=A.getMapBase();var b=a.getCenterX(),d=a.getCenterY();if(C){var b=a.getCenterX(),d=a.getCenterY(),e=0,f=0,g=A.getBounds();g.left<C.left?(e=g.left-C.left,b-=e):g.right>C.right&&(e=g.right-C.right,b-=e);g.top>C.top?(f=g.top-C.top,d-=f):g.bottom<C.bottom&&(f=g.bottom-C.bottom,d-=f);if(0!=e||0!=f)TGOS.moveMapTo_(A,b,d),a.RefreshMap(!0)}};this.allowKeyboard=function(a){"boolean"==typeof a&&(Z=a)};this.clearNum=function(){c=0};var ga=!0;this.setDragInertia=function(a){"boolean"==
typeof a&&(ga=a)};this.changeDraggableCursor=function(a){M=a;K.style.cursor=M};this.changeDraggingCursor=function(a){W=a};this.InitMapEvent=function(g){var k=g.getMapBase();K=k.getHObject();k.getHPackage();var l=[],q=function(a){setTimeout(function(){x=!1},a)},w=function(a,b,d){var e=20;d&&(e=d);return Math.abs(a.X-b.X)<=e&&Math.abs(a.Y-b.Y)<=e?!0:!1},z=function(a,b){var d=k.getCursorPosition(a),e=k.getCursorPosition(b),f=parseFloat((d.x+e.x)/2),g=parseFloat((d.y+e.y)/2),d=Math.sqrt((d.x-e.x)*(d.x-
e.x)+(d.y-e.y)*(d.y-e.y));return{scrCenter:{X:f,Y:g},length:d}},aa=function(a){var b;a.preventDefault();l=a.touches;qa&&qa.stop();ha=$=0;a=l[0];!0==x&&!0==w({X:l[0].clientX,Y:l[0].clientY},F)&&(D=!0,x=!1,u=a);F={X:a.clientX,Y:a.clientY};if(1<l.length){b=z(a,l[1]);a=b.scrCenter;var d=b.length;v=b=k.ToMapPoint(a.X,a.Y);y=a;E=d;N=k.getCellSizeX();J=k.getCellSizeY();U=k.getScale();O=!0}else V=l[0].clientX,ca=l[0].clientY,sa=V,ja=ca,za=setInterval(X,50);B=!0},xa=function(a){a.preventDefault();l=a.touches;
a=l[0];var b=a.clientX-F.X,d=a.clientY-F.Y;1<l.length?P||(P=!0,b=l[1],O&&(a=z(a,b),b=a.scrCenter,w(b,y,5)||(a=parseFloat(a.length/E),d=k.getClientWidth()/2-b.X,b=k.getClientHeight()/2-b.Y,b=new TGOS.TGPoint(v.x+d*N/a,v.y+b*J/a),L=new TGOS.TGPoint(b.x,b.y),Q=U*a,k.putScale(Q),A.setCenter(new TGOS.TGPoint(L.x,L.y)),k.RefreshMap(!1))),P=!1):(F={X:a.clientX,Y:a.clientY},sa=V,ja=ca,V=a.clientX,ca=a.clientY,B&&(TGOS.moveMapTo_(A,k.getCenterX()-k.ToMapDistX(b),k.getCenterY()-k.ToMapDistY(d)),k.RefreshMap(!1)))},
ea=function(a){a.preventDefault();l=a.touches;if(!0==D)D=!1,ra(u);else{if(null!=L&&null!=Q)k.putScale(Q),A.setCenter(new TGOS.TGPoint(L.x,L.y));else if(ga){var b=Math.abs(Math.sqrt($*$+ha*ha)),d=-$;a=-ha;if(b>Ma){b=d*na;a*=na;var e=k.getCenterX(),f=k.getCenterY(),g=k.ToMapDistX(b),h=k.ToMapDistY(a);qa=TGOS.fx.createAnimation({easing:TGOS.fx.easing.easeOutQuad,type:"setTimeout",duration:na,repeat:!1,onAnimation:function(a){TGOS.moveMapTo_(A,e+g*a,f+h*a);k.RefreshMap(!1)},onEnd:function(){k.RefreshMap(!0);
TGOS.TGEvent.trigger(A,"idle")}});qa.play()}else TGOS.TGEvent.trigger(A,"idle")}else k.RefreshMap(!0),TGOS.TGEvent.trigger(A,"idle");Q=L=null;O=B=!1;x=!0;q(500)}},Da=function(a){a.preventDefault();l=[];k.RefreshMap(!0);B=!1},Oa=function(a){util.disableDefault(a);if(d){var b=a.screenX-H,e=a.screenY-I;H=a.screenX;I=a.screenY;sa=V;ja=ca;V=a.screenX;ca=a.screenY;S=!0;K.style.cursor=W?W:"url("+TGOS.RES_PATH+"catch.cur),default";a=k.getCenterX()-k.ToMapDistX(b);e=k.getCenterY()-k.ToMapDistY(e);TGOS.moveMapTo_(A,
a,e);k.RefreshMap(!1);1>R&&TGOS.TGEvent.trigger(A,"dragstart");TGOS.TGEvent.trigger(A,"drag");R++}},qa,na=500,Ma=0.08,ya=function(a){util.disableDefault(a);if(d){DetachEvent(K,"mousemove",Oa,!0);DetachEvent(K,"mouseup",ya,!0);k.RefreshMap(!0);K.style.cursor=M?M:"default";G=!1;if(C){var b=a.screenX-H;a=a.screenY-I;var b=k.getCenterX()-k.ToMapDistX(b),e=k.getCenterY()-k.ToMapDistY(a),f=a=0,g=A.getBounds();g.left<C.left&&(a=g.left-C.left,b-=a);g.right>C.right&&(a=g.right-C.right,b-=a);g.top>C.top&&(f=
g.top-C.top,e-=f);g.bottom<C.bottom&&(f=g.bottom-C.bottom,e-=f);if(0!=a||0!=f)TGOS.moveMapTo_(A,b,e),k.RefreshMap(!1)}else if(ga)if(a=Math.abs(Math.sqrt($*$+ha*ha)),e=-$,b=-ha,a>Ma){a=e*na;var f=b*na,h=k.getCenterX(),l=k.getCenterY(),u=k.ToMapDistX(a),n=k.ToMapDistY(f),b=h+u,e=l+n;qa=TGOS.fx.createAnimation({easing:TGOS.fx.easing.easeOutQuad,type:"setTimeout",duration:na,repeat:!1,onAnimation:function(a){TGOS.moveMapTo_(A,h+u*a,l+n*a);k.RefreshMap(!1)},onEnd:function(){TGOS.TGEvent.trigger(A,"idle")}});
qa.play()}else TGOS.TGEvent.trigger(A,"idle");else TGOS.TGEvent.trigger(A,"idle");clearInterval(za);S&&TGOS.TGEvent.trigger(A,"dragend");TGOS.Log("web","A01","")}},za,va=function(a){util.disableDefault(a);qa&&qa.stop();ha=$=0;V=a.screenX;ca=a.screenY;sa=V;ja=ca;za=setInterval(X,50);d&&(G=!0,S=!1,R=0,AttachEvent(K,"mouseup",ya,!0),AttachEvent(K,"mousemove",Oa,!0),K.focus())},Aa=function(a){util.disableDefault(a);d&&(G=!0,H=a.screenX,I=a.screenY)},ra=function(d){util.disableDefault(d);b&&(G=!0,d=k.getCursorPosition(d),
d=k.ToMapPoint(d.x,d.y),a.putMapLevel(a.getMapLevel()+1),TGOS.moveMapTo_(A,d.x,d.y),k.RefreshMap(!0),TGOS.TGEvent.trigger(A,"dblclick"),TGOS.TGEvent.trigger(A,"idle"))},Ga=function(b){util.disableDefault(b);if(e){G=!0;var d=k.getCursorPosition(b),f=k.getClientWidth()/2,g=k.getClientHeight()/2;k.FromMapPoint(f,g);d=k.ToMapPoint(d.x,d.y);f=k.getScale();b=b.wheelDelta?b.wheelDelta:-b.detail;g=0;0<b?g=1:0>b&&(g=-1);a.putMapLevel(a.getMapLevel()+g);b=k.getScale()/f;d=new TGOS.TGPoint((k.getCenterX()-d.x)/
b+d.x,(k.getCenterY()-d.y)/b+d.y);C&&(b=A.getBounds(),b.left<C.left&&(f=b.left-C.left,d.x-=f),b.right>C.right&&(f=b.right-C.right,d.x-=f),b.top>C.top&&(f=b.top-C.top,d.y-=f),b.bottom<C.bottom&&(f=b.bottom-C.bottom,d.y-=f));TGOS.moveMapTo_(A,d.x,d.y);k.RefreshMap(!0);TGOS.TGEvent.trigger(A,"idle")}},ta=0,Ha=function(a){Z&&(ta=0)},Ia=function(a){function b(a,d){TGOS.moveMapTo_(A,k.getCenterX()+a,k.getCenterY()+d);k.RefreshMap(!1)}if(Z){var d=k.getTransformation();ta+=4;24<ta&&(ta=24);var e=1/d.getScaleX()*
ta,f=1/d.getScaleY()*ta;switch(a.keyCode){case 37:b(-e,0);break;case 38:b(0,-f);break;case 39:b(e,0);break;case 40:b(0,f);break;case 107:d.putMapLevel(d.getMapLevel()+1);k.RefreshMap(!0);break;case 109:d.putMapLevel(d.getMapLevel()+-1),k.RefreshMap(!0)}}};this.OpenCloseDblClick=function(a){b&&a||((b=a)?AttachEvent(K,"dblclick",ra,!1):DetachEvent(K,"dblclick",ra,!1))};this.OpenCloseMove=function(a){d&&a||((d=a)?(AttachEvent(K,"mousedown",va,!1),AttachEvent(K,"touchstart",aa,!1),AttachEvent(K,"touchend",
ea,!1),AttachEvent(K,"touchcancel",Da,!1),AttachEvent(K,"touchleave",ea,!1),AttachEvent(K,"touchmove",xa,!1)):(DetachEvent(K,"mousedown",va,!1),DetachEvent(K,"touchstart",aa,!1),DetachEvent(K,"touchend",ea,!1),DetachEvent(K,"touchcancel",Da,!1),DetachEvent(K,"touchleave",ea,!1),DetachEvent(K,"touchmove",xa,!1)))};this.OpenCloseWheel=function(a){e&&a||(a?AttachEvent(K,"mousewheel",Ga,!1):DetachEvent(K,"mousewheel",Ga,!1),e=a)};this.OpenClosekeyboard=function(a){f&&a||(f=a,!1==a?(DetachEvent(K,"keydown",
Ia,!1),DetachEvent(K,"keyup",Ha,!1)):(AttachEvent(K,"keydown",Ia,!1),AttachEvent(K,"keyup",Ha,!1)))};this.ExitMapEvent=function(){e&&DetachEvent(K,"mousewheel",Ga,!1);DetachEvent(K,"mousedown",va,!1);DetachEvent(K,"mousedown",Aa,!1);b&&DetachEvent(K,"dblclick",ra,!1);DetachEvent(K,"touchstart",aa,!1);DetachEvent(K,"touchend",ea,!1);DetachEvent(K,"touchcancel",Da,!1);DetachEvent(K,"touchleave",ea,!1);DetachEvent(K,"touchmove",xa,!1)};AttachEvent(K,"mousedown",va,!1);AttachEvent(K,"mousedown",Aa,!1);
AttachEvent(K,"contextmenu",function(a){},!1);AttachEvent(K,"keydown",Ia,!1);AttachEvent(K,"keyup",Ha,!1);b&&AttachEvent(K,"dblclick",ra,!1);e&&AttachEvent(K,"mousewheel",Ga,!1);AttachEvent(K,"touchstart",aa,!1);AttachEvent(K,"touchend",ea,!1);AttachEvent(K,"touchcancel",Da,!1);AttachEvent(K,"touchleave",ea,!1);AttachEvent(K,"touchmove",xa,!1)}};TGOS.MapScaleLevel=function(a,b,d,e,f){function g(a){for(var b=0,b=0;b<u.length-1&&!(a<u[b+1]);b++);if(b<u.length-1)var d=u[b],e=u[b+1],b=b+Math.log(a/d)/
Math.log(e/d);return b}function k(a){var b=Math.floor(Math.max(0,Math.min(a,u.length-2))),d=u[b];return d*Math.pow(u[b+1]/d,a-b)}var l=1,A=b,C=null,F=256/d,B=256/e,u=[];for(b=0;b<f.length;b++)u.push(f[f.length-1]/f[b]);u.reverse();var x=1,D;this.FitLevel=function(){this.putMapLevel(Math.round(l))};this.setMapBoundsLevel=function(b){if(D=b)b=a.getMapBase(),b.getClientHeight(),b=b.getClientWidth()/(D.right-D.left),this.setMapMinLevel(Math.ceil(g(b/F)))};this.getBaseScaleX=function(){return F};this.putBaseScaleX=
function(a){F=a};this.getBaseScaleY=function(){return B};this.putBaseScaleY=function(a){B=a};this.getMapMinLevel=function(){return C};this.setMapMaxLevel=function(b){A=null==b?TGOS.MapTypeMaxZoomLevel[a.getCoordSys()][a.getMapTypeId()]:Math.min(b,TGOS.MapTypeMaxZoomLevel[a.getCoordSys()][a.getMapTypeId()]);l>A&&(this.putMapLevel(A),a.setZoom(A))};this.getMapMaxLevel=function(){Math.min(A,TGOS.MapTypeMaxZoomLevel[a.getCoordSys()][a.getMapTypeId()]);return A};this.getLevelNumber=function(){return this.getMapMaxLevel()-
this.getMapMinLevel()};this.setMapMinLevel=function(b){C=null==b?1:b;l<C&&(this.putMapLevel(C),a.setZoom(C))};this.getMapLevel=function(){return l};this.putMapLevel=function(b){var d=a.getMapBase().getCenterX(),e=a.getMapBase().getCenterY(),f=a.getBounds().toString(),g=TGOS.MapTypeMaxZoomLevel[a.getCoordSys()][a.getMapTypeId()],g=null==A?g:g>A?A:g,m=null==C?1:C,u=b>g?g:b<m?m:b;l=u;x=k(l);var n=a.getMapTypeId(),q=a.getCoordSys();TGOS.Log("web","A02",TGOS.TGMapTypeIdCode[n]);"EPSG3826"==q||"EPSG3825"==
q?"TGOSMAP"==n&&13==u&&TGOS.Log("web","A02",TGOS.TGMapTypeIdCode.NLSCMAP):"EPSG3857"==q&&"TGOSMAP"==n&&19==u&&TGOS.Log("web","A02",TGOS.TGMapTypeIdCode.NLSCMAP);u=a.getMapBase().getCenterX();n=a.getMapBase().getCenterY();q=a.getBounds().toString();d==u&&e==n||TGOS.TGEvent.trigger(a,"center_changed");f!=q&&TGOS.TGEvent.trigger(a,"bounds_changed");TGOS.TGEvent.trigger(a,"zoom_changed");return b>g||b<m?!1:!0};this.getScale=function(){return F*x};this.putScale=function(a){this.putMapLevel(g(a/F))};this.getScaleX=
function(){return F*x};this.getScaleY=function(){return B*x};this.getLevelScale=function(a){return F*k(a)}};TGOS.TGTransStatus={OK:"OK",INVALID_REQUEST:"INVALID_REQUEST"};TGOS.TGMaxZoomLevel=function(){this.getMaxZoomLevel=function(a,b,d){return d.call(this,TGOS.MapTypeMaxZoomLevel[b][a])}};Proj4js.defs["EPSG:3826"]="+title=TWD97 TM2+proj=tmerc +lat_0=0 +lon_0=121 +k=0.9999 +x_0=250000 +y_0=0 +ellps=GRS80 +units=\u516c\u5c3a +no_defs";Proj4js.defs["EPSG:3857"]="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs";
Proj4js.defs["EPSG:3825"]="+title=TWD97 TM2 119 +proj=tmerc +lat_0=0 +lo";var f=new Proj4js.Proj("EPSG:3826"),g=new Proj4js.Proj("EPSG:3825"),k=new Proj4js.Proj("EPSG:3857"),l=new Proj4js.Proj("EPSG:4326");TGOS.TWD97toWGS84=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(f,l,d);return d};TGOS.WGS84toTWD97=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(l,f,d);return d};TGOS.TWD97_119toWGS84=function(a,b){var d=new Proj4js.Point(parseFloat(a),
parseFloat(b));Proj4js.transform(g,l,d);return d};TGOS.WGS84toTWD97_119=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(l,g,d);return d};TGOS.TWD97toTWD97_119=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(f,g,d);return d};TGOS.TWD97_119toTWD97=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(EPSG4325,f,d);return d};TGOS.GooToWGS84=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));
Proj4js.transform(k,l,d);return d};TGOS.WGS84ToGoo=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(l,k,d);return d};TGOS.TGTransformation=function(){this.twd97towgs84=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(f,l,d);this.transResult=new TGOS.TGPoint(d.x,d.y);TGOS.Log("web","A06","")};this.wgs84totwd97=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(l,f,d);this.transResult=new TGOS.TGPoint(d.x,
d.y);TGOS.Log("web","A06","")};this.twd97_119towgs84=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(g,l,d);this.transResult=new TGOS.TGPoint(d.x,d.y);TGOS.Log("web","A06","")};this.wgs84totwd97_119=function(a,b){var d=new Proj4js.Point(parseFloat(a),parseFloat(b));Proj4js.transform(l,g,d);this.transResult=new TGOS.TGPoint(d.x,d.y);TGOS.Log("web","A06","")};this.transResult=null}})();(function(){function a(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()}var d=function(a,b){switch(a){case TGOS.TGCoordSys.EPSG3857:var d=TGOS.WGS84ToGoo(b.x,b.y);break;case TGOS.TGCoordSys.EPSG3826:d=b;break;case TGOS.TGCoordSys.EPSG3825:d=b}return d},b=function(a,b,g,k){var l="";g=g.getPath().getPath();var h=k?d(b,g[g.length-1]):d(b,g[0]),h=a.FromMapPoint(h.x,h.y),l=l+"M"+h.x+" "+h.y;for(k=0;k<g.length;k++)h=d(b,g[k]),h=a.FromMapPoint(h.x,h.y),l=l+"L"+h.x+" "+h.y;return l+" Z "};TGOS.TGFill=
function(e,f,g){var k=null;if(f instanceof TGOS.TGEnvelope)k="env",bounds=f;else if(f instanceof TGOS.TGCircle)k="circle";else if(f instanceof TGOS.TGPolygon)k="polygon";else return;f.renderer=this;var l=0,h=0,s=e,m=f,t=f.getBounds(),n=!0,q=1,w="#88ff88",z="#000000",A=1,C=1,F=0,B=!0,u=null;this.getEventElement=function(){return null==s?null:v};var x=this;this.markMove=function(b){a(b);var d=s.getMapBase(),e=d.getPackageOffset(),f;switch(s.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:f=d.ToMapPoint(b.clientX-
e.x,b.clientY-e.y);f=TGOS.GooToWGS84(f.x,f.y);f=new TGOS.TGPoint(f.x,f.y);break;case TGOS.TGCoordSys.EPSG3826:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);break;case TGOS.TGCoordSys.EPSG3825:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y)}b=f.x-x.spos.x;f=f.y-x.spos.y;d=m.getBounds();m.transform(1,0,0,1,b-(d.left-x.senv.left),f-(d.top-x.senv.top));x.update()};this.endDrag=function(b){a(b);DetachEvent(document.body,"mousemove",x.markMove,!0);DetachEvent(document.body,"mouseup",x.endDrag,!0)};this.markDrag=
function(b){a(b);var d=s.getMapBase(),e=d.getPackageOffset(),f;switch(s.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:b=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);b=TGOS.GooToWGS84(b.x,b.y);f=new TGOS.TGPoint(b.x,b.y);break;case TGOS.TGCoordSys.EPSG3826:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);break;case TGOS.TGCoordSys.EPSG3825:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y)}x.spos=f;b=m.getBounds();x.senv=new TGOS.TGEnvelope(b.left,b.top,b.right,b.bottom);AttachEvent(document.body,"mousemove",x.markMove,
!0);AttachEvent(document.body,"mouseup",x.endDrag,!0)};this.getDraggable=function(){return this.draggable};this.setDraggable=function(a){this.draggable=a;v&&(a&&v?v.mousedown(this.markDrag):v.unmousedown(this.markDrag))};this.getVisible=function(){return B};this.setVisible=function(a){switch(a){case !0:B=!0;v.show();this.update();this.redraw();break;case !1:v.hide(),B=!1,this.update(),this.redraw()}};this.getMap=function(){return s};this.setMap=function(a){v&&v.remove();if(null==a){if(!s)return;s.overlay.containing(this)&&
s.overlay.remove(this);TGOS.TGEvent.clearInstanceListeners(this);s=null}a instanceof TGOS.TGOnlineMap&&(s=a)};this.getPath=function(){return m};this.setPath=function(a){m=a;this.redraw()};this.getBounds=function(){return t};this.setClickable=function(a){"boolean"===typeof a&&((n=a)?TGOS.TGEvent.releaseEventLock(this,"click"):TGOS.TGEvent.lockEvent(this,"click"),TGOS.TGEvent.trigger(this,"clickable_changed"))};this.getOpacity=function(){return q};this.setOpacity=function(a){q=a;v&&v.attr({"fill-opacity":q})};
this.getClickable=function(){return n};this.getFillColor=function(){return w};this.setFillColor=function(a){w=a;v&&v.attr({fill:w})};this.getStrokeColor=function(){return z};this.setStrokeColor=function(a){z=a;v&&v.attr({stroke:a})};this.getStrokeWeight=function(){return A};this.setStrokeWeight=function(a){A=a;v&&v.attr({"stroke-width":A})};this.getStrokeOpacity=function(){return C};this.setStrokeOpacity=function(a){C=a;v&&v.attr({"stroke-opacity":C})};this.getZIndex=function(){return F};this.setZIndex=
function(a,b){"number"===typeof a&&v&&(F=parseFloat(a),s.overlay.updateArrayOrder(this),s.overlay.updateElementOrder(this),TGOS.TGEvent.trigger(this,"zindex_changed"))};this.update=function(){if(B)switch(k){case "circle":this.updateCircle2();break;case "polygon":this.updatePolygon2();break;case "env":this.updateEnv2()}else v.hide()};this.updateCircle2=function(){var a=m.getRadius(),b=m.getCenter(),d=s.getMapBase();switch(s.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:var e=TGOS.WGS84ToGoo(b.x,b.y),
e=d.FromMapPoint(e.x,e.y);break;case TGOS.TGCoordSys.EPSG3826:e=d.FromMapPoint(b.x,b.y);break;case TGOS.TGCoordSys.EPSG3825:e=d.FromMapPoint(b.x,b.y)}a=d.FromMapDistX(a);v.attr({cx:e.x,cy:e.y,r:a})};this.updateEnv2=function(){var a,b,d,e=s.getMapBase();switch(s.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:a=TGOS.WGS84ToGoo(m.left,m.top);a=a=e.FromMapPoint(a.x,a.y);b=TGOS.WGS84ToGoo(m.left,m.top);d=TGOS.WGS84ToGoo(m.right,m.bottom);var f=Math.abs(e.FromMapDistX(b.x-d.x));b=Math.abs(e.FromMapDistY(b.y-
d.y));break;case TGOS.TGCoordSys.EPSG3826:a=e.FromMapPoint(m.left,m.top);f=Math.abs(e.FromMapDistX(m.left-m.right));b=Math.abs(e.FromMapDistY(m.top-m.bottom));break;case TGOS.TGCoordSys.EPSG3825:a=e.FromMapPoint(m.left,m.top),f=Math.abs(e.FromMapDistX(m.left-m.right)),b=Math.abs(e.FromMapDistY(m.top-m.bottom))}v.attr({x:a.x,y:a.y,width:f,height:b})};this.updatePolygon2=function(){var a=s.getMapBase(),b=m.getExteriorRing().getPath().getPath()[0],b=d(s.getCoordSys(),b),a=a.FromMapPoint(b.x,b.y);v.transform("t"+
(a.x-l)+","+(a.y-h))};this.redraw=function(){if(B){v.show();var a=s.getMapBase().FromMapPoint(100,100);if(a.x||a.y)switch(k){case "circle":this.redrawCircle2();break;case "polygon":this.redrawPolygon2();break;case "env":this.redrawEnv2()}}else v.hide()};this.redrawCircle2=function(){var a=s.getMapBase(),b=m.getCenter(),d=m.getRadius(),e=a.FromMapDistX(d);a.FromMapPoint(b.x,b.y+d);v.attr({fill:w,stroke:z,"fill-opacity":q,"stroke-width":A,"stroke-opacity":C,r:e})};this.redrawEnv2=function(){s.getMapBase();
v.attr({"stroke-width":A,stroke:z,"stroke-opacity":C,fill:w,"fill-opacity":q})};this.redrawPolygon2=function(){var a="",e=s.getMapBase(),f=m.Envelope,g=Math.abs(e.FromMapDistX(f.right-f.left)),k=Math.abs(e.FromMapDistY(f.top-f.bottom)),n=s.getCoordSys(),t=d(n,m.getExteriorRing().getPath().getPath()[0]),x=s.getMapSize().width,D=s.getMapSize().height,B;s.getCoordSys()==TGOS.TGCoordSys.EPSG3857?(B=TGOS.WGS84ToGoo(f.left,f.top),f=TGOS.WGS84ToGoo(f.right,f.bottom),B=e.FromMapPoint(B.x,B.y),f=e.FromMapPoint(f.x,
f.y)):(B=e.FromMapPoint(f.left,f.top),f=e.FromMapPoint(f.right,f.bottom));if(util.intersectRect({left:B.x,top:B.y,right:f.x,bottom:f.y},{left:0,top:0,right:x,bottom:D})){if(v.show(),u!=e.getScale()){u=e.getScale();t=e.FromMapPoint(t.x,t.y);l=t.x;h=t.y;a+=b(e,n,m.getExteriorRing());t=m.getInteriorRings();for(x=0;x<t.length;x++)a+=b(e,n,t[x],!0);v.attr({"stroke-width":A,stroke:z,"stroke-opacity":C,fill:w,"fill-opacity":q,width:g,height:k,path:a})}}else v.hide()};this.getMapBase=function(){if(s)return s.getMapBase()};
var D,v;this.init=function(){s.getMapBase().getHObject();D=s.getPaper();switch(k){case "circle":v=D.circle(200,200,100);break;case "polygon":v=D.path("");break;case "env":v=D.rect(200,200,200,200)}s.overlay.push(this);s.overlay.updateArrayOrder(this);s.overlay.updateElementOrder(this);this.redraw();this.update()};if(void 0!=g){if("undefined"!=typeof g.visible&&"boolean"==typeof g.visible)switch(g.visible){case !0:B=!0;break;case !1:B=!1}"undefined"!=typeof g.path&&g.path instanceof TGOS.TGPolygon&&
(m=g.path);"undefined"!=typeof g.clickable&&"boolean"==typeof g.clickable&&(n=g.clickable);"undefined"!=typeof g.fillColor&&"string"==typeof g.fillColor&&(w=g.fillColor);"undefined"!=typeof g.fillOpacity&&"number"==typeof g.fillOpacity&&(q=g.fillOpacity);"undefined"!=typeof g.strokeWeight&&"number"==typeof g.strokeWeight&&(A=g.strokeWeight);"undefined"!=typeof g.strokeOpacity&&"number"==typeof g.strokeOpacity&&(C=g.strokeOpacity);"undefined"!=typeof g.zIndex&&"number"==typeof g.zIndex&&(F=g.zIndex);
"undefined"!=typeof g.strokeColor&&"string"==typeof g.strokeColor&&(z=g.strokeColor);"undefined"!=typeof g.draggable&&"boolean"==typeof g.draggable&&this.setDraggable(g.draggable)}this.init()};TGOS.RegisterEvent(TGOS.TGFill,"zindex_changed click mousedown mouseup mousemove mouseout mouseover dblclick rightclick".split(" "))})();(function(){function a(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()}TGOS.TGLine=function(d,b,e){var f=new TGOS.TGPoint(0,0),g=d,k=b,l=!0,h=!0,s="#000000",m=1,t=new TGOS.TGEnvelope(0,0,0,0),n=1,q=0,w=0,z=0,A=null,C=this;this.getBounds=function(){this.calEnv();return t};this.markMove=function(b){a(b);var d=g.getMapBase(),e=d.getPackageOffset(),f;switch(g.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);f=TGOS.GooToWGS84(f.x,f.y);f=new TGOS.TGPoint(f.x,
f.y);break;case TGOS.TGCoordSys.EPSG3826:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);break;case TGOS.TGCoordSys.EPSG3825:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y)}b=k.Envelope;k.transform(1,0,0,1,f.x-C.spos.x-(b.left-C.senv.left),f.y-C.spos.y-(b.top-C.senv.top));C.update()};this.endDrag=function(b){a(b);DetachEvent(document.body,"mousemove",C.markMove,!0);DetachEvent(document.body,"mouseup",C.endDrag,!0)};this.markDrag=function(b){a(b);var d=g.getMapBase(),e=d.getPackageOffset(),f;switch(g.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:b=
d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);b=TGOS.GooToWGS84(b.x,b.y);f=new TGOS.TGPoint(b.x,b.y);break;case TGOS.TGCoordSys.EPSG3826:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);break;case TGOS.TGCoordSys.EPSG3825:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y)}C.spos=f;b=k.Envelope;C.senv=new TGOS.TGEnvelope(b.left,b.top,b.right,b.bottom);AttachEvent(document.body,"mousemove",C.markMove,!0);AttachEvent(document.body,"mouseup",C.endDrag,!0)};this.getDraggable=function(){return this.draggable};this.setDraggable=
function(a){this.draggable=a;F&&(a&&F?F.mousedown(this.markDrag):F.unmousedown(this.markDrag))};this.getEventElement=function(){return F};this.calEnv=function(){for(var a=k.getPath(),b=Infinity,d=-Infinity,e=-Infinity,f=Infinity,g=0;g<a.length;g++)b=Math.min(b,a[g].x),f=Math.min(f,a[g].y),d=Math.max(d,a[g].x),e=Math.max(e,a[g].y);t.left=b;t.right=d;t.top=e;t.bottom=f;return new TGOS.TGEnvelope(b,e,d,e)};this.getMap=function(){return g};this.setMap=function(a){F&&F.remove();if(null==a){if(!g)return;
g.overlay.containing(this)&&g.overlay.remove(this);TGOS.TGEvent.clearInstanceListeners(this);g=null}a instanceof TGOS.TGOnlineMap&&(g=a,g.overlay.add(this))};this.getPath=function(){return k};this.setPath=function(a){a instanceof TGOS.TGLineString&&(k=a,this.redraw())};this.getVisible=function(){return l};this.setVisible=function(a){switch(a){case !0:l=!0;this.update();this.redraw();break;case !1:l=!1,this.update(),this.redraw()}};this.getClickable=function(){return h};this.setClickable=function(a){"boolean"===
typeof a&&((h=a)?TGOS.TGEvent.releaseEventLock(this,"click"):TGOS.TGEvent.lockEvent(this,"click"),TGOS.TGEvent.trigger(this,"clickable_changed"))};this.getStrokeColor=function(){return s};this.setStrokeColor=function(a){s=a;F&&F.attr({stroke:s})};this.getStrokeOpacity=function(){return m};this.setStrokeOpacity=function(a){m=a;F&&F.attr({"stroke-opacity":m})};this.getStrokeWeight=function(){return n};this.setStrokeWeight=function(a){n=a;F&&F.attr({"stroke-width":n})};this.getZIndex=function(){return q};
this.setZIndex=function(a,b){"number"===typeof a&&F&&(q=parseFloat(a),g.overlay.updateArrayOrder(this),g.overlay.updateElementOrder(this),TGOS.TGEvent.trigger(this,"zindex_changed"))};this.redraw=function(){if(l){var a=g.getMapBase(),a=a.FromMapPoint(100,100);if(a.x||a.y){var b=this.getPath().getEnvelope(),d,a=g.getMapBase(),e=k.getPath();d=a.FromMapPoint(e[0]);Math.abs(d.x-f.x);Math.abs(d.y-f.y);f.x=d.x;f.y=d.y;a.FromMapPoint(b.left,b.top);a.FromMapPoint(b.right,b.right);a.getClientWidth();a.getClientHeight();
d=g.getMapSize().width;var h=g.getMapSize().height,q;g.getCoordSys()==TGOS.TGCoordSys.EPSG3857?(q=TGOS.WGS84ToGoo(b.left,b.top),b=TGOS.WGS84ToGoo(b.right,b.bottom),q=a.FromMapPoint(q.x,q.y),b=a.FromMapPoint(b.x,b.y)):(q=a.FromMapPoint(b.left,b.top),b=a.FromMapPoint(b.right,b.bottom));if(util.intersectRect({left:q.x,top:q.y,right:b.x,bottom:b.y},{left:0,top:0,right:d,bottom:h})){if(F.show(),A!=a.getScale()){A=a.getScale();d=e[0];switch(g.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:var t=TGOS.WGS84ToGoo(d.x,
d.y);break;case TGOS.TGCoordSys.EPSG3826:t=d;break;case TGOS.TGCoordSys.EPSG3825:t=d}d=a.FromMapPoint(t.x,t.y);w=d.x;z=d.y;h="M"+d.x+","+d.y;for(b=1;b<e.length;b++){d=e[b];switch(g.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:t=TGOS.WGS84ToGoo(d.x,d.y);break;case TGOS.TGCoordSys.EPSG3826:t=d;break;case TGOS.TGCoordSys.EPSG3825:t=d}rtp=a.FromMapPoint(t.x,t.y);h=h+"L"+rtp.x+","+rtp.y}F.attr({path:h,"stroke-opacity":m,stroke:s,"stroke-width":n})}}else F.hide()}}else F.hide()};this.update=function(){if(l){var a=
g.getMapBase();this.getPath().getEnvelope();var a=g.getMapBase(),b=k.getPath()[0];switch(g.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:var d=TGOS.WGS84ToGoo(b.x,b.y);break;case TGOS.TGCoordSys.EPSG3826:d=b;break;case TGOS.TGCoordSys.EPSG3825:d=b}a=a.FromMapPoint(d.x,d.y);F.transform("t"+(a.x-w)+","+(a.y-z))}else F.hide()};var F,B;this.init=function(){g.getMapBase().getHObject();B=g.getPaper();F=B.path();g.overlay.add(this);this.redraw();this.update();this.setDraggable(this.draggable)};this.getMapBase=
function(){if(g)return g.getMapBase()};this.getEventElement=function(){return null==g?null:F};if(void 0!=e){e.map instanceof TGOS.TGOnlineMap&&this.setMap(e.map);if("undefined"!=typeof e.visible&&"boolean"==typeof e.visible)switch(e.visible){case !0:l=!0;break;case !1:l=!1}"undefined"!=typeof e.path&&e.path instanceof TGOS.TGLineString&&this.setPath(e.path);"undefined"!=typeof e.clickable&&"boolean"==typeof e.clickable&&(h=e.clickable);"undefined"!=typeof e.strokeWeight&&"number"==typeof e.strokeWeight&&
(n=e.strokeWeight);"undefined"!=typeof e.strokeOpacity&&"number"==typeof e.strokeOpacity&&(m=e.strokeOpacity);"undefined"!=typeof e.zIndex&&"number"==typeof e.zIndex&&(q=e.zIndex);"undefined"!=typeof e.strokeColor&&"string"==typeof e.strokeColor&&(s=e.strokeColor);"undefined"!=typeof e.draggable&&"boolean"==typeof e.draggable&&this.setDraggable(e.draggable)}this.init()};TGOS.RegisterEvent(TGOS.TGLine,"click mousedown mouseup mousemove mouseout mouseover dblclick zindex_changed".split(" "))})();(function(){TGOS.TGGroundOverlay=function(a,d,b,e){var f=null,g=1,k=null,l=null,h=new TGOS.TGEnvelope(0,0,0,0),s,m,t=0,n=!0,q;this.getMap=function(){return f};this.getEventElement=function(){return m};this.setMap=function(a){m&&m.remove();if(null==a)f&&(f.overlay.containing(this)&&f.overlay.remove(this),TGOS.TGEvent.clearInstanceListeners(this),f=null);else if(a instanceof TGOS.TGOnlineMap&&!a.overlay.containing(this)){f=a;q=f.getCoordSys();switch(q){case TGOS.TGCoordSys.EPSG3857:a=TGOS.WGS84ToGoo(l.left,
l.top);var b=TGOS.WGS84ToGoo(l.right,l.bottom);h.left=a.x;h.top=a.y;h.right=b.x;h.bottom=b.y;break;case TGOS.TGCoordSys.EPSG3826:h=l;break;case TGOS.TGCoordSys.EPSG3825:h=l}s=f.getPaper();m=s.image(k.getUrl(),10,10,80,80);m.attr({opacity:g});f.overlay.add(this);this.redraw();this.update()}};this.getClickable=function(){return n};this.setClickable=function(a){"boolean"===typeof a&&((n=a)?TGOS.TGEvent.releaseEventLock(this,"click"):TGOS.TGEvent.lockEvent(this,"click"),TGOS.TGEvent.trigger(this,"clickable_changed"))};
this.getOpacity=function(){return g};this.setZIndex=function(a){"number"===typeof a&&m&&(t=parseFloat(a),f.overlay.updateArrayOrder(this),f.overlay.updateElementOrder(this),TGOS.TGEvent.trigger(this,"zindex_changed"))};this.getMapBase=function(){return f.getMapBase()};this.getZIndex=function(){return t};this.setOpacity=function(a){"number"==typeof a&&1>a&&0<=a&&(g=a,m&&m.attr({opacity:a}),this.redraw(),this.update())};this.getImage=function(){return k};this.setImage=function(a){a instanceof TGOS.TGImage&&
(k=a,m&&(m.attr({src:k.getUrl()}),this.redraw(),this.update()))};this.getBounds=function(){return l};this.setBounds=function(a){if(a instanceof TGOS.TGEnvelope){l=a;if(f)switch(q){case TGOS.TGCoordSys.EPSG3857:a=TGOS.WGS84ToGoo(l.left,l.top);var b=TGOS.WGS84ToGoo(l.right,l.bottom);h.left=a.x;h.top=a.y;h.right=b.x;h.bottom=b.y;break;case TGOS.TGCoordSys.EPSG3826:h=l;break;case TGOS.TGCoordSys.EPSG3825:h=l}this.redraw();this.update()}};this.redraw=function(){if(f){var a=f.getMapBase().FromMapPoint(100,
100);if(a.x||a.y){f.getMapBase().FromMapPoint(h.left,h.top);var a=Math.abs(f.getMapBase().FromMapDistX(Math.abs(h.right-h.left))),b=Math.abs(f.getMapBase().FromMapDistY(Math.abs(h.bottom-h.top)));m.attr({width:a,height:b})}}};this.update=function(){if(f){var a=f.getMapBase().FromMapPoint(h.left,h.top);m.attr({x:a.x,y:a.y})}};this.setImage(d);this.setBounds(b);this.setMap(a);this.setZIndex(t);this.setOpacity(e);this.redraw()};TGOS.RegisterEvent(TGOS.TGGroundOverlay,"zindex_changed click dblclick rightclick mousemove mousedown mouseup mouseover mouseout".split(" "))})();TGOS.Geometry=function(){};TGOS.TGPoint=function(a,d){this.Envelope=null;this.x=parseFloat(a);this.y=parseFloat(d)};TGOS.TGPoint.prototype=new TGOS.Geometry;TGOS.TGPoint.prototype.transform=function(a,d,b,e,f,g){this.x=this.x*a+this.y*b+f;this.y=this.x*d+this.y*e+g};TGOS.TGPoint.prototype.isEmpty=function(){return IsNumeric(this.x)||IsNumeric(this.y)?!0:!1};TGOS.TGPoint.prototype.setEmpty=function(){this.y=this.x=null};TGOS.TGPoint.prototype.isSimple=function(){return!0};
TGOS.TGSize=function(a,d){this.width=parseFloat(a);this.height=parseFloat(d)};TGOS.TGEnvelope=function(a,d,b,e){this.left=parseFloat(a);this.right=parseFloat(b);this.top=parseFloat(d);this.bottom=parseFloat(e);this.renderer=null};TGOS.TGEnvelope.prototype=new TGOS.Geometry;
TGOS.TGEnvelope.prototype.Extend=function(a){a.constructor==TGOS.TGEnvelope&&(!a.left||null!=this.left&&this.left>a.left!=this.right>this.left||(this.left=a.left),!a.top||null!=this.top&&this.top<a.top!=this.bottom<this.top||(this.top=a.top),!a.right||null!=this.right&&this.right<a.right!=this.left<this.right||(this.right=a.right),!a.bottom||null!=this.bottom&&this.bottom>a.bottom!=this.top>this.bottom||(this.bottom=pEnv.bottom))};
TGOS.TGEnvelope.prototype.Shrink=function(a){a.constructor==TGOS.TGEnvelope&&(!a.left||null!=this.left&&this.left<a.left!=this.right>this.left||(this.left=a.left),!a.top||null!=this.top&&this.top>a.top!=this.bottom<this.top||(this.top=a.top),!a.right||null!=this.right&&this.right>a.right!=this.left<this.right||(this.right=a.right),!a.bottom||null!=this.bottom&&this.bottom<a.bottom!=this.top>this.bottom||(this.bottom=a.bottom))};
TGOS.TGEnvelope.prototype.toString=function(){return Math.min(this.left,this.right)+" "+Math.min(this.top,this.bottom)+","+Math.max(this.left,this.right)+" "+Math.max(this.top,this.bottom)};TGOS.TGEnvelope.prototype.transform=function(a,d,b,e,f,g){var k=new TGOS.TGPoint(this.left,this.top),l=new TGOS.TGPoint(this.right,this.bottom);k.transform(a,d,b,e,f,g);l.transform(a,d,b,e,f,g);this.left=k.x;this.top=k.y;this.right=l.x;this.bottom=l.y;this.renderer&&this.renderer.redraw()};
TGOS.TGEnvelope.prototype.isEmpty=function(){var a=IsNumeric(this.left),d=IsNumeric(this.top),b=IsNumeric(this.right),e=IsNumeric(this.bottom);return!0==a&&!0==d&&!0==b&&!0==e?!0:!1};TGOS.TGEnvelope.prototype.setEmpty=function(){this.bottom=this.right=this.top=this.left=null};TGOS.TGEnvelope.prototype.getLeft=function(){return this.left};TGOS.TGEnvelope.prototype.getTop=function(){return this.top};TGOS.TGEnvelope.prototype.getRight=function(){return this.right};
TGOS.TGEnvelope.prototype.getBottom=function(){return this.bottom};TGOS.TGEnvelope.prototype.setLeft=function(a){this.left=a};TGOS.TGEnvelope.prototype.setTop=function(a){this.top=a};TGOS.TGEnvelope.prototype.setRight=function(a){this.right=a};TGOS.TGEnvelope.prototype.setBottom=function(a){this.bottom=a};TGOS.TGEnvelope.prototype.getWidth=function(){return Math.abs(this.left-this.right)};TGOS.TGEnvelope.prototype.getHeight=function(){return Math.abs(this.top-this.bottom)};
TGOS.TGEnvelope.prototype.getBounds=function(){return this};TGOS.TGEnvelope.prototype.contains=function(a){return a.x>=this.left&&a.x<=this.right&&a.y>=this.bottom&&a.y<=this.top};TGOS.TGLineString=function(a){this.path=a;this.renderer=null;this.Envelope=new TGOS.TGEnvelope(0,0,0,0);this.updateEnvelope()};TGOS.TGLineString.prototype=new TGOS.Geometry;TGOS.TGLineString.prototype.getPath=function(){return this.path};
TGOS.TGLineString.prototype.setPath=function(a){this.path=a;this.updateEnvelope();this.renderer&&this.renderer.redraw()};TGOS.TGLineString.prototype.isEmpty=function(){};TGOS.TGLineString.prototype.setEmpty=function(){};TGOS.TGLineString.prototype.getLength=function(){for(var a=0,d=0,b=d=0,e=0;e<this.path.length-1;e++)d=this.path[e].x-this.path[e+1].x,b=this.path[e].y-this.path[e+1].y,d=Math.sqrt(d*d+b*b),a+=d;return a};TGOS.TGLineString.prototype.startPoint=function(){return this.path[0]};
TGOS.TGLineString.prototype.endPoint=function(){return this.path[this.path.length-1]};TGOS.TGLineString.prototype.isSimple=function(){};TGOS.TGLineString.prototype.transform=function(a,d,b,e,f,g){for(var k=0;k<this.path.length;k++)this.path[k].transform(a,d,b,e,f,g);this.updateEnvelope();this.renderer&&this.renderer.redraw()};TGOS.TGLineString.prototype.value=function(a){return this.path[a]};
TGOS.TGLineString.prototype.isClosed=function(){return this.path[0].x==this.path[this.path.length-1].x&&this.path[0].y==this.path[this.path.length-1].y?!0:!1};TGOS.TGLineString.prototype.getEnvelope=function(){return this.Envelope};
TGOS.TGLineString.prototype.updateEnvelope=function(){for(var a=this.path,d=Infinity,b=-Infinity,e=-Infinity,f=Infinity,g=0;g<a.length;g++)d=Math.min(d,a[g].x),f=Math.min(f,a[g].y),b=Math.max(b,a[g].x),e=Math.max(e,a[g].y);this.Envelope.setLeft(d);this.Envelope.setRight(b);this.Envelope.setTop(e);this.Envelope.setBottom(f)};TGOS.TGLinearRing=function(a){this.linestring=a;this.renderer=null};TGOS.TGLinearRing.prototype=new TGOS.Geometry;TGOS.TGLinearRing.prototype.getPath=function(){return this.linestring};
TGOS.TGLinearRing.prototype.setPath=function(a){this.linestring=a;this.renderer&&this.renderer.redraw()};TGOS.TGPolygon=function(a){this.rings_=a;this.empty_=!0;this.extIdx=0;this.ext_=a[this.extIdx];this.renderer=a.renderer;this.Envelope=new TGOS.TGEnvelope(0,0,0,0);this.updateEnvelope()};TGOS.TGPolygon.prototype=new TGOS.Geometry;TGOS.TGPolygon.prototype.getEnvelope=function(){return this.Envelope};TGOS.TGPolygon.prototype.isEmpty=function(){return!0};
TGOS.TGPolygon.prototype.setEmpty=function(){this.empty_=!0};TGOS.TGPolygon.prototype.getBounds=function(){return this.Envelope};TGOS.TGPolygon.prototype.getArea=function(){for(var a=0,d=this.rings_[this.extIdx].getPath().getPath(),b=d.length,e=d[b-1],f=0;f<b;f++)var g=d[f],a=a+(g.x*e.y-e.x*g.y),e=g;return Math.abs(0.5*a)};TGOS.TGPolygon.prototype.isSimple=function(){};
TGOS.TGPolygon.prototype.updateEnvelope=function(){for(var a=Infinity,d=-Infinity,b=-Infinity,e=Infinity,f=0;f<this.rings_.length;f++)for(var g=this.rings_[f].getPath().getPath(),k=0;k<g.length;k++)a=Math.min(a,g[k].x),e=Math.min(e,g[k].y),d=Math.max(d,g[k].x),b=Math.max(b,g[k].y);this.Envelope.left=a;this.Envelope.right=d;this.Envelope.top=b;this.Envelope.bottom=e};
TGOS.TGPolygon.prototype.transform=function(a,d,b,e,f,g){for(var k=0;k<this.rings_.length;k++)this.rings_[k].getPath().transform(a,d,b,e,f,g);this.updateEnvelope();this.renderer&&this.renderer.redraw()};TGOS.TGPolygon.prototype.setExterior=function(a){this.extIdx=this.rings_[this.rings_.indexOf(a)];this.updateEnvelope();this.renderer&&this.renderer.redraw()};TGOS.TGPolygon.prototype.setInterior=function(a,d){this.rings_[a].setPath(d)};
TGOS.TGPolygon.prototype.addInterior=function(a){this.rings_.push(a);this.updateEnvelope();this.renderer&&this.renderer.redraw()};TGOS.TGPolygon.prototype.removeInterior=function(a){this.rings_.splice(a,1);this.updateEnvelope();this.renderer&&this.renderer.redraw()};TGOS.TGPolygon.prototype.removeAllInterior=function(){var a=this.rings_.length-this.extIdx+1;this.rings_.splice(0,this.extIdx);this.rings_.splice(1,a);this.updateEnvelope();this.renderer&&this.renderer.redraw()};
TGOS.TGPolygon.prototype.getExteriorRing=function(){return this.rings_[this.extIdx]};TGOS.TGPolygon.prototype.getInteriorRings=function(){var a=this.rings_.slice(0,this.extIdx),d=this.rings_.slice(this.extIdx+1,this.rings_.length-this.extIdx+1);return a.concat(d)};TGOS.TGPolygon.prototype.getNumInteriorRing=function(){return path_.length-1};
TGOS.TGCircle=function(){var a=new TGOS.TGPoint(0,0),d=0,b=new TGOS.TGEnvelope(0,0,0,0);this.renderer=null;this.getBounds=function(){return b};this.setCenter=function(e){e instanceof TGOS.TGPoint&&(a=e,b.left=a.x-d,b.right=a.x+d,b.top=a.y-d,b.bottom=a.y+d,this.renderer&&this.renderer.update())};this.getCenter=function(){return a};this.setRadius=function(e){"number"==typeof e&&(d=e,b.left=a.x-d,b.right=a.x+d,b.top=a.y-d,b.bottom=a.y+d,this.renderer&&this.renderer.redraw())};this.getRadius=function(){return d};
this.transform=function(e,f,g,k,l,h){a.transform(e,f,g,k,l,h);b.left=a.x-d;b.right=a.x+d;b.top=a.y-d;b.bottom=a.y+d;this.renderer&&this.renderer.redraw()}};TGOS.TGCircle.prototype=new TGOS.Geometry;TGOS.TGLabel=function(a){var d,b=12,e="",f="#000000",g=1,k="",l,h,s,m,t,n;this.getEventElement=function(){return n};this.update=function(){if(m){switch(m.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:t.FromMapPoint(l.x,l.y);var a=TGOS.WGS84ToGoo(l.x,l.y),b=t.FromMapPoint(a.x,a.y);break;case TGOS.TGCoordSys.EPSG3826:b=t.FromMapPoint(l.x,l.y);break;case TGOS.TGCoordSys.EPSG3825:b=t.FromMapPoint(l.x,l.y)}a=b.x;b=b.y;this.offset&&(a+=this.offset.x,b+=this.offset.y);n.transform("t"+a+","+b)}};this.setVisible=
function(a){!0==a?n.show():!1==a&&n.hide();TGOS.TGEvent.trigger(this,"visible_changed")};this.getVisible=function(){};this.setZIndex=function(a,b){void 0!=a&&n&&(s=a,m.overlay.updateArrayOrder(this),m.overlay.updateElementOrder(this),TGOS.TGEvent.trigger(this,"zindex_changed"))};this.getZIndex=function(){return s};this.setFont=function(a){d=a;n&&n.attr({"font-family":d})};this.getFont=function(){return d};this.setFontSize=function(a){b=a;n&&n.attr({"font-size":b})};this.getFontSize=function(){return b};
this.setSize=function(a){size_=a};this.getSize=function(){return size_};this.setFontColor=function(a){f=a;n&&n.attr({fill:f})};this.getFontColor=function(){return f};this.setOpacity=function(a){g=a;n&&n.attr({opacity:g})};this.getOpacity=function(){return g};this.setBackgroundColor=function(a){k=a};this.getBackgroundColor=function(){return k};this.setPosition=function(a){l=a;TGOS.TGEvent.trigger(this,"position_changed")};this.getPosition=function(){return l};this.setLabel=function(a){h=a;n&&n.attr({opacity:h});
TGOS.TGEvent.trigger(this,"label_changed")};this.getLabel=function(){return h};this.setFontWeight=function(a){e=a;n&&n.attr({"font-weight":e})};this.getFontWeight=function(){return e};this.destroy=function(){m&&(m.overlay.remove(this),n&&n.remove())};this.offset=null;this.setOffset=function(a){a instanceof TGOS.TGPoint&&(this.offset=a,this.update())};this.setMap=function(a){this.destroy();null==a&&m?(m=null,TGOS.TGEvent.clearInstanceListeners(this)):a instanceof TGOS.TGOnlineMap&&(m=a,paper=m.getPaper(),
n=paper.text(0,0,h),m.overlay.add(this),t=m.getMapBase(),n.attr({"font-family":d,fill:f,"font-weight":e,"font-size":b,text:h,opacity:g}),this.update())};this.getMap=function(){return m};this.getMapBase=function(){return t};this.setOptions=function(a){void 0!==a.zIndex&&this.setZIndex(a.zIndex);a.font&&this.setFont(a.font);a.fontColor&&this.setFontColor(a.fontColor);a.fontWeight&&this.setFontWeight(a.fontWeight);a.fontSize&&this.setFontSize(a.fontSize);a.label&&this.setLabel(a.label);a.backgroundColor&&
this.setBackgroundColor(a.backgroundColor);void 0!==a.opacity&&this.setOpacity(a.opacity);a.position&&this.setPosition(a.position);a.map&&this.setMap(a.map);this.update()};this.setOptions(a)};TGOS.RegisterEvent(TGOS.TGLabel,"zindex_changed click dblclick rightclick mousemove mousedown mouseup mouseover mouseout".split(" "));TGOS.TGInfoWindow=function(a,d,b){var e="",f,g,k,l,h=this,s,m;l=document.createElement("img");f=document.createElement("div");g=document.createElement("div");k=document.createElement("div");document.createElement("div");l.src=TGOS.RES_PATH+"Sample/Angle.png";l.style.position="absolute";l.style.height="21px";l.style.width="34px";l.style.zIndex=1E6;f.style.position="absolute";f.style.border="solid 1px #AAAAAA";f.style.backgroundColor="#ffffff";f.style.opacity=1;f.style.borderRadius="5px";f.style.overflow=
"auto";g.style.width="auto";g.style.height="auto";g.style.position="absolute";g.style.overflow="auto";g.style.margin="10px";g.style["word-break"]="keep-all";k.style.position="absolute";k.top="5px";k.style.width="15px";k.style.height="15px";k.style.overflow="auto";k.style.right="5px";k.style.zIndex=1E6;k.style.backgroundImage='url("'+TGOS.RES_PATH+'Sample/Close.png")';this.onCloseClick=function(a){h.close()};AttachEvent(k,"click",this.onCloseClick);f.appendChild(g);var t={position:d||new TGOS.TGPoint(0,
0),pixelOffset:new TGOS.TGSize(0,0),zIndex:1E6,disableAutoPan:!0};this.getElement=function(){return f};this.open=function(a){a.infoWindowLayer.containing(this)?this.update():(a.getHPack().appendChild(f),a.getHPack().appendChild(l),a.getHPack().appendChild(k),a.infoWindowLayer.add(this),s=a,m=s.getMapBase(),f.style.zIndex=t.zIndex,g.innerHTML='<p style="white-space: nowrap">'+e+"</p>",f.style.width=g.scrollWidth+40>t.maxWidth?t.maxWidth+40+"px":g.scrollWidth+40+"px",l.style.display="inline",k.style.display=
"inline",f.style.height=g.scrollHeight+30+"px",this.update(),this.panToCenter())};this.close=function(){s&&s.infoWindowLayer.containing(this)&&(s.infoWindowLayer.remove(this),l.style.display="none",k.style.display="none")};this.setContent=function(a){"string"==typeof a?e=a:a instanceof HTMLElement&&g.appendChild(a);e=a;g.innerHTML='<p style="white-space: nowrap">'+e+"</p>";f.style.width=g.scrollWidth+40>t.maxWidth?t.maxWidth+40+"px":g.scrollWidth+40+"px";f.style.height=g.scrollHeight+30+"px";TGOS.TGEvent.trigger(this,
"content_changed")};this.setPosition=function(a){a instanceof TGOS.TGPoint&&(a.x!==t.position.x||a.y!==t.position.y)&&(t.position=a,this.update(),TGOS.TGEvent.trigger(this,"position_changed"))};this.getPosition=function(){return t.position};this.getContentPane=function(){return g};this.setMaxWidth=function(a){t.maxWidth=a;f.style.width=g.scrollWidth+40>t.maxWidth?t.maxWidth+40+"px":g.scrollWidth+40+"px";f.style.height=g.scrollHeight+30+"px"};this.setZIndex=function(a){a!==t.zIndex&&(t.zIndex=a,f.style.zIndex=
a,l.style.zIndex=a,k.style.zIndex=a,this.update(),TGOS.TGEvent.trigger(this,"zindex_changed"))};this.getZIndex=function(){return t.zIndex};this.setPixelOffset=function(a){t.pixelOffset=a;this.update()};this.disableAutoPan=function(a){"boolean"==typeof a&&(t.disableAutoPan=a)};this.putOpacity=function(a){f.style.opacity=a;l.style.opacity=a;k.style.opacity=a;f.style.filter="alpha(opacity="+100*a+")";l.style.filter="alpha(opacity="+100*a+")";k.style.filter="alpha(opacity="+100*a+")"};this.panToCenter=
function(){if(!1==t.disableAutoPan&&m&&s){var a=m.FromMapPoint(t.position.x,t.position.y),b=parseInt(a.x)-f.offsetWidth/2,a=parseInt(a.y)-f.offsetHeight/2;m.ToMapPoint(b,a);s.setCenter(t.position)}};this.setMessageText=function(a){this.setContent(a)};this.setOptions=function(a){void 0!=a&&("boolean"==typeof a.disableAutoPan&&this.disableAutoPan(a.disableAutoPan),a.position instanceof TGOS.TGPoint&&this.setPosition(a.position),"number"==typeof a.maxWidth&&this.setMaxWidth(a.maxWidth),a.pixelOffset instanceof
TGOS.TGSize&&this.setPixelOffset(a.pixelOffset),"number"==typeof a.zIndex&&this.setZIndex(a.zIndex),"string"==typeof a.messageText&&this.setMessageText(a.messageText),"number"==typeof a.opacity&&this.putOpacity(a.opacity),this.update())};this.update=function(){if("undefined"!=typeof m&&s){switch(s.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:var a=TGOS.WGS84ToGoo(t.position.x,t.position.y),a=m.FromMapPoint(a.x,a.y);break;case TGOS.TGCoordSys.EPSG3826:a=m.FromMapPoint(t.position.x,t.position.y);break;
case TGOS.TGCoordSys.EPSG3825:a=m.FromMapPoint(t.position.x,t.position.y)}f.style.left=parseInt(a.x)+t.pixelOffset.width+"px";f.style.top=parseInt(a.y)-19-parseInt(f.offsetHeight)+t.pixelOffset.height+"px";l.style.left=parseInt(a.x)+t.pixelOffset.width+"px";l.style.top=parseInt(a.y)-19+t.pixelOffset.height+"px";k.style.left=parseInt(a.x)+f.clientWidth+t.pixelOffset.width-20+"px";k.style.top=parseInt(f.style.top)+5+"px"}};this.setContent(a);this.setOptions({position:d});this.setOptions(b)};
TGOS.RegisterEvent(TGOS.TGLabel,["closeclick","content_changed","position_changed","zindex_changed","domready"]);TGOS.TGImage=function(a,d,b,e,f){var g="";this.size=d instanceof TGOS.TGSize?d:new TGOS.TGSize(32,32);this.scaledSize=f instanceof TGOS.TGPoint?f:new TGOS.TGSize(32,32);this.anchor=e instanceof TGOS.TGPoint?e:new TGOS.TGPoint(this.size.width/2-1,this.size.height-1);this.origin=b instanceof TGOS.TGPoint?b:new TGOS.TGPoint(0,0);this.setUrl=function(a){"string"==typeof a&&(g=a)};this.getUrl=function(){return g};this.setUrl(a)};TGOS.TGSymbol=function(){var a={FORWARD_OPEN_ARROW:1,BACKWARD_OPEN_ARROW:3};TGOS.TGSymbolStyle={FORWARD_CLOSED_ARROW:0,FORWARD_OPEN_ARROW:1,BACKWARD_CLOSED_ARROW:2,BACKWARD_OPEN_ARROW:3,CIRCLE:4,DOUBLE_CIRCLE:5,TRIPLE_CIRCLE:6,CIRCLE_SPOT:7,TRIANGLE:8,INVERT_TRIANGLE:9,SQUARE:10,PENTAGON:11,HEXAGON:12,OCTAGON:13,PENTASTAR:14,HEXASTAR:15};var d=function(){this.anchor=new TGOS.TGPoint(0,0);this.symbolStyle=TGOS.TGSymbolStyle.CIRCLE;this.yPixel=this.xPixel=48;this.rotation=0;this.fillColor="#ffffff";
this.fillOpacity=0;this.strokeColor="#000000";this.strokeWeight=2;this.strokeOpacity=1};d.noFill=function(b){for(var d in a)if(a[d]==b)return!0;return!1};d.SymbolPath="M0 0 L 100 50 L0 100L50 50Z;M0 0 L 100 50 L0 100;M100 0 L 0 50 L100 100L50 50Z;M100 0 L 0 50 L100 100;M0 50 A 50 50 0 0 1 100 50 A50 50 0 0 1 0 50z;M0 50A50 50 0 0 1 100 50 A50 50 0 0 1 0 50zM25 50A25 25 0 0 1 75 50 A25 25 0 0 1 25 50z;M0 50A50 50 0 0 1 100 50 A50 50 0 0 1 0 50zM16.67 50A33.33 33.33 0 0 1 83.33 50 A33.33 33.33 0 0 1 16.67 50zM33.33 50A16.67 16.67 0 0 1 66.67 50 A16.67 16.67 0 0 1 33.33 50z;M0 50A50 50 0 0 1 100 50 A50 50 0 0 1 0 50ZM45 45L55 55M55 45L45 55;M50 0L7 75L93 75Z;M93 25L7 25L50 100Z;M0 0L100 0L100 100L0 100Z;M50 0L2 35L21 90L79 90L98 35Z;M50 0L7 25L7 75L50 100L93 75L93 25Z;M50 0L15 15L0 50L15 85L50 100L85 85L100 50L85 15Z;M50 0L35 30L2 35 L26 58L21 90L50 75L79 90L74\t58L98 35L65\t30Z;M50,0L38,28L7,25L25,50L7,75L37,72L50,100L62,72L93,75L75,50L93,25L63,28Z".split(";");
return d}();TGOS.TGEvent=function(){var a=util.getInternetExplorerVersion(),d=0>a?0:1,b=function(a,b){if(!a.lockEvt)return!1;for(var d=0;d<a.lockEvt.length;d++)if(a.lockEvt[d]==b)return!0;return!1},e=function(a){if(a){var b=a.eventName_;if(b in g.standardDomMouseEvents)if(f(a.target_))if("rightclick"==b||"click"==b)a.target_.getEventElement().unclick(a.wrapper_),a.target_.getEventElement().untouchstart(a.clickWrapper_touch_svg_),a.target_.getEventElement().unmousedown(a.clickWrapper_mouse_svg_);else a.target_.getEventElement()["un"+
a.eventName_](a.wrapper_);else a.target_ instanceof TGOS.TGKmlLayer||("rightclick"==b||"click"==b?(util.removeEventHandler(a.target_.getEventElement(),"click",a.wrapper_),util.removeEventHandler(a.target_.getEventElement(),"touchstart",a.clickWrapper_touch_dom_),util.removeEventHandler(a.target_.getEventElement(),"mousedown",a.clickWrapper_mouse_dom_)):util.removeEventHandler(a.target_.getEventElement(),a.eventName_,a.wrapper_))}},f=function(a){return a instanceof TGOS.TGLine||a instanceof TGOS.TGFill||
a instanceof TGOS.TGMarker||a instanceof TGOS.TGGroundOverlay||a instanceof TGOS.TGLabel},g={standardDomMouseEvents:{click:"click",mousemove:"mousemove",mousedown:"mousedown",mouseover:"mouseover",mouseout:"mouseout",mouseup:"mouseup",dblclick:"dblclick",rightclick:"rightclick"},drawingManagerEvents:{circle_complete:"circle_complete",marker_complete:"marker_complete",overlay_complete:"overlay_complete",polygon_complete:"polygon_complete",linestring_complete:"linestring_complete",envelope_complete:"envelope_complete"}};
TGOS.MapsEventListener=function(){};TGOS.OverlayCompleteEvent=function(a,b){this.overlay=a;this.type=b};TGOS.TGMouseEvent=function(){this.mapListener_=null;this.stop=function(){g.removeListener(this.mapListener_);this.mapListener_=null};this.point=new TGOS.TGPoint};g.addListener_=function(e,l,h,s,m){if(e&&l&&e.events&&!(0>e.events.indexOf(l))){var t=null,n=null,t=e[l+"_"];t||(e[l+"_"]=[],t=e[l+"_"]);var q=function(a){if(!b(e,l)&&!0!=n.dragLock_&&-1!=t.indexOf(n)){var d=e.getMapBase();if(d){var f=
d.getPackageOffset();a=d.ToMapPoint(a.changedTouches[0].clientX-f.x,a.changedTouches[0].clientY-f.y);var g;switch(e.getMap().getCoordSys()){case TGOS.TGCoordSys.EPSG3857:g=TGOS.GooToWGS84(a.x,a.y);break;case TGOS.TGCoordSys.EPSG3826:g=a;break;case TGOS.TGCoordSys.EPSG3825:g=a}n.me_.point=new TGOS.TGPoint(g.x,g.y);n.handler_.call(this,n.me_)}}},w=function(a){if(!(b(e,l)||!0==n.dragLock_||-1==t.indexOf(n)||"rightclick"==n.eventName_&&2!=a.button||"click"==n.eventName_&&a.button!=d)){var f=e.getMapBase();
if(f){var g=f.getPackageOffset(),f=f.ToMapPoint(a.clientX-g.x,a.clientY-g.y),h;switch(e.getMap().getCoordSys()){case TGOS.TGCoordSys.EPSG3857:h=TGOS.GooToWGS84(f.x,f.y);break;case TGOS.TGCoordSys.EPSG3826:h=f;break;case TGOS.TGCoordSys.EPSG3825:h=f}n.me_.point=new TGOS.TGPoint(h.x,h.y);a.stopPropagation?a.stopPropagation():a.returnValue=!1;n.handler_.call(this,n.me_)}}},z=function(a){var d=a.clientX,f=a.clientY;if(!b(e,l)){var g=!1,h=function(a){d!=a.clientX&&f!=a.clientY&&(g=!0,e.getEventElement().unmousemove(h),
e.getEventElement().unmouseup(m))},m=function(b){!g&&n.wrapper_&&n.wrapper_.call(this,a);e.getEventElement().unmousemove(h);e.getEventElement().unmouseup(m)};e.getEventElement().mousemove(h);e.getEventElement().mouseup(m)}},A=function(a){function d(b){!g&&n.touchWrapper_&&n.touchWrapper_.call(this,a);e.getEventElement().untouchmove(f);e.getEventElement().untouchend(d)}function f(a){g=!0}if(!b(e,l)){var g=!1;e.getEventElement().touchend(d);e.getEventElement().touchmove(f)}},C=function(a){function d(b){DetachEvent(e.getEventElement(),
"mouseup",d,s);DetachEvent(e.getEventElement(),"mousemove",f,s);!m&&n.wrapper_&&n.wrapper_.call(this,a)}function f(a){if(g!=a.clientX||h!=a.clientY)m=!0}var g=a.clientX,h=a.clientY;if(!b(e,l)){var m=!1;AttachEvent(e.getEventElement(),"mouseup",d,s);AttachEvent(e.getEventElement(),"mousemove",f,s)}},F=function(a){function d(){DetachEvent(e.getEventElement(),"touchmove",f);DetachEvent(e.getEventElement(),"touchend",d);n.touchWrapper_&&!g&&n.touchWrapper_.call(this,a)}function f(){g=!0}if(!b(e,l)){var g=
!1;AttachEvent(e.getEventElement(),"touchend",d);AttachEvent(e.getEventElement(),"touchmove",f)}};if(t){n={target_:e,eventName_:l,targetQueue_:l+"_",handler_:h,executeLimit:m,me_:null,wrapper_:null,touchWrapper_:null,clickWrapper_touch_svg_:A,clickWrapper_touch_dom_:F,clickWrapper_mouse_svg_:z,clickWrapper_mouse_dom_:C};if(l in g.standardDomMouseEvents)if(n.realName_=l,h=new TGOS.TGMouseEvent,h.target=e,h.mapListener_=n,n.me_=h,n.wrapper_=w,n.touchWrapper_=q,f(e)){if(null==e.getEventElement())return;
if("click"==l||"rightclick"==l)8>=a&&0<=a&&e.getEventElement().drag(function(){n.clickLocked=!0},function(){n.clickLocked=!1},function(a){n.clickLocked||n.wrapper_.call(this,a)}),e.getEventElement().mousedown(n.clickWrapper_mouse_svg_),e.getEventElement().touchstart(n.clickWrapper_touch_svg_);else e.getEventElement()[n.eventName_](n.wrapper_)}else if(!(e instanceof TGOS.TGKmlLayer))if("click"==l||"rightclick"==l)8>=a&&0<=a&&AttachEvent(e.getEventElement(),"click",n.wrapper_),AttachEvent(e.getEventElement(),
"mousedown",n.clickWrapper_mouse_dom_),AttachEvent(e.getEventElement(),"touchstart",n.clickWrapper_touch_dom_);else{if(null==e.getEventElement())return;AttachEvent(e.getEventElement(),n.eventName_,n.wrapper_,s)}t.push(n);return n}}};g.addDomListener=function(a,b,d,e){return g.addListener_(a,b,d,e,Infinity)};g.addDomListenerOnce=function(a,b,d,e){return g.addListener_(a,b,d,e,1)};g.addListener=function(a,b,d,e){return g.addListener_(a,b,d,e,Infinity)};g.addListenerOnce=function(a,b,d,e){return g.addListener_(a,
b,d,e,1)};g.clearInstanceListeners=function(a){if(a.events)for(var b=0;b<a.events.length;b++)g.clearListeners(a,a.events[b])};g.clearListeners=function(a,b){var d=a[b+"_"];if(d)for(var f=0;f<d.length;f++)e(d[f])};g.removeListener=function(a){var b=null;a&&(b=a.target_[a.targetQueue_],e(a),b.splice(b.indexOf(a),1))};g.trigger_=function(a,b){var d=null,d=a[b+"_"];if(!d||0>=d.length)return!1;for(var e=0;e<d.length;e++)d[e].handler_.apply(this,Array.prototype.slice.call(arguments).slice(2)),d[e].executeLimit--,
0>=d[e].executeLimit&&g.removeListener(d[e])};g.trigger=function(a,b){g.trigger_(a,b)};g.releaseEventLock=function(a,b){if(a&&a.events&&a.events.length&&b&&a.lockEvt&&0<=a.lockEvt.indexOf(b)){var d=a.lockEvt.indexOf(b);0>d||a.lockEvt.splice(d,1)}};g.lockEvent=function(a,b){a&&a.events&&a.events.length&&b&&(a.lockEvt||(a.lockEvt=[]),0<=a.lockEvt.indexOf(b)||a.lockEvt.push(b))};return g}();TGOS.TGMarker=function(){function a(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()}var d=TGOS.RES_PATH+"marker2.png",b=TGOS.RES_PATH+"shadow2.png",e=function(b,d,e,f,s){var m=this;this.markMove=function(b){a(b);var d=m.map.getMapBase(),e=d.getPackageOffset();switch(m.map.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:b=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y);b=TGOS.GooToWGS84(b.x,b.y);var f=new TGOS.TGPoint(b.x,b.y);break;case TGOS.TGCoordSys.EPSG3826:f=d.ToMapPoint(b.clientX-e.x,b.clientY-
e.y);break;case TGOS.TGCoordSys.EPSG3825:f=d.ToMapPoint(b.clientX-e.x,b.clientY-e.y)}m.setPosition(f)};this.endDrag=function(b){a(b);DetachEvent(document.body,"mousemove",m.markMove,!0);DetachEvent(document.body,"mouseup",m.endDrag,!0)};this.markDrag=function(b){a(b);AttachEvent(document.body,"mousemove",m.markMove,!0);AttachEvent(document.body,"mouseup",m.endDrag,!0)};b&&this.setMap(b);d&&this.setPosition(d);f&&this.setIcon(f);e&&this.setTitle(e);s&&this.setMarkerOptions(s)},f=e.prototype;f.elem=
null;f.map=null;f.gPos=null;f.getBounds=function(){return new TGOS.TGEnvelope(this.position.x,this.position.y,this.position.x,this.position.y)};f.setMap=function(a){if(null===a)this.destroy(),this.map=null;else if(this.destroy(),a instanceof TGOS.TGOnlineMap){this.map=a;this.map.overlay.add(this);a=this.map.getPaper();var e=this.map.getShadowPaper(),f=this.icon?this.icon.getUrl():d,h=this.shadow?this.shadow.getUrl():b;this.sImg=e.image(h,0,0,this.shadow.size.width,this.shadow.size.height);!0!=this.flat&&
!1!=this.visible||this.sImg.hide();this.elem=a.image(f,0,0,this.icon.size.width,this.icon.size.height);!1===this.visible&&this.elem.hide();null!=this.cursor&&this.elem.attr({cursor:this.cursor});null!=this.title&&this.elem.attr({title:this.title});this.update()}};f.getMap=function(){return this.map};f.getMapBase=function(){if(this.map)return this.map.getMapBase()};f.destroy=function(){this.map&&(this.elem&&this.elem.remove(),this.sImg&&this.sImg.remove(),this.map.overlay.remove(this),this.sImg=this.elem=
null)};f.getEventElement=function(){return this.elem};f.title="";f.getTitle=function(){return this.title};f.setTitle=function(a){this.title=a;this.elem&&(this.elem.attr({title:this.title}),TGOS.TGEvent.trigger(this,"title_changed"))};f.position=null;f.getPosition=function(){return this.position};f.setPosition=function(a){a instanceof TGOS.TGPoint&&(this.position=a,this.map&&this.map.getCoordSys()==TGOS.TGCoordSys.EPSG3857&&(this.gPos=TGOS.WGS84ToGoo(this.position.x,this.position.y)),this.update(),
TGOS.TGEvent.trigger(this,"position_changed"))};this.infoAnchorPosition=null;f.getInfoAnchorPoint=function(){return this.infoAnchorPoint};f.setInfoAnchorPoint=function(a){this.infoAnchorPoint=a};f.icon=new TGOS.TGImage(d,new TGOS.TGSize(31,30),new TGOS.TGPoint(0,0),new TGOS.TGPoint(9,28));f.getIcon=function(){return this.icon};f.setIcon=function(a){if(a instanceof TGOS.TGImage||a instanceof TGOS.TGSymbol){this.icon=a;this.elem&&this.elem.remove();var b=this.map.getPaper();if(this.icon instanceof TGOS.TGImage)this.elem=
b.image(d,0,0,this.icon.size.width,this.icon.size.height),this.elem.attr({src:this.icon.getUrl(),width:this.icon.size.width,height:this.icon.size.height});else if(this.icon instanceof TGOS.TGSymbol){a=TGOS.TGSymbol.SymbolPath[a.symbolStyle];if(!a)throw"Invalid SymbolStyle";this.elem=b.path(a);this.bbox_=this.elem.getBBox(!0);b=TGOS.TGSymbol.noFill(this.icon.symbolStyle);this.elem.attr({fill:this.icon.fillColor,"fill-opacity":b?0:this.icon.fillOpacity,stroke:this.icon.strokeColor,"stroke-opacity":this.icon.strokeOpacity,
"stroke-width":this.icon.strokeWeight})}!1===this.visible?this.elem.hide():this.elem.show();null!=this.cursor&&this.elem.attr({cursor:this.cursor});null!=this.title&&this.elem.attr({title:this.title});this.map.overlay.updateElementOrder(this);this.update();TGOS.TGEvent.trigger(this,"icon_changed")}};f.clickable=!1;f.getClickable=function(){return this.clickable};f.setClickable=function(a){"boolean"===typeof a&&((this.clickable=a)?TGOS.TGEvent.releaseEventLock(this,"click"):TGOS.TGEvent.lockEvent(this,
"click"),TGOS.TGEvent.trigger(this,"clickable_changed"))};f.visible=!0;f.getVisible=function(){return this.visible};f.setVisible=function(a,b){this.visible=a;this.map&&(!0===this.visible?(this.elem.show(),!1===this.flat&&this.sImg.show()):(this.elem.hide(),this.sImg.hide()),b||this.update(),TGOS.TGEvent.trigger(this,"visible_changed"))};f.cursor=null;f.getCursor=function(){return this.cursor};f.setCursor=function(a){this.cursor=a;this.elem&&(this.elem.attr({cursor:this.cursor}),TGOS.TGEvent.trigger(this,
"cursor_changed"))};f.zIndex=0;f.getZIndex=function(){return this.zIndex};f.setZIndex=function(a){this.zIndex=parseInt(a);this.map&&(this.map.overlay.updateArrayOrder(this),this.map.overlay.updateElementOrder(this),TGOS.TGEvent.trigger(this,"zindex_changed"))};f.draggable=!1;f.getDraggable=function(){return this.draggable};f.setDraggable=function(a){this.draggable=a;TGOS.TGEvent.trigger(this,"draggable_changed");this.elem&&(this.elem&&!0==a?this.elem.mousedown(this.markDrag):this.elem&&!1==a&&this.elem.unmousedown(this.markDrag))};
f.flat=!1;f.getFlat=function(){return this.flat};f.setFlat=function(a){this.flat=a;this.sImg&&(!0===this.flat?this.sImg.hide():this.sImg.show(),TGOS.TGEvent.trigger(this,"flat_changed"))};f.shadow=new TGOS.TGImage(b,new TGOS.TGSize(31,30),new TGOS.TGPoint(0,0),new TGOS.TGPoint(9,25));f.getShadow=function(){return this.shadow};f.setShadow=function(a){this.shadow=a;TGOS.TGEvent.trigger(this,"shadow_changed")};f.setMarkerOptions=function(a){a&&(void 0!==a.visible&&this.setVisible(a.visible),void 0!=
a.icon&&this.setIcon(a.icon),void 0!==a.shadow&&this.setShadow(a.shadow),void 0!=a.title&&this.setTitle(a.title),void 0!==a.position&&this.setPosition(a.position),void 0!==a.infoAnchor&&this.setInfoAnchorPoint(a.infoAnchor),void 0!==a.clickable&&this.setClickable(a.clickable),void 0!==a.cursor&&this.setCursor(a.cursor),void 0!=a.zIndex&&this.setZIndex(a.zIndex),void 0!==a.draggable&&this.setDraggable(a.draggable),void 0!==a.flat&&this.setFlat(a.flat),void 0!==a.shape&&this.setShape(a.shape))};f.update=
function(){if(this.position&&this.visible&&this.elem)if(this.map.getBounds().contains(this.position)){this.visible&&(this.elem.show(),!0!==this.flat&&this.sImg.show());var a=this.map.getMapBase(),b=null;switch(this.map.getCoordSys()){case TGOS.TGCoordSys.EPSG3857:b=a.FromMapPoint(this.gPos.x,this.gPos.y);break;default:b=a.FromMapPoint(this.position.x,this.position.y)}if(this.icon instanceof TGOS.TGImage)this.elem.attr({x:b.x-this.icon.anchor.x,y:b.y-this.icon.anchor.y});else if(this.icon instanceof
TGOS.TGSymbol){if(!this.bbox_){this.bbox_=this.elem.getBBox(!0);return}this.elem.transform("t"+(b.x-this.icon.anchor.x)+","+(b.y-this.icon.anchor.y)+"r"+this.icon.rotation+","+this.icon.anchor.x+","+this.icon.anchor.y+"s"+this.icon.xPixel/this.bbox_.width+","+this.icon.yPixel/this.bbox_.height+",0,0")}else return;!1===this.flat&&this.sImg.attr({x:b.x-this.shadow.anchor.x,y:b.y-this.shadow.anchor.y})}else this.elem.hide(),this.sImg.hide()};TGOS.RegisterEvent(e,"clickable_changed icon_changed position_changed title_changed visible_changed zindex_changed click mousedown mouseup mouseover mouseout mousemove cursor_changed draggable_changed flat_changed shadow_changed shape_changed dblclick rightclick".split(" "));
return e}();TGOS.TGDrawing=function(){var a={ENVELOPE:TGOS.RES_PATH+"rect.png",CIRCLE:TGOS.RES_PATH+"circle.png",MARKER:TGOS.RES_PATH+"mark.png",LABEL:TGOS.RES_PATH+"label.png",POLYGON:TGOS.RES_PATH+"poly.png",LINESTRING:TGOS.RES_PATH+"line.png"},d={ENVELOPE:TGOS.RES_PATH+"rect2.png",CIRCLE:TGOS.RES_PATH+"circle2.png",MARKER:TGOS.RES_PATH+"mark2.png",LABEL:TGOS.RES_PATH+"label2.png",POLYGON:TGOS.RES_PATH+"poly2.png",LINESTRING:TGOS.RES_PATH+"line2.png"},b=function(b,e){var f=this;this.manager=b;this.mode=e;this.active=
!1;this.div=document.createElement("div");this.img=document.createElement("img");this.div.appendChild(this.img);this.setActive=function(b){this.active=b;this.img.src=this.active?d[this.mode]:a[this.mode]};this.destructor=function(){div.parentNode&&div.parentNode.removeChild(this.div);this.img=this.div=null};this.setActive(!1);this.div.onclick=function(){f.manager.setDrawingMode(f.manager.getDrawingMode()==f.mode?null:f.mode)}},e=function(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()},
f=function(a,b,d){this.buttons=[];a&&(this.manager=a);b&&(this.position=b);d&&(this.modes=d);this.div=document.createElement("div");util.disableSelect(this.div);this.table=document.createElement("table");this.div.appendChild(this.table);this.row=this.table.insertRow(-1);a.map&&this.setMap(a.map)},g=f.prototype;g.setMap=function(a){this.map!=a&&(this.map=a,a.getHPackage().appendChild(this.div),a.controls[this.position].push(this.div))};g.setVisible=function(a){this.div.style.display=a?"":"none"};g.setPosition=
function(a){this.position=a;this.manager.map&&(a=this.manager.map.controls[this.position].indexOf(this.div),0<=a&&(map.controls[this.position].removeAt(a),map.controls[p.controlPosition].push(this.div),this.position=p.controlPosition))};g.setOptions=function(a){a.drawingModes&&this.setModes(a.drawingModes);a.controlPosition&&this.setPosition(a.controlPosition)};g.toggleMode=function(a){for(var b=0;b<this.buttons.length;b++){var d=this.buttons[b];d.setActive(a==d.mode)}};g.setModes=function(a){this.div.innerHTML=
"";this.table=document.createElement("table");this.div.appendChild(this.table);this.buttons=[];this.row=this.table.insertRow(-1);for(var d=0;d<a.length;d++)if("LABEL"!=a[d]){var e=new b(this.manager,a[d]);this.row.insertCell(-1).appendChild(e.div);this.buttons.push(e)}};TGOS.TGOverlayType={CIRCLE:"CIRCLE",MARKER:"MARKER",POLYGON:"POLYGON",LINESTRING:"LINESTRING",ENVELOPE:"ENVELOPE",LABEL:"LABEL"};var k=TGOS.RES_PATH+"marker2.png",l=TGOS.RES_PATH+"shadow2.png",h=function(a){var b=0,d=0;a.getBoundingClientRect&&
(a=a.getBoundingClientRect(),b=a.left,d=a.top);return new TGOS.TGPoint(b,d)},g=function(a){var b=this,d,g,s,z,A,C,F,B=null,u,x,D=function(a){var e=b.map.getDrawingPaper();b.map.getMapBase();b.map.getHPackage();var f=h(x);d=a.clientX-f.x;g=a.clientY-f.y;switch(b.getDrawingMode()){case TGOS.TGOverlayType.ENVELOPE:F=e.rect(d,g,0,0);F.attr({fill:b.options.envelopeOptions.fillColor,"fill-opacity":b.options.envelopeOptions.fillOpacity,stroke:b.options.envelopeOptions.strokeColor,"stroke-opacity":b.options.envelopeOptions.strokeOpacity,
"stroke-width":b.options.envelopeOptions.strokeWeight});break;case TGOS.TGOverlayType.CIRCLE:F=e.circle(d,g,0),F.attr({fill:b.options.circleOptions.fillColor,"fill-opacity":b.options.circleOptions.fillOpacity,stroke:b.options.circleOptions.strokeColor,"stroke-opacity":b.options.circleOptions.strokeOpacity,"stroke-width":b.options.circleOptions.strokeWeight})}AttachEvent(document.body,"mousemove",v,!1);AttachEvent(document.body,"mouseup",y,!1);AttachEvent(document.body,"mouseleave",y,!1)},v=function(a){e(a);
var f=h(x);s=a.clientX-f.x;z=a.clientY-f.y;b.getDrawingMode()==TGOS.TGOverlayType.ENVELOPE?F.attr({x:d>s?s:d,y:g>z?z:g,width:Math.abs(d-s),height:Math.abs(g-z)}):b.getDrawingMode()==TGOS.TGOverlayType.CIRCLE&&(a=g-z,f=d-s,F.attr({x:d,y:g,r:Math.sqrt(f*f+a*a)}))},y=function(a){b.map.getDrawingPaper();var e=b.map.getMapBase();b.map.getHPackage();A=a.offsetX;C=a.offsetY;if(d!=A&&C!=g){var f;switch(b.drawingMode){case TGOS.TGOverlayType.ENVELOPE:var h,k;a=d>s?s:d;f=g>z?z:g;h=Math.abs(d-s);k=Math.abs(g-
z);mlr=e.ToMapPoint(a,f);e=e.ToMapPoint(a+h,f+k);e=new TGOS.TGFill(b.map,new TGOS.TGEnvelope(mlr.x,mlr.y,e.x,e.y),b.options.envelopeOptions);f=new TGOS.OverlayCompleteEvent(e,TGOS.TGOverlayType.POLYGON);TGOS.TGEvent.trigger_(b,"envelope_complete",f);break;case TGOS.TGOverlayType.CIRCLE:a=d,f=g,h=g-z,k=d-s,k=Math.sqrt(k*k+h*h),h=new TGOS.TGCircle,a=e.ToMapPoint(a,f),e=e.ToMapDistX(k),h.setCenter(a),h.setRadius(e),e=new TGOS.TGFill(b.map,h,b.options.circleOptions),f=new TGOS.OverlayCompleteEvent(e,
TGOS.TGOverlayType.CIRCLE),TGOS.TGEvent.trigger_(b,"circle_complete",f)}TGOS.TGEvent.trigger_(b,"overlay_complete",f)}DetachEvent(document.body,"mousemove",v,!1);DetachEvent(document.body,"mouseup",y,!1);DetachEvent(document.body,"mouseleave",y,!1);b.map.getDrawingPaper().clear()},E=function(a){e(a);var d;switch(b.getDrawingMode()){case TGOS.TGOverlayType.MARKER:d=b.map.getMapBase();var f=h(x),g=a.clientX-f.x;a=a.clientY-f.y;a=d.ToMapPoint(g,a);a=new TGOS.TGMarker(b.map,a);a.setMarkerOptions(b.options.markerOptions);
d=new TGOS.OverlayCompleteEvent(a,TGOS.TGOverlayType.MARKER);TGOS.TGEvent.trigger_(b,"marker_complete",d);break;case TGOS.TGOverlayType.LABEL:d=b.map.getMapBase(),f=h(x),g=a.clientX-f.x,a=a.clientY-f.y,a=d.ToMapPoint(g,a),a=new TGOS.TGLabel({map:b.map,fontColor:b.options.labelOptions.fontColor,fontSize:b.options.labelOptions.fontSize,font:b.options.labelOptions.font,fontWeight:b.options.labelOptions.fontWeight,opacity:b.options.labelOptions.opacity,position:a,label:b.options.labelOptions.label}),
d=new TGOS.OverlayCompleteEvent(a,TGOS.TGOverlayType.LABEL),TGOS.TGEvent.trigger_(b,"label_complete",d)}TGOS.TGEvent.trigger_(b,"overlay_complete",d)},N=function(a){var d=b.map.getMapBase(),e=h(x);a=d.ToMapPoint(a.clientX-e.x,a.clientY-e.y);if(B&&!(0>=B.length)&&u){b.getDrawingMode()==TGOS.TGOverlayType.POLYGON?u.attr({fill:b.options.polygonOptions.fillColor,"fill-opacity":b.options.polygonOptions.fillOpacity,stroke:b.options.polygonOptions.strokeColor,"stroke-opacity":b.options.polygonOptions.strokeOpacity,
"stroke-width":b.options.polygonOptions.strokeWeight}):u.attr({stroke:b.options.polylineOptions.strokeColor,"stroke-opacity":b.options.polylineOptions.strokeOpacity,"stroke-width":b.options.polylineOptions.strokeWeight});for(var e=d.FromMapPoint(B[0].x,B[0].y),e="M"+e.x+","+e.y,f=1;f<B.length;f++)var g=d.FromMapPoint(B[f].x,B[f].y),e=e+("L"+g.x+","+g.y);g=d.FromMapPoint(a.x,a.y);e+="L"+g.x+","+g.y;b.getDrawingMode()==TGOS.TGOverlayType.POLYGON&&(e+="Z");u.attr({path:e})}},J=function(a){e(a);B||(B=
[]);var d=b.map.getMapBase(),f=h(x),g=a.clientX-f.x;a=a.clientY-f.y;d=d.ToMapPoint(g,a);B.push(d);u||(u=b.map.getDrawingPaper().path("M"+g+","+a))},U=function(a){e(a);var d,f=b.map.getMapBase(),g=h(x);a=f.ToMapPoint(a.clientX-g.x,a.clientY-g.y);B.push(a);switch(b.getDrawingMode()){case TGOS.TGOverlayType.LINESTRING:d=new TGOS.TGLineString(B);d=new TGOS.TGLine(b.map,d,{clickable:b.options.polylineOptions.clickable,strokeWeight:b.options.polylineOptions.strokeWeight,zIndex:b.options.polylineOptions.zIndex,
strokeColor:b.options.polylineOptions.strokeColor,strokeOpacity:b.options.polylineOptions.strokeOpacity});d=new TGOS.OverlayCompleteEvent(d,TGOS.TGOverlayType.LINESTRING);TGOS.TGEvent.trigger_(b,"linestring_complete",d);break;case TGOS.TGOverlayType.POLYGON:d=new TGOS.TGLineString(B),d=new TGOS.TGLinearRing(d),d=new TGOS.TGPolygon([d]),d=new TGOS.TGFill(b.map,d,{clickable:b.options.polygonOptions.clickable,fillColor:b.options.polygonOptions.fillColor,fillOpacity:b.options.polygonOptions.fillOpacity,
strokeWeight:b.options.polygonOptions.strokeWeight,zIndex:b.options.polygonOptions.zIndex,strokeColor:b.options.polygonOptions.strokeColor,strokeOpacity:b.options.polygonOptions.strokeOpacity}),d=new TGOS.OverlayCompleteEvent(d,TGOS.TGOverlayType.POLYGON),TGOS.TGEvent.trigger_(b,"polygon_complete",d)}B=null;b.map.getDrawingPaper().clear();u=null;TGOS.TGEvent.trigger_(b,"overlay_complete",d)};this.enterEnvMode=function(){this.setDrawingMode(TGOS.TGOverlayType.ENVELOPE)};this.enterCircleMode=function(){this.setDrawingMode(TGOS.TGOverlayType.CIRCLE)};
this.enterPolyMode=function(){this.setDrawingMode(TGOS.TGOverlayType.POLYGON)};this.enterLineStrMode=function(){this.setDrawingMode(TGOS.TGOverlayType.LINESTRING)};this.enterMarkMode=function(){this.setDrawingMode(TGOS.TGOverlayType.MARKER)};this.enterLabelMode=function(){this.setDrawingMode(TGOS.TGOverlayType.LABEL)};this.setDrawingMode=function(a){x=this.map.getDrawingContainer();this.map.getDiv();var b=this.map.getDrawingContainer();b.style.display="none";x.style.display="none";DetachEvent(x,"mousedown",
D,!1);DetachEvent(x,"click",J,!1);DetachEvent(x,"mousemove",N,!1);DetachEvent(x,"dblclick",U,!1);DetachEvent(x,"click",E,!1);DetachEvent(document.body,"mousemove",v,!1);DetachEvent(document.body,"mouseup",y,!1);DetachEvent(document.body,"mouseleave",y,!1);switch(a){case TGOS.TGOverlayType.ENVELOPE:AttachEvent(x,"mousedown",D,!1);this.drawingMode=TGOS.TGOverlayType.ENVELOPE;TGOS.TGEvent.trigger(this,"drawModeChanged");break;case TGOS.TGOverlayType.CIRCLE:AttachEvent(x,"mousedown",D,!1);this.drawingMode=
TGOS.TGOverlayType.CIRCLE;TGOS.TGEvent.trigger(this,"drawModeChanged");break;case TGOS.TGOverlayType.POLYGON:AttachEvent(x,"click",J,!1);AttachEvent(x,"mousemove",N,!1);AttachEvent(x,"dblclick",U,!1);this.drawingMode=TGOS.TGOverlayType.POLYGON;TGOS.TGEvent.trigger(this,"drawModeChanged");break;case TGOS.TGOverlayType.LINESTRING:AttachEvent(x,"click",J,!1);AttachEvent(x,"mousemove",N,!1);AttachEvent(x,"dblclick",U,!1);this.drawingMode=TGOS.TGOverlayType.LINESTRING;TGOS.TGEvent.trigger(this,"drawModeChanged");
break;case TGOS.TGOverlayType.MARKER:AttachEvent(x,"click",E,!1);this.drawingMode=TGOS.TGOverlayType.MARKER;TGOS.TGEvent.trigger(this,"drawModeChanged");break;case TGOS.TGOverlayType.LABEL:AttachEvent(x,"click",E,!1);this.drawingMode=TGOS.TGOverlayType.LABEL;TGOS.TGEvent.trigger(this,"drawModeChanged");break;case null:this.drawingMode=null,b.style.display="none",x.style.display="none"}this.drawingControl&&this.drawingControl.toggleMode(a);this.drawingMode&&(x.style.display="",b.style.display="")};
this.options={drawingControl:!0,drawingControlOptions:{drawingModes:[TGOS.TGOverlayType.POLYGON,TGOS.TGOverlayType.ENVELOPE,TGOS.TGOverlayType.CIRCLE,TGOS.TGOverlayType.LINESTRING,TGOS.TGOverlayType.LABEL,TGOS.TGOverlayType.MARKER],controlPosition:TGOS.TGControlPosition.BOTTOM_RIGHT},labelOptions:{fontSize:"",fontColor:"",font:"",fontWeight:"",opacity:1,label:"\u6587\u5b57\u6a19\u8a18"},markerOptions:{title:"",clickable:!0,cursor:"",zIndex:"auto",draggable:!1,flat:!1,icon:new TGOS.TGImage(k,new TGOS.TGSize(31,
30),new TGOS.TGPoint(0,0),new TGOS.TGPoint(11,30)),shadow:new TGOS.TGImage(l,new TGOS.TGSize(31,30),new TGOS.TGPoint(0,0),new TGOS.TGPoint(9,25))},polylineOptions:{clickable:!1,strokeWeight:2,zIndex:"auto",strokeColor:"#555555",strokeOpacity:1},polygonOptions:{clickable:!1,fillColor:"#eeaaaa",fillOpacity:0.5,strokeWeight:2,zIndex:"auto",strokeColor:"#555555",strokeOpacity:1},circleOptions:{clickable:!1,fillColor:"#eeaaaa",fillOpacity:0.5,strokeWeight:2,zIndex:"auto",strokeColor:"#555555",strokeOpacity:1},
envelopeOptions:{clickable:!1,fillColor:"#eeaaaa",fillOpacity:0.5,strokeWeight:2,zIndex:"auto",strokeColor:"#555555",strokeOpacity:1}};this.drawingControl=new f(this,this.options.drawingControlOptions.controlPosition,this.options.drawingControlOptions.drawingModes);this.drawingControl.setModes([TGOS.TGOverlayType.ENVELOPE,TGOS.TGOverlayType.POLYGON,TGOS.TGOverlayType.CIRCLE,TGOS.TGOverlayType.LINESTRING,TGOS.TGOverlayType.LABEL,TGOS.TGOverlayType.MARKER]);a&&(this.map=null)},s=g.prototype;s.getDrawingMode=
function(){return this.drawingMode};s.getMap=function(){return this.map};s.setMap=function(a){this.map=a;this.drawingControl&&this.drawingControl.setMap(this.map)};s.setMarkerOptions=function(a){a&&(this.options.markerOptions=a)};s.setLabelOptions=function(a){a&&(this.options.labelOptions=a)};s.setLineOptions=function(a){a&&(this.options.polylineOptions=a)};s.setPolygonOptions=function(a){a&&(this.options.polygonOptions=a)};s.setCircleOptions=function(a){a&&(this.options.circleOptions=a)};s.setEnvOptions=
function(a){a&&(this.options.envelopeOptions=a)};s.setOptions=function(a){a&&(!0==a.drawingControl?this.drawingControl.setVisible(!0):!1==a.drawingControl&&this.drawingControl.setVisible(!1),a.drawingControlOptions&&this.drawingControl.setOptions(a.drawingControlOptions),this.options.circleOptions=a.circleOptions?a.circleOptions:this.options.circleOptions,this.options.envelopeOptions=a.circleOptions?a.envelopeOptions:this.options.envelopeOptions,this.options.markerOptions=a.markerOptions?a.markerOptions:
this.options.markerOptions,this.options.labelOptions=a.circleOptions?a.labelOptions:this.options.labelOptions,this.options.polylineOptions=a.polylineOptions?a.polylineOptions:this.options.polylineOptions,this.options.polygonOptions=a.polygonOptions?a.polygonOptions:this.options.polygonOptions)};TGOS.RegisterEvent(g,"circle_complete marker_complete overlay_complete polygon_complete linestring_complete envelope_complete label_complete drawmodeChanged".split(" "));return g}();(function(){TGOS.MapIdInfo=TGOS.MapIdInfo||{};TGOS.TGMapServiceId=TGOS.TGMapServiceId||{};TGOS.TGMapId=TGOS.TGMapId||{};TGOS.ThemeLayerID={REGION:"M05",REGION_119:"M06",EOC:"M11",FIREDEPARTMENT:"M12",POLICEDEPARTMENT:"M13",NASC:"M14",SOCIALSERVICE:"M15",SHELTERS:"M18",NASC_LANDING:"M19",INDUSTRY:"M21",SCHOOL:"M22",DEBRISFLOW_P:"M08"};TGOS.ThemeTileID={LANDUSE:"T04"};TGOS.TGMapTypeId={TGOSMAP:"TGOSMAP",NLSCMAP:"NLSCMAP",F2IMAGE:"F2IMAGE",ROADMAP:"ROADMAP",HILLSHADE:"HILLSHADE",HILLSHADEMIX:"HILLSHADEMIX"};
TGOS.TGMapTypeIdCode={TGOSMAP:"B01",NLSCMAP:"B02",F2IMAGE:"B04",ROADMAP:"B05",HILLSHADE:"B06",HILLSHADEMIX:"B07"};TGOS.TGMapTypeId_zh_TW={TGOSMAP:"TGOSMAP",NLSCMAP:"\u901a\u7528\u7248\u96fb\u5b50\u5730\u5716",F2IMAGE:"\u798f\u885b\u4e8c\u865f\u885b\u661f\u5f71\u50cf",ROADMAP:"\u798f\u885b\u6df7\u5408\u5730\u5716",HILLSHADE:"\u5730\u5f62\u6688\u6e32\u5716",HILLSHADEMIX:"\u5730\u5f62\u6688\u6e32\u6df7\u5408\u5730\u5716"};TGOS.MapTypeDocumentName={TGOSMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_TGOSMAP3826.aspx",
NLSCMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_NLSCMAP3826.aspx",F2IMAGE:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_F2IMAGE3826.aspx",ROADMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_ROADMAP3826.aspx",HILLSHADE:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_HILLSHADE3826.aspx",HILLSHADEMIX:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_HILLSHADEMIX3826.aspx"};TGOS.MapTypeDocumentNameTWD97_119={NLSCMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_NLSCMAP3825.aspx",TGOSMAP:getWebProtocal()+
getAPIPath()+"Agent/TWD97/Agent_TGOSMAP3825.aspx"};TGOS.MapTypeDocumentNameGoogle={TGOSMAP:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_TGOSMAP3857.aspx",NLSCMAP:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_NLSCMAP3857.aspx",F2IMAGE:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_F2IMAGE3857.aspx",ROADMAP:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_ROADMAP3857.aspx",HILLSHADE:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_HILLSHADE3857.aspx",HILLSHADEMIX:getWebProtocal()+getAPIPath()+
"Agent/Google/Agent_HILLSHADEMIX3857.aspx"};TGOS.MapTypeIndexViewId_zh_TW={TGOSMAP:"TGOSMAP\u7d22\u5f15",NLSCMAP:"\u901a\u7528\u7248\u96fb\u5b50\u5730\u5716\u7d22\u5f15",F2IMAGE:"\u798f\u885b\u4e8c\u865f\u885b\u661f\u5f71\u50cf\u7d22\u5f15",ROADMAP:"\u798f\u885b\u6df7\u5408\u5730\u5716\u7d22\u5f15",HILLSHADE:"\u5730\u5f62\u6688\u6e32\u5716\u7d22\u5f15",HILLSHADEMIX:"\u5730\u5f62\u6688\u6e32\u6df7\u5408\u5730\u5716\u7d22\u5f15"};TGOS.MapTypeIndexViewDocumentName={TGOSMAP:getWebProtocal()+getAPIPath()+
"Agent/TWD97/Agent_TGOSMAP3826_IV.aspx",NLSCMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_NLSCMAP3826_IV.aspx",F2IMAGE:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_F2IMAGE3826_IV.aspx",ROADMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_ROADMAP3826_IV.aspx",HILLSHADE:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_HILLSHADE3826_IV.aspx",HILLSHADEMIX:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_HILLSHADEMIX3826_IV.aspx"};TGOS.MapTypeIndexViewDocumentNameTWD97_119={TGOSMAP:getWebProtocal()+
getAPIPath()+"Agent/TWD97/Agent_TGOSMAP3825_IV.aspx",NLSCMAP:getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_NLSCMAP3825_IV.aspx"};TGOS.MapTypeIndexViewDocumentNameGoogle={TGOSMAP:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_TGOSMAP3857_IV.aspx",NLSCMAP:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_NLSCMAP3857_IV.aspx",F2IMAGE:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_F2IMAGE3857_IV.aspx",ROADMAP:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_ROADMAP3857_IV.aspx",HILLSHADE:getWebProtocal()+
getAPIPath()+"Agent/Google/Agent_HILLSHADE3857_IV.aspx",HILLSHADEMIX:getWebProtocal()+getAPIPath()+"Agent/Google/Agent_HILLSHADEMIX3857_IV.aspx"};TGOS.MapTypeBackgroundColor={TGOSMAP:"#a5bfdd",NLSCMAP:"#a5bfdd",F2IMAGE:"#13437c",ROADMAP:"#13437c",HILLSHADE:"rgb(151,219,242)",HILLSHADEMIX:"rgb(151,219,242)"};TGOS.MapTypeMaxZoomLevel={EPSG3825:{TGOSMAP:13,NLSCMAP:13},EPSG3826:{TGOSMAP:13,NLSCMAP:13,F2IMAGE:11,HILLSHADE:8,ROADMAP:11,HILLSHADEMIX:8},EPSG3857:{TGOSMAP:19,NLSCMAP:19,F2IMAGE:17,HILLSHADE:13,
ROADMAP:17,HILLSHADEMIX:13}};var a=TGOS.TGMapServiceId;a.LANDUSE="LANDUSE";a.REGION="REGION";a.REGION_119="REGION_119";a.EOC="EOC";a.FIREDEPARTMENT="FIREDEPARTMENT";a.POLICEDEPARTMENT="POLICEDEPARTMENT";a.NASC="NASC";a.SOCIALSERVICE="SOCIALSERVICE";a.SHELTERS="SHELTERS";a.NASC_LANDING="NASC_LANDING";a.INDUSTRY="INDUSTRY";a.SCHOOL="SCHOOL";a.DEBRISFLOW_P="DEBRISFLOW_P";a=TGOS.TGMapId;a.LANDUSE="LANDUSE";a.COUNTY="COUNTY";a.TOWN="TOWN";a.VILLAGE="VILLAGE";a.EOC="EOC";a.FIREDEPARTMENT="FIREDEPARTMENT";
a.POLICEDEPARTMENT="POLICEDEPARTMENT";a.NASC="NASC";a.SOCIALSERVICE="SOCIALSERVICE";a.SHELTERS="SHELTERS";a.NASC_LANDING="NASC_LANDING";a.INDUSTRY="INDUSTRY";a.INDUSTRY_A="INDUSTRY_A";a.INDUSTRY_B="INDUSTRY_B";a.INDUSTRY_C="INDUSTRY_C";a.INDUSTRY_D="INDUSTRY_D";a.INDUSTRY_E="INDUSTRY_E";a.INDUSTRY_F="INDUSTRY_F";a.INDUSTRY_G="INDUSTRY_G";a.INDUSTRY_H="INDUSTRY_H";a.INDUSTRY_I="INDUSTRY_I";a.INDUSTRY_J="INDUSTRY_J";a.INDUSTRY_K="INDUSTRY_K";a.INDUSTRY_L="INDUSTRY_L";a.INDUSTRY_M="INDUSTRY_M";a.INDUSTRY_N=
"INDUSTRY_N";a.INDUSTRY_O="INDUSTRY_O";a.INDUSTRY_P="INDUSTRY_P";a.INDUSTRY_Q="INDUSTRY_Q";a.INDUSTRY_R="INDUSTRY_R";a.INDUSTRY_S="INDUSTRY_S";a.SCHOOL="SCHOOL";a.SCHOOL_A="SCHOOL_A";a.SCHOOL_B="SCHOOL_B";a.SCHOOL_C="SCHOOL_C";a.SCHOOL_D="SCHOOL_D";a.SCHOOL_E="SCHOOL_E";a.SCHOOL_F="SCHOOL_F";a.SCHOOL_G="SCHOOL_G";a.SCHOOL_H="SCHOOL_H";a.SCHOOL_I="SCHOOL_I";a.SCHOOL_J="SCHOOL_J";a.SCHOOL_K="SCHOOL_K";a.SCHOOL_L="SCHOOL_L";a.SCHOOL_M="SCHOOL_M";a.SCHOOL_N="SCHOOL_N";a.DEBRISFLOW_P="DEBRISFLOW_P";TGOS.MapIdInfo.DEBRISFLOW_P=
{resource:"DEBRISFLOW_P.cfg",layers:{DEBRISFLOW_P:{name:"dbo.DEBRISFLOW_P",oname:"dbo.DEBRISFLOW_P_201208A",identify:{DEBRISNO:"DEBRISNO",COUNTY01:"COUNTY01",TOWN01:"TOWN01",VILL01:"VILL01",NAME:"NAME",MARK:"MARK",ROADNAME:"ROADNAME",DW_NUMBER:"DW_NUMBER",POTENTIAL:"POTENTIAL"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/18_DEBRISFLOW_P.png",symbolName:"\u571f\u77f3\u6d41\u6f5b\u52e2\u6eaa\u6d41\u5716"}]}}};TGOS.MapIdInfo.LANDUSE={tileoverlay:{path:getWebProtocal()+getAPIPath()+
"/TGOS_WMTS/TWD97/SimpleWMTS_LANDUSE3826.aspx",layer:"Map",matrixSet:"TGOS97_LANDUSE.cfg"},resource:"LANDUSE.cfg",layers:{LANDUSE:{name:"dbo.LANDUSE",oname:"dbo.LANDUSE_201207A",identify:{LCODE_C1:"LCODE_C1",LCODE_C2:"LCODE_C2",LCODE_C3:"LCODE_C3"}}}};TGOS.MapIdInfo.REGION={path:getWebProtocal()+getServicePath()+"REGION/Agent.aspx",resource:"REGION.cfg",layers:{COUNTY:{name:"dbo.COUNTY",oname:"dbo.COUNTY_201211C",identify:{COUNTY:"COUNTY"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/16_REGION_A.png",
symbolName:"\u7e23\u5e02"}]},TOWN:{name:"dbo.TOWN",oname:"dbo.TOWN_201211C",identify:{TOWN:"TOWN",COUNTY:"COUNTY"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/16_REGION_B.png",symbolName:"\u9109\u93ae\u5e02\u5340"}]},VILLAGE:{name:"dbo.VILLAGE",oname:"dbo.VILLAGE_201211C",identify:{VILLAGE:"VILLAGE",TOWN:"TOWN",COUNTY:"COUNTY"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/16_REGION_C.png",symbolName:"\u6751\u91cc"}]}}};TGOS.MapIdInfo.EOC={path:getWebProtocal()+
getServicePath()+"EOC/Agent.aspx",resource:"EOC.cfg",layers:{EOC:{name:"dbo.EOC",oname:"dbo.EOC_201205A",identify:{NAME:"NAME",ADDRESS:"ADDRESS",CONTACT:"CONTACT",NOTE:"NOTE"},buffer:{NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",CONTACT:"CONTACT",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",CONTACT:"CONTACT",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",
Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/21_EOC.png",symbolName:"\u4e2d\u592e\u8207\u5730\u65b9\u7dca\u6025\u61c9\u8b8a\u4e2d\u5fc3"}]}}};TGOS.MapIdInfo.FIREDEPARTMENT={resource:"FIREDEPARTMENT.cfg",layers:{FIREDEPARTMENT:{name:"dbo.FIREDEPARTMENT",oname:"dbo.FIREDEPARTMENT_201206A",identify:{TYPE:"TYPE",NAME:"NAME",ADDRESS:"ADDRESS",CONTACT:"CONTACT"},buffer:{TYPE:"TYPE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",CONTACT:"CONTACT",
X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",CONTACT:"CONTACT",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/22_FIREDEPARTMENT.png",symbolName:"\u5168\u570b\u6d88\u9632\u6a5f\u95dc"}]}}};TGOS.MapIdInfo.POLICEDEPARTMENT={resource:"POLICEDEPARTMENT.cfg",layers:{POLICEDEPARTMENT:{name:"dbo.POLICEDEPARTMENT",
oname:"dbo.POLICEDEPARTMENT_201208A",identify:{NAME:"NAME",CONTACT:"CONTACT",ADDRESS:"ADDRESS"},buffer:{NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",CONTACT:"CONTACT",ADDRESS:"ADDRESS",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",CONTACT:"CONTACT",ADDRESS:"ADDRESS",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/23_POLICEDEPARTMENT.png",
symbolName:"\u5168\u570b\u8b66\u5bdf\u6a5f\u95dc"}]}}};TGOS.MapIdInfo.NASC={resource:"NASC.cfg",layers:{NASC:{name:"dbo.NASC",oname:"dbo.NASC_201204A",identify:{NAME1:"NAME1",NAME2:"NAME2",ADDRESS:"ADDRESS"},buffer:{NAME2:"NAME2",NAME1:"NAME1",AREA:"AREA",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{NAME2:"NAME2",NAME1:"NAME1",AREA:"AREA",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",X_97121:"X_97121",Y_97121:"Y_97121",
X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/24_NASC.png",symbolName:"\u7a7a\u4e2d\u52e4\u52d9\u7e3d\u968a"}]}}};TGOS.MapIdInfo.SOCIALSERVICE={resource:"SOCIALSERVICE.cfg",layers:{SOCIALSERVICE:{name:"dbo.SOCIALSERVICE",oname:"dbo.SOCIALSERVICE_201206A",identify:{ID:"ID",TYPE:"TYPE",NAME:"NAME",ADDRESS:"ADDRESS",CONTACT:"CONTACT"},buffer:{ID:"ID",TYPE:"TYPE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",CONTACT:"CONTACT",
X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{ID:"ID",TYPE:"TYPE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",CONTACT:"CONTACT",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/25_AGED.png",symbolName:"\u8001\u4eba\u798f\u5229\u6a5f\u69cb"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/25_DISABLED.png",symbolName:"\u8eab\u969c\u6a5f\u69cb"}]}}};
TGOS.MapIdInfo.SHELTERS={resource:"SHELTERS.cfg",layers:{SHELTERS:{oname:"dbo.SHELTERS_201204A",name:"dbo.SHELTERS",identify:{ID:"ID_1",NAME:"NAME",ADDRESS:"ADDRESS"},buffer:{ID:"ID_1",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{ID:"ID_1",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/28_SHELTERS.png",
symbolName:"\u907f\u96e3\u6536\u5bb9\u8655\u6240"}]}}};TGOS.MapIdInfo.NASC_LANDING={resource:"NASC_LANDING.cfg",layers:{NASC_LANDING:{name:"dbo.NASC_LANDING",oname:"dbo.NASC_LANDING_201206A",identify:{TYPE:"TYPE",COUNTY:"COUNTY",TOWN:"TOWN",FDO:"FDO",NAME:"NAME"},buffer:{TYPE:"TYPE",NAME:"NAME",FDO:"FDO",COUNTY:"COUNTY",TOWN:"TOWN",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",NAME:"NAME",FDO:"FDO",COUNTY:"COUNTY",TOWN:"TOWN",X_97121:"X_97121",
Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/29_NASC_LANDING.png",symbolName:"\u76f4\u5347\u6a5f\u7dca\u6025\u6551\u96e3\u81e8\u6642\u8d77\u964d\u5834"}]}}};TGOS.MapIdInfo.INDUSTRY={resource:"INDUSTRY.cfg",layers:{INDUSTRY:{name:"dbo.INDUSTRY",oname:"dbo.INDUSTRY_201204A",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY.png",symbolName:"\u5de5\u5546\u4f01\u696d"}]},INDUSTRY_A:{name:"dbo.INDUSTRY_A",oname:"dbo.INDUSTRY_A",
identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_A.png",
symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u8fb2\u3001\u6797\u3001\u6f01\u3001\u7267\u696d"}]},INDUSTRY_B:{name:"dbo.INDUSTRY_B",oname:"dbo.INDUSTRY_B",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_B.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u7926\u696d\u53ca\u571f\u77f3\u63a1\u53d6\u696d"}]},INDUSTRY_C:{name:"dbo.INDUSTRY_C",oname:"dbo.INDUSTRY_C",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",
ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_C.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u88fd\u9020\u696d"}]},INDUSTRY_D:{name:"dbo.INDUSTRY_D",oname:"dbo.INDUSTRY_D",
identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_D.png",
symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u96fb\u529b\u53ca\u71c3\u6c23\u4f9b\u61c9\u696d"}]},INDUSTRY_E:{name:"dbo.INDUSTRY_E",oname:"dbo.INDUSTRY_E",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_E.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u7528\u6c34\u4f9b\u61c9\u53ca\u6c61\u67d3\u6574\u6cbb\u696d"}]},INDUSTRY_F:{name:"dbo.INDUSTRY_F",oname:"dbo.INDUSTRY_F",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_F.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u71df\u9020\u696d"}]},INDUSTRY_G:{name:"dbo.INDUSTRY_G",
oname:"dbo.INDUSTRY_G",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_G.png",
symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u6279\u767c\u53ca\u96f6\u552e\u696d"}]},INDUSTRY_H:{name:"dbo.INDUSTRY_H",oname:"dbo.INDUSTRY_H",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_H.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u904b\u8f38\u53ca\u5009\u5132\u696d"}]},INDUSTRY_I:{name:"dbo.INDUSTRY_I",oname:"dbo.INDUSTRY_I",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_I.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u4f4f\u5bbf\u53ca\u9910\u98f2\u696d"}]},INDUSTRY_J:{name:"dbo.INDUSTRY_J",oname:"dbo.INDUSTRY_J",
identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_J.png",
symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u8cc7\u8a0a\u53ca\u901a\u8a0a\u50b3\u64ad\u696d"}]},INDUSTRY_K:{name:"dbo.INDUSTRY_K",oname:"dbo.INDUSTRY_K",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_K.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u91d1\u878d\u53ca\u4fdd\u96aa\u696d"}]},INDUSTRY_L:{name:"dbo.INDUSTRY_L",oname:"dbo.INDUSTRY_L",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_L.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u4e0d\u52d5\u7522\u696d"}]},INDUSTRY_M:{name:"dbo.INDUSTRY_M",oname:"dbo.INDUSTRY_M",
identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_M.png",
symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u5c08\u696d\u3001\u79d1\u5b78\u53ca\u6280\u8853\u670d\u52d9\u696d"}]},INDUSTRY_N:{name:"dbo.INDUSTRY_N",oname:"dbo.INDUSTRY_N",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_N.png",smybolName:"\u5de5\u5546\u4f01\u696d\u2500\u652f\u63f4\u670d\u52d9\u696d"}]},INDUSTRY_O:{name:"dbo.INDUSTRY_O",oname:"dbo.INDUSTRY_O",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_O.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u516c\u5171\u884c\u653f\u53ca\u570b\u9632\uff1b\u5f37\u5236\u6027\u793e\u6703\u5b89\u5168"}]},
INDUSTRY_P:{name:"dbo.INDUSTRY_P",oname:"dbo.INDUSTRY_P",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",
E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_P.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u6559\u80b2\u670d\u52d9\u696d"}]},INDUSTRY_Q:{name:"dbo.INDUSTRY_Q",oname:"dbo.INDUSTRY_Q",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",
E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_Q.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u91ab\u7642\u4fdd\u5065\u53ca\u793e\u6703\u5de5\u4f5c\u670d\u52d9\u696d"}]},INDUSTRY_R:{name:"dbo.INDUSTRY_R",oname:"dbo.INDUSTRY_R",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_R.png",
symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u85dd\u8853\u3001\u5a1b\u6a02\u53ca\u4f11\u9592\u670d\u52d9\u696d"}]},INDUSTRY_S:{name:"dbo.INDUSTRY_S",oname:"dbo.INDUSTRY_S",identify:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI"},buffer:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{RID:"RID",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",COMMERCEKI:"COMMERCEKI",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/31_INDUSTRY_S.png",symbolName:"\u5de5\u5546\u4f01\u696d\u2500\u5176\u4ed6\u670d\u52d9\u696d"}]}}};TGOS.MapIdInfo.SCHOOL={resource:"SCHOOL.cfg",layers:{SCHOOL:{name:"dbo.SCHOOL",oname:"dbo.SCHOOL_201207A",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",
CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",
E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL.png",symbolName:"\u5404\u7d1a\u5b78\u6821"}]},SCHOOL_A:{name:"dbo.SCHOOL_A",oname:"dbo.SCHOOL_A",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",
X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_A.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u516c\u7acb\u5e7c\u7a1a\u5712"}]},SCHOOL_B:{name:"dbo.SCHOOL_B",oname:"dbo.SCHOOL_B",
identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",
CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_B.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u570b\u6c11\u5c0f\u5b78"}]},SCHOOL_C:{name:"dbo.SCHOOL_C",oname:"dbo.SCHOOL_C",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",
TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_C.png",
symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u9644\u8a2d\u570b\u6c11\u5c0f\u5b78"}]},SCHOOL_D:{name:"dbo.SCHOOL_D",oname:"dbo.SCHOOL_D",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},
query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_D.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u570b\u6c11\u4e2d\u5b78"}]},SCHOOL_E:{name:"dbo.SCHOOL_E",oname:"dbo.SCHOOL_E",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",
ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",
Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_E.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u9644\u8a2d\u570b\u6c11\u4e2d\u5b78"}]},SCHOOL_F:{name:"dbo.SCHOOL_F",oname:"dbo.SCHOOL_F",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",
AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_F.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u9ad8\u7d1a\u4e2d\u5b78"}]},
SCHOOL_G:{name:"dbo.SCHOOL_G",oname:"dbo.SCHOOL_G",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_G.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u9ad8\u7d1a\u8077\u696d\u5b78\u6821"}]},SCHOOL_H:{name:"dbo.SCHOOL_H",oname:"dbo.SCHOOL_H",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",
CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_H.png",
symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u5927\u5c08\u9662\u6821"}]},SCHOOL_I:{name:"dbo.SCHOOL_I",oname:"dbo.SCHOOL_I",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",
CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_I.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u5b97\u6559\u7814\u4fee\u5b78\u9662"}]},SCHOOL_J:{name:"dbo.SCHOOL_J",oname:"dbo.SCHOOL_J",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",
TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",
X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_J.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u8ecd\u8b66\u5927\u5c08\u9662\u6821"}]},SCHOOL_K:{name:"dbo.SCHOOL_K",oname:"dbo.SCHOOL_K",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",
CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_K.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u7279\u6b8a\u6559\u80b2\u5b78\u6821"}]},
SCHOOL_L:{name:"dbo.SCHOOL_L",oname:"dbo.SCHOOL_L",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",
TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_L.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u570b\u4e2d\u5c0f\u88dc\u6821"}]},SCHOOL_M:{name:"dbo.SCHOOL_M",oname:"dbo.SCHOOL_M",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",
CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_M.png",
symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u9ad8\u4e2d\u8077\u9032\u4fee\u5b78\u6821"}]},SCHOOL_N:{name:"dbo.SCHOOL_N",oname:"dbo.SCHOOL_N",identify:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS"},buffer:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",
N:"N"},query:{TYPE:"TYPE",CODE:"CODE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",TEL:"TEL",AREA:"AREA",WEBSITE:"WEBSITE",CLASS:"CLASS",AWAY:"AWAY",NOTE:"NOTE",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/32_SCHOOL_N.png",symbolName:"\u5404\u7d1a\u5b78\u6821\u2500\u7a7a\u5927\u53ca\u5927\u5c08\u6821\u9662\u9644\u8a2d\u9032\u4fee\u5b78\u6821"}]}}}})();TGOS.PROXY_LOCAL="http://localhost:49937/tgproxy.ashx";TGOS.PROXY_SERVICE=getWebProtocal()+getAPIPath()+"proxyservice/proxy.aspx";TGOS.PROXY_SERVICE2=getWebProtocal()+getAPIPath()+"proxyservice/tgproxy.ashx";TGOS.LOCATOR_SERVICE=getWebProtocal()+getServicePath()+"addresslocator/locate.aspx";TGOS.STATISTICS_SERVICE=getWebProtocal()+getAPIPath()+"TGDistrict/statistics.aspx";TGOS.STATISTICS_SERVICE2=getWebProtocal()+getAPIPath()+"TGDistrict/statistics2.aspx";
TGOS.ADDRESSLOCATE_SERVICE=getWebProtocal()+getServicePath()+"TGAddress/TGAddress.aspx";TGOS.QUERY_SERVICE=getWebProtocal()+getServicePath()+"TGQuery/TGQuery.ashx";TGOS.TGKML_ATTR_SERVICE=getWebProtocal()+getAPIPath()+"SGSPWS/TGKMLService.ashx/TGQueryService";TGOS.TGKML_BUFFER_SERVICE=getWebProtocal()+getAPIPath()+"SGSPWS/TGKMLService.ashx/TGBufferService";
TGOS.TGBufferStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS"};TGOS.TGQueryStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS"};
TGOS.TGIdentifyStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS"};TGOS.TGLocatorStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS",TOO_MANY_RESULTS:"TOO_MANY_RESULTS"};
TGOS.TGMeasureStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",INVALID_Coordinate:"INVALID_Coordinate"};TGOS.TGLocatorLocation={APPROXIMATE:"APPROXIMATE",GEOMETRIC_CENTER:"GEOMETRIC_CENTER",RANGE_INTERPOLATED:"GEOMETRIC_CENTER",ROOFTOP:"ROOFTOP"};TGOS.TGUnitSystem={IMPERIAL:"IMPERIAL",METRIC:"METRIC"};TGOS.TGStatMapId={COUNTYMAP:"COUNTYMAP",TOWNMAP:"TOWNMAP",VILLAGEMAP:"VILLAGEMAP"};
TGOS.TGStatServiceStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS"};TGOS.APPID="e4fSdVUolRuc/JESeAPqUU/ZYRZ/pvOPc1lLAP7CnuXDJ33GvU5ozA==";TGOS.Log=function(a,d,b){a=getWebProtocal()+"api.tgos.nat.gov.tw/rec/count.aspx?AppID="+TGOS.APPID+"&APIID="+d+"&DataID="+b;d=document.createElement("script");d.onload=function(){this.parentNode.removeChild(this)};d.type="text/javascript";document.body.appendChild(d);d.src=a};
TGOS.ajaxCount__=0;
(function(){var a=function(a,b,e){a+=0<=a.indexOf("?")?"&":"?";return a+(b+"="+e)};TGOS.getJSON=function(d,b,e,f){var g={src:d},k=util.getInternetExplorerVersion(),l="sn"+TGOS.ajaxCount__;TGOS.getJSON[l]=function(){b.apply(g,arguments);delete TGOS.getJSON[l]};e&&(d=a(e,"serv",encodeURIComponent(d)));d=a(d,"keystr",encodeURIComponent(TGOS.tgHash));d=a(d,"jsonp",encodeURIComponent("TGOS.getJSON['"+l+"']"));e=document.getElementsByTagName("head");if(0!=e.length){var h=document.createElement("script");h.type=
"text/javascript";0<=k&&8>=k?h.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(this.parentNode.removeChild(h),h=void 0)}:h.onload=function(){this.parentNode.removeChild(h);h=void 0};h.onerror=function(){f&&f.call(this);this.parentNode.removeChild(h);h=void 0};TGOS.ajaxCount__++;h.src=d;e[0].appendChild(h)}}})();
TGOS.loadJsonData=function(a,d,b,e,f){var g=document.createElement("script");g.type="text/javascript";document.body.appendChild(g);d=0<=d.indexOf("?")?d+"&keystr="+encodeURIComponent(TGOS.tgHash):d+"?keystr="+encodeURIComponent(TGOS.tgHash);d+="&rn="+Math.floor(1E5*Math.random()+1);g.onreadystatechange=function(){"loaded"==this.readyState&&b.call(this,dataObj)};g.onload=function(){b.call(this,dataObj);g.parentNode.removeChild(g);for(var a in g)delete g[a]};g.onerror=function(){e&&e.call(this)};""==
a?g.src=d:(f&&(g.src=a+"?serv="+encodeURIComponent(d)+"&skip=true&hash="+TGOS.tgHash),g.src=a+"?serv="+encodeURIComponent(d))};TGOS.DistrictID={U01COS01_201212A:"S01",U01COS02_201212A:"S02",U01COS03_201212A:"S03",U01COS04_201212A:"S04",U01COS05_201212A:"S05",U01TOS01_201212A:"S06",U01TOS02_201212A:"S07",U01TOS03_201212A:"S08",U01TOS04_201212A:"S09",U01TOS05_201212A:"S10",U01VIS01_201212A:"S11",U01VIS02_201212A:"S12",U01VIS03_201212A:"S13",U01VIS04_201212A:"S14",U01VIS05_201212A:"S15"};
TGOS.TGDistrictStat=function(){this.stat=function(a,d,b,e){var f={getImageUrl:"",district:[]},g="";switch(a){case TGOS.TGStatMapId.COUNTYMAP:g="county";break;case TGOS.TGStatMapId.TOWNMAP:g="town";break;case TGOS.TGStatMapId.VILLAGEMAP:g="village"}var k="string"==typeof b.layer?b.layer:"",l="string"==typeof b.code?b.code:"",h="ei";switch("string"==typeof b.classifyMethod?b.classifyMethod:""){case "EqualInterval":h="ei";break;case "Quantile":h="qt";break;case "StanDevi":h="sd"}var s="number"==typeof b.classes?
b.classes.toString():"",m="green";switch(b.graduatedColor.toLowerCase()){case "red":m="red";break;case "yellow":m="yellow";break;case "green":m="green";break;case "blue":m="blue"}var t="number"==typeof b.height?b.height.toString():"",n="number"==typeof b.width?b.width.toString():"";TGOS.getJSON(TGOS.STATISTICS_SERVICE2+"?width="+n+"&height="+t+"&district="+g+"&color="+m+"&layer="+k+"&code="+l+"&method="+h+"&classnum="+s,function(a){if(a&&a.error)e.call(this,null,"REQUEST_DENIED");else{f.district=
a.district;f.legend=a.legend;var b=parseFloat(a.envelope.left),d=parseFloat(a.envelope.top),A=parseFloat(a.envelope.right);a=parseFloat(a.envelope.bottom);f.envelope=new TGOS.TGEnvelope(b,d,A,a);b=TGOS.STATISTICS_SERVICE+"?width="+n+"&height="+t+"&district="+g+"&color="+m+"&layer="+k+"&code="+l+"&method="+h+"&classnum="+s;b=0<=b.indexOf("?")?b+"&keystr="+encodeURIComponent(TGOS.tgHash):b+"?keystr="+encodeURIComponent(TGOS.tgHash);f.imageUrl=b;e.call(this,f,"OK");k in TGOS.DistrictID&&TGOS.Log("web",
"A05",TGOS.DistrictID[k])}})}};
TGOS.TGLocateService=function(){function a(a,b,d){var e=[];new TGOS.TGTransformation;var h="",s="";switch(d){case "84":s="EPSG:4326";break;case "97_119":s="EPSG:3825";break;default:s="EPSG:3826"}TGOS.getJSON(TGOS.ADDRESSLOCATE_SERVICE+"?oAddress="+a.address+"&oSRS="+s+"&oResultDataType=jsonp&pnum="+parseInt(a.pageNumber),function(a){if(a&&a.Info&&a.Info.length)if(0>=parseInt(a.Info[0].OutTotal))h=TGOS.TGLocatorStatus.ZERO_RESULTS,b.call(this,null,h);else{h=TGOS.TGLocatorStatus.OK;30<parseInt(a.Info[0].OutTotal)&&
(h=TGOS.TGLocatorStatus.TOO_MANY_RESULTS);for(var d=0;d<a.AddressList.length;d++){var f={addressComponents:[],formattedAddress:"",geometry:{bounds:"",location:"",locatorLocation:"",geometry:"",viewPort:""},types:[]},k=parseFloat(a.AddressList[d].X),s=parseFloat(a.AddressList[d].Y);f.addressComponents={county:a.AddressList[d].COUNTY,town:a.AddressList[d].TOWN,village:a.AddressList[d].VILLAGE,neighborhood:a.AddressList[d].NEIGHBORHOOD,road:a.AddressList[d].ROAD,section:a.AddressList[d].SECTION,lane:a.AddressList[d].LANE,
alley:a.AddressList[d].ALLEY,sub_alley:a.AddressList[d].SUB_ALLEY,number:a.AddressList[d].NUMBER};f.formattedAddress=a.AddressList[d].FULL_ADDR;f.geometry.location=new TGOS.TGPoint(k,s);f.geometry.viewport=new TGOS.TGEnvelope(k-500,s+500,k+500,s-500);e.push(f)}b.call(this,e,h);TGOS.Log("web","A12","")}else h=TGOS.TGLocatorStatus.ERROR,b.call(this,null,h)})}function d(a,b,d){var e=[],h=new TGOS.TGTransformation,s={addressComponents:[],formattedAddress:"",geometry:{bounds:"",location:"",locatorLocation:"",
geometry:"",viewPort:""},types:[]},m=a.town?a.town:"",t=a.county?a.county:"",t=t.replace("\u6843\u5712\u7e23","\u6843\u5712\u5e02");TGOS.getJSON(TGOS.LOCATOR_SERVICE+"?op=poi&keyword="+a.poi+"&pnum="+parseInt(a.pageNumber)+"&county="+t+"&town="+m,function(a){if(a&&a.error)b.call(this,e,"REQUEST_DENIED",0,0);else if(!a||!a.Table||0>=a.Table.length)b.call(this,e,TGOS.TGLocatorStatus.ZERO_RESULTS,0,0);else{for(var f=0;f<a.Table.length;f++){s={addressComponents:[],formattedAddress:"",geometry:{bounds:"",
location:"",locatorLocation:"",geometry:"",viewPort:""},types:[]};var m=parseFloat(a.Table[f].X_97121),t=parseFloat(a.Table[f].Y_97121);if("84"==d){var A,C;h.twd97towgs84(m,t);s.geometry.location=new TGOS.TGPoint(h.transResult.x,h.transResult.y);h.twd97towgs84(m-1E3,t+1E3);A=h.transResult.x;C=h.transResult.y;h.twd97towgs84(m+1E3,t-1E3);t=h.transResult.x;m=h.transResult.y;s.geometry.viewport=new TGOS.TGEnvelope(A,C,t,m)}else"97_119"==d?(h.twd97towgs84(m,t),h.wgs84totwd97_119(h.transResult.x,h.transResult.y),
s.geometry.location=new TGOS.TGPoint(h.transResult.x,h.transResult.y),h.twd97towgs84(m-1E3,t+1E3),h.wgs84totwd97_119(h.transResult.x,h.transResult.y),A=h.transResult.x,C=h.transResult.y,h.twd97towgs84(m+1E3,t-1E3),h.wgs84totwd97_119(h.transResult.x,h.transResult.y),t=h.transResult.x,m=h.transResult.y,s.geometry.viewport=new TGOS.TGEnvelope(A,C,t,m)):(s.geometry.viewport=new TGOS.TGEnvelope(m-1E3,t+1E3,m+1E3,t-1E3),s.geometry.location=new TGOS.TGPoint(m,t));s.poiName=a.Table[f].LANDMARKNA;s.county=
a.Table[f].COUNTYNAME;s.town=a.Table[f].TOWNNAME;e.push(s)}b.call(this,e,1<a.pages?TGOS.TGLocatorStatus.TOO_MANY_RESULTS:TGOS.TGLocatorStatus.OK,a.items,a.pages);TGOS.Log("web","A13","")}})}function b(a,b,d){var e=[],h=new TGOS.TGTransformation,s=a.town?a.town:"",m=a.county?a.county:"",m=m.replace("\u6843\u5712\u7e23","\u6843\u5712\u5e02");TGOS.getJSON(TGOS.LOCATOR_SERVICE+"?op=rd&road="+a.roadLocation+"&pnum="+parseInt(a.pageNumber)+"&county="+m+"&town="+s,function(a){if(a&&a.error)b.call(this,e,
"REQUEST_DENIED",0,0);else if(a&&a.results){for(r=0;r<a.results.length;r++){var f={addressComponents:[],formattedAddress:"",geometry:{bounds:"",location:"",locatorLocation:"",geometry:"",viewPort:""},types:[]},m=parseFloat(a.results[r].min_x),s=parseFloat(a.results[r].min_y),z=parseFloat(a.results[r].max_x),A=parseFloat(a.results[r].max_y),C=parseFloat(a.results[r].point_x),F=parseFloat(a.results[r].point_y);"84"==d?(h.twd97towgs84(C,F),f.geometry.location=new TGOS.TGPoint(h.transResult.x,h.transResult.y),
h.twd97towgs84(m,A),m=h.transResult.x,A=h.transResult.y,h.twd97towgs84(z,s),z=h.transResult.x,s=h.transResult.y):"97_119"==d?(h.twd97towgs84(C,F),h.wgs84totwd97_119(h.transResult.x,h.transResult.y),f.geometry.location=new TGOS.TGPoint(h.transResult.x,h.transResult.y),h.twd97towgs84(m,A),h.wgs84totwd97_119(h.transResult.x,h.transResult.y),m=h.transResult.x,A=h.transResult.y,h.twd97towgs84(z,s),h.wgs84totwd97_119(h.transResult.x,h.transResult.y),z=h.transResult.x,s=h.transResult.y):f.geometry.location=
new TGOS.TGPoint(C,F);s=new TGOS.TGEnvelope(m,A,z,s);f.geometry.viewport=s;f.county=a.results[r].countyname;f.town=a.results[r].townname;e.push(f)}b.call(this,e,1<a.pages?TGOS.TGLocatorStatus.TOO_MANY_RESULTS:TGOS.TGLocatorStatus.OK,a.items,a.pages);TGOS.Log("web","A14","")}else b.call(this,e,TGOS.TGLocatorStatus.ZERO_RESULTS,0,0)})}function e(a,b,d){var e=[],h=new TGOS.TGTransformation,s={addressComponents:[],formattedAddress:"",geometry:{bounds:"",location:"",locatorLocation:"",geometry:"",viewport:""},
types:[]};a=encodeURIComponent(a.district.replace("\u6843\u5712\u7e23","\u6843\u5712\u5e02"));TGOS.getJSON(TGOS.LOCATOR_SERVICE+"?op=dist&district="+a,function(a){if(a&&a.error)b.call(this,null,"REQUEST_DENIED");else if(a&&"OK"==a.status){var f=parseFloat(a.Information.x),n=parseFloat(a.Information.y),q=new TGOS.TGEnvelope(a.Information.minX,a.Information.maxY,a.Information.maxX,a.Information.minY);a=util.parsePolyWkt(a.Information.geometry);if("84"==d)h.twd97towgs84(f,n),s.geometry.location=new TGOS.TGPoint(h.transResult.x,
h.transResult.y),h.twd97towgs84(q.left,q.top),f=h.transResult.x,n=h.transResult.y,h.twd97towgs84(q.left,q.top),f=h.transResult.x,n=h.transResult.y,s.geometry.viewport=new TGOS.TGEnvelope(f,n,w,z);else if("97_119"==d){h.twd97towgs84(f,n);h.wgs84totwd97_119(h.transResult.x,h.transResult.y);s.geometry.location=new TGOS.TGPoint(h.transResult.x,h.transResult.y);h.twd97towgs84(q.left,q.top);h.wgs84totwd97_119(h.transResult.x,h.transResult.y);f=h.transResult.x;n=h.transResult.y;h.twd97towgs84(q.right,q.bottom);
h.wgs84totwd97_119(h.transResult.x,h.transResult.y);var w=h.transResult.x,z=h.transResult.y;s.geometry.viewport=new TGOS.TGEnvelope(f,n,w,z)}else s.geometry.location=new TGOS.TGPoint(f,n),s.geometry.viewport=q,s.geometry.geometry=a;e.push(s);b.call(this,e,TGOS.TGLocatorStatus.OK);TGOS.Log("web","A15","")}else b.call(this,null,TGOS.TGLocatorStatus.ZERO_RESULTS)})}this.locateWGS84=function(f,g){"undefined"!=typeof f.address?a(f,g,"84"):"undefined"!=typeof f.poi?d(f,g,"84"):"undefined"!=typeof f.roadLocation?
b(f,g,"84"):"undefined"!=typeof f.district?e(f,g,"84"):g.call(this,null,TGOS.TGLocatorStatus.INVALID_REQUEST)};this.locateTWD97=function(f,g){"undefined"!=typeof f.address?a(f,g,"97"):"undefined"!=typeof f.poi?d(f,g,"97"):"undefined"!=typeof f.roadLocation?b(f,g,"97"):"undefined"!=typeof f.district?e(f,g,"97"):g.call(this,null,TGOS.TGLocatorStatus.INVALID_REQUEST)};this.locateTWD97_119=function(f,g){"undefined"!=typeof f.address?a(f,g,"97_119"):"undefined"!=typeof f.poi?d(f,g,"97_119"):"undefined"!=
typeof f.roadLocation?b(f,g,"97_119"):"undefined"!=typeof f.district?e(f,g,"97_119"):g.call(this,null,TGOS.TGLocatorStatus.INVALID_REQUEST)};this.setCenter=function(a,b){a.setCenter(b)};this.fitBounds=function(a,b){a.fitBounds(b)}};
TGOS.TGMeasureService=function(){this.twd97LineMeasure=function(a,d){var b,e;a instanceof TGOS.TGLineString?(b=a.getLength(),e="OK"):(b=null,e="INVALID_REQUEST");d.call(this,b,e);TGOS.Log("web","A07","")};this.twd97PolygonMeasure=function(a,d){var b,e;a instanceof TGOS.TGPolygon?(b=a.getArea(),e="OK"):(b=null,e="INVALID_REQUEST");d.call(this,b,e);TGOS.Log("web","A07","")};this.twd97_119LineMeasure=function(a,d){var b,e;a instanceof TGOS.TGLineString?(b=a.getLength(),e="OK"):(b=null,e="INVALID_REQUEST");
d.call(this,b,e);TGOS.Log("web","A07","")};this.twd97_119PolygonMeasure=function(a,d){var b,e;a instanceof TGOS.TGPolygon?(b=a.getArea(),e="OK"):(b=null,e="INVALID_REQUEST");d.call(this,b,e);TGOS.Log("web","A07","")};this.wgs84LineMeasure=function(a,d){var b,e;b=new TGOS.TGTransformation;var f=[],g,k;if(a instanceof TGOS.TGLineString){e=a.getPath();for(var l=0;l<e.length;l++)b.wgs84totwd97(e[l].x,e[l].y),g=b.transResult.x,k=b.transResult.y,g=new TGOS.TGPoint(g,k),f.push(g);b=new TGOS.TGLineString(f);
b=b.getLength();e="OK"}else b=null,e="INVALID_REQUEST";d.call(this,b,e);TGOS.Log("web","A07","")};this.wgs84PolygonMeasure=function(a,d){var b,e;b=new TGOS.TGTransformation;var f=[],g,k;if(a instanceof TGOS.TGPolygon){e=a.getExteriorRing().getPath().getPath();for(var l=0;l<e.length;l++)b.wgs84totwd97(e[l].x,e[l].y),g=b.transResult.x,k=b.transResult.y,g=new TGOS.TGPoint(g,k),f.push(g);b=new TGOS.TGLineString(f);b=new TGOS.TGLinearRing(b);b=new TGOS.TGPolygon([b]);b=b.getArea();e="OK"}else b=null,e=
"INVALID_REQUEST";d.call(this,b,e);TGOS.Log("web","A07","")}};
TGOS.TGTileOverlay=function(){var a=[],d,b="auto";this.getLayerById=function(b){for(var d=0;d<a.length;d++)if(a[d].id==b)return a[d];return null};this.setZIndex=function(d){b=d;for(d=0;d<a.length;d++)a[d].setZIndex(b)};this.getZIndex=function(){return b};this.setTileOpacity=function(a,b){if(null!=this.getLayerById(b)){if(null==this.getLayerById(b))throw"Layer Not Found";this.getLayerById(b).setTileOpacity(a)}};this.removeTileOverlay=function(b){if(null!=this.getLayerById(b)){d.removeWMTSLayer(this.getLayerById(b));
for(var f=0;f<a.length;f++)a[f].id==b&&a.splice(f,1)}};this.getThemeTile=function(b,f,g,k){var l=this;if(null==this.getLayerById(b)){d=f.map;null!=f.zIndex&&this.setZIndex(f.zIndex);var h=f.map.addWMTSLayer("temp",TGOS.MapIdInfo[b].tileoverlay.path,TGOS.MapIdInfo[b].tileoverlay,f,function(){l.getLayerById(b).getTiles(f.left,f.top,f.right,f.bottom,f.scaleLevel,k)});h.setZIndex(this.getZIndex());h.setTileOpacity(g);h.id=b;a.push(h);f.overlay||h.putVisible(!1)}b in TGOS.ThemeTileID&&TGOS.Log("web","A03",
TGOS.ThemeTileID[b])}};TGOS.TGThemeTileRequest=function(){this.bottom=this.top=this.right=this.left=null;this.map=this.overlay=!0;this.setScaleLevel=null};TGOS.TGThemeTileResult=function(){this.LeftTopAnchor=this.ImageUrl=null};
TGOS.TGThemeLayer=function(){this.getThemePic=function(a,d,b,e){b=TGOS.QUERY_SERVICE+"?op=image&res="+TGOS.MapIdInfo[a].resource+"&layer="+TGOS.MapIdInfo[a].layers[d].name+"&Left="+b.left+"&Top="+b.top+"&Right="+b.right+"&Bottom="+b.bottom+"&Width="+b.width+"&Height="+b.height+"&keystr="+encodeURIComponent(TGOS.tgHash);e.call(this,b,"OK",TGOS.MapIdInfo[a].layers[d].legends);a in TGOS.ThemeLayerID&&TGOS.Log("web","A04",TGOS.ThemeLayerID[a])}};
TGOS.TGThemePicRequest=function(){this.bottom=this.top=this.right=this.left=null;this.height=this.width=256;this.setRange=function(a,d,b,e){this.left=a;this.right=d;this.top=b;this.bottom=e};this.setImageSize=function(a,d){this.height=a;this.width=d}};
TGOS.TGFeatureIdentify=function(){function a(a){return a.replace(/^[\s]*/gi,"").replace(/[\s]*$/gi,"")}this.identify=function(d,b,e,f,g){function k(a,b){var d=new TGOS.TGTransformation,e=[],f=a.indexOf("("),g=a.indexOf(")");f++;a=a.substring(f,g);f=a.split(",");for(g=0;g<f.length;g++){var h=f[g].split(" ");if(isNaN(h[0])||isNaN(h[1]))return!1;b?(d.twd97towgs84(parseFloat(h[0]),parseFloat(h[1])),e.push(new TGOS.TGPoint(d.transResult.x,d.transResult.y))):e.push(new TGOS.TGPoint(parseFloat(h[0]),parseFloat(h[1])))}return new TGOS.TGLineString(e)}
function l(a,b){var d=a.indexOf("("),e=a.indexOf(")");d++;a=a.substring(d,e);d=a.split(" ");return isNaN(d[0])||isNaN(d[1])?!1:b?(e=new TGOS.TGTransformation,e.twd97towgs84(parseFloat(d[0]),parseFloat(d[1])),new TGOS.TGPoint(e.transResult.x,e.transResult.y)):new TGOS.TGPoint(parseFloat(d[0]),parseFloat(d[1]))}function h(a,b,d){var e=a.indexOf("(");e++;for(var f=[];-1!=e;){var g=a.indexOf("))",e),e=a.substring(e,g+2);"MULTIPOINT"==b?f.push(l(e,d)):"MULTILINESTRING"==b?f.push(k(e,d)):"MULTIPOLYGON"==
b&&f.push(util.parsePolyWkt(e,d));e=a.indexOf("(",g-1)}return f}function s(e){var m="";if(e){e=e.Feature;var n=null,u=[],n=null,q;for(q in TGOS.MapIdInfo[d].layers[b].identify)m=m+q+",";z.fieldName=m;if("undefined"==typeof e.length){u=[];n=e.Values;for(q in TGOS.MapIdInfo[d].layers[b].identify){var s=n[TGOS.MapIdInfo[d].layers[b].identify[q]];u.push(s)}n=e.Geometry;s=n.indexOf("(");s=a(n.substr(0,s).toUpperCase());z.featureType=s;var t="EPSG3857"==f;if("POINT"==s)var y=[l(n,t)];else"LINESTRING"==
s?y=[k(n,t)]:"POLYGON"==s?y=[util.parsePolyWkt(n)]:-1!=s.indexOf("MULTI")&&(y=new h(n,s,t));z.fieldAttr.push(u);z.geometry=y}else for(m=0;m<e.length;m++){u=[];n=e[m].Values;for(q in TGOS.MapIdInfo[d].layers[b].identify)s=n[TGOS.MapIdInfo[d].layers[b].identify[q]],u.push(s);n=e[m].Geometry;s=n.indexOf("(");s=a(n.substr(0,s).toUpperCase());z.featureType=s;t="EPSG3857"==f;"POINT"==s?y=[l(n,t)]:"LINESTRING"==s?y=[k(n,t)]:"POLYGON"==s?y=[util.parsePolyWkt(n,t)]:-1!=s.indexOf("MULTI")&&(y=new h(n,s,t));
z.fieldAttr.push(u);z.geometry=y}g.call(this,z,"OK");TGOS.Log("web","A08",TGOS.ThemeLayerID[d])}else g.call(this,null,"ZERO_RESULTS")}function m(){var a=TGOS.QUERY_SERVICE+"?op=fid_s",a=a+"&layer=dbo.LANDUSE_201207A_1"+("&res="+TGOS.MapIdInfo[d].resource),a=a+("&geom=POLYGON(("+A+"))");TGOS.getJSON(a,function(a){a?s(a):(a=TGOS.QUERY_SERVICE+"?op=fid_s",a=a+"&layer=dbo.LANDUSE_201207A_2"+("&res="+TGOS.MapIdInfo[d].resource),a+="&geom=POLYGON(("+A+"))",TGOS.getJSON(a,function(a){s(a)}))})}if(e instanceof
TGOS.TGPoint){var t=new TGOS.TGPoint(0,0),n=new TGOS.TGPoint(0,0),q=new TGOS.TGPoint(0,0),w=new TGOS.TGPoint(0,0),z={fieldAttr:[],geometry:[]};t.x=e.x;t.y=e.y+30;n.x=e.x+30;n.y=e.y;q.x=e.x;q.y=e.y-30;w.x=e.x-30;w.y=e.y;var A=t.x+" "+t.y+","+n.x+" "+n.y+","+q.x+" "+q.y+","+w.x+" "+w.y+","+t.x+" "+t.y;"LANDUSE"==d?m():(t=TGOS.QUERY_SERVICE+"?op=fid",t+="&layer="+TGOS.MapIdInfo[d].layers[b].name,t+="&res="+TGOS.MapIdInfo[d].resource,t+="&cx="+e.x,t+="&cy="+e.y,TGOS.getJSON(t,function(e){var m="";if(e&&
e.error)g.call(this,null,"REQUEST_DENIED");else if(e&&e.Feature){e=e.Feature;var n=null,u=[],n=null,q;for(q in TGOS.MapIdInfo[d].layers[b].identify)m=m+q+",";z.fieldName=m;if("undefined"==typeof e.length){u=[];n=e.Values;for(q in TGOS.MapIdInfo[d].layers[b].identify){var s=n[TGOS.MapIdInfo[d].layers[b].identify[q]];u.push(s)}n=e.Geometry;s=n.indexOf("(");s=a(n.substr(0,s).toUpperCase());z.featureType=s;var t="EPSG3857"==f;if("POINT"==s)var y=[l(n,t)];else"LINESTRING"==s?y=[k(n,t)]:"POLYGON"==s?y=
[util.parsePolyWkt(n)]:-1!=s.indexOf("MULTI")&&(y=new h(n,s,t));z.fieldAttr.push(u);z.geometry=y}else for(m=0;m<e.length;m++){u=[];n=e[m].Values;for(q in TGOS.MapIdInfo[d].layers[b].identify)s=n[TGOS.MapIdInfo[d].layers[b].identify[q]],u.push(s);n=e[m].Geometry;s=n.indexOf("(");s=a(n.substr(0,s).toUpperCase());z.featureType=s;t="EPSG3857"==f;"POINT"==s?y=[l(n,t)]:"LINESTRING"==s?y=[k(n,t)]:"POLYGON"==s?y=[util.parsePolyWkt(n,t)]:-1!=s.indexOf("MULTI")&&(y=new h(n,s,t));z.fieldAttr.push(u);z.geometry=
y}g.call(this,z,"OK");TGOS.Log("web","A08",TGOS.ThemeLayerID[d])}else g.call(this,null,"ZERO_RESULTS")}))}else g.call(this,null,"INVALID_REQUEST")}};TGOS.parsePointWKT=function(a){var d=a.indexOf("("),b=a.indexOf(")");d++;a=a.substring(d,b);a=a.split(" ");return isNaN(a[0])||isNaN(a[1])?!1:new TGOS.TGPoint(parseFloat(a[0]),parseFloat(a[1]))};
TGOS.TGAttriQuery=function(){this.identify=function(a,d,b,e,f){var g="",k={},l=b.county,h=b.town,s=b.keyword;""!=h&&""==l?(g=g+"[TOWN]='"+h+"'",s&&(g=g+" AND [NAME] LIKE N'%"+s+"%'")):""==h&&""!=l?(g=g+"[COUNTY]='"+l.replace("\u53f0","\u81fa")+"'",s&&(g=g+" AND [NAME] LIKE N'%"+s+"%'")):""!=h&&""!=l?(l&&(g=g+"[TOWN]='"+h+"' AND [COUNTY]='"+l.replace("\u53f0","\u81fa")+"'"),s&&(g=g+" AND [NAME] LIKE N'%"+s+"%'")):s&&(g=g+" [NAME] LIKE N'%"+s+"%'");b=isNaN(b.pageNumber)||1>b.pageNumber?1:parseInt(b.pageNumber);
l=TGOS.QUERY_SERVICE+"?op=att&res="+TGOS.MapIdInfo[a].resource;l+="&layer="+TGOS.MapIdInfo[a].layers[d].name;l+="&EXPR="+encodeURIComponent(g);k.fieldAttr=[];k.position=[];TGOS.getJSON(l+("&page="+b),function(b){var g="";if(b&&b.error)f.call(this,null,"REQUEST_DENIED",0,0);else if(b){var h=b.Feature,l=null,s=[],z=null,A=b.items;b=b.pages;for(var C in TGOS.MapIdInfo[a].layers[d].query)g=g+C+",";k.fieldName=g;for(var g=h.length,F=0;F<g;F++){s=[];l=h[F].Values;z=h[F].Geometry;for(C in TGOS.MapIdInfo[a].layers[d].query)s.push(l[TGOS.MapIdInfo[a].layers[d].query[C]]);
switch(e){case "EPSG3857":var l=TGOS.parsePointWKT(z),l=TGOS.TWD97toWGS84(l.x,l.y),B=new TGOS.TGPoint(l.x,l.y);break;case "EPSG3826":B=TGOS.parsePointWKT(z);break;case "EPSG3825":l=TGOS.parsePointWKT(z),l=TGOS.TWD97toTWD97_119(l.x,l.y),B=new TGOS.TGPoint(l.x,l.y)}k.fieldAttr.push(s);k.position.push(B)}f.call(this,k,"OK",A,b);TGOS.Log("web","A09",TGOS.ThemeLayerID[a])}else f.call(this,null,"ZERO_RESULTS",0,0)})}};
TGOS.TGPointBuffer=function(){this.identify=function(a,d,b,e,f){if(b.position instanceof TGOS.TGPoint&&"number"==typeof b.distance){new TGOS.TGPoint(0,0);new TGOS.TGPoint(0,0);new TGOS.TGPoint(0,0);new TGOS.TGPoint(0,0);var g={fieldAttr:[],position:[]},k=TGOS.QUERY_SERVICE+"?op=pb",k=k+("&layer="+TGOS.MapIdInfo[a].layers[d].name),k=k+("&res="+TGOS.MapIdInfo[a].resource),k=k+("&cx="+b.position.x),k=k+("&cy="+b.position.y),k=k+("&range="+b.distance);TGOS.getJSON(k,function(b){var h="";if(b&&b.error)f.call(this,
null,"REQUEST_DENIED");else if(b){b=b.Feature;var k=null,m=null,t=[],n;for(n in TGOS.MapIdInfo[a].layers[d].buffer)h=h+n+",";g.fieldName=h;if("undefined"==typeof b.length){t=[];k=b.Values;m=b.Geometry;switch(e){case "EPSG3857":var q=TGOS.parsePointWKT(m),q=TGOS.TWD97toWGS84(q.x,q.y),q=new TGOS.TGPoint(q.x,q.y);break;case "EPSG3826":q=TGOS.parsePointWKT(m);break;case "EPSG3825":q=TGOS.parsePointWKT(m),q=TGOS.TWD97toTWD97_119(q.x,q.y),q=new TGOS.TGPoint(q.x,q.y)}for(n in TGOS.MapIdInfo[a].layers[d].buffer){var w=
k[TGOS.MapIdInfo[a].layers[d].buffer[n]];t.push(w)}g.position.push(q);g.fieldAttr.push(t)}else for(h=0;h<b.length;h++){t=[];k=b[h].Values;m=b[h].Geometry;for(n in TGOS.MapIdInfo[a].layers[d].buffer)w=k[TGOS.MapIdInfo[a].layers[d].buffer[n]],t.push(w);switch(e){case "EPSG3857":q=TGOS.parsePointWKT(m);q=TGOS.TWD97toWGS84(q.x,q.y);q=new TGOS.TGPoint(q.x,q.y);break;case "EPSG3826":q=TGOS.parsePointWKT(m);break;case "EPSG3825":q=TGOS.parsePointWKT(m),q=TGOS.TWD97toTWD97_119(q.x,q.y),q=new TGOS.TGPoint(q.x,
q.y)}g.position.push(q);g.fieldAttr.push(t)}f.call(this,g,"OK");TGOS.Log("web","A10",TGOS.ThemeLayerID[a])}else f.call(this,null,"ZERO_RESULTS")})}else f.call(this,null,"INVALID_REQUEST")}};
TGOS.TGKmlQuery=function(){this.identify=function(a,d,b,e){if(!(a in TGOS.TGMapServiceId))throw"Invalid TGMapServiceId";if(!(d in TGOS.TGMapId))throw"Invalid mapID";var f=TGOS.TGKML_ATTR_SERVICE,f=util.appendQStr(f,"TGMapServiceId",a),f=util.appendQStr(f,"TGMapId",d);"string"==typeof b.county&&(f=util.appendQStr(f,"County",b.county));"string"==typeof b.town&&(f=util.appendQStr(f,"Town",b.town));"string"==typeof b.keyword&&(f=util.appendQStr(f,"Keyword",b.keyword));e&&e.call(this,[{kmlUrl:f}],"OK")}};
TGOS.TGKmlBuffer=function(a){this.identify=function(a,b,e,f){if(!(a in TGOS.TGMapServiceId))throw"Invalid TGMapServiceId";if(!(b in TGOS.TGMapId))throw"Invalid mapID";var g=TGOS.TGKML_BUFFER_SERVICE,g=util.appendQStr(g,"TGMapServiceId",a);switch(e.coordSys){case "3826":break;case "4326":break;default:throw"Invalid CoordSys";}g=util.appendQStr(g,"EPSG",e.coordSys);g=util.appendQStr(g,"TGMapId",b);if(!util.isFloat(e.pointX))throw"Invalid pointX";g=util.appendQStr(g,"PointX",e.pointX);if(!util.isFloat(e.pointY))throw"Invalid pointY";
g=util.appendQStr(g,"PointY",e.pointY);if(!util.isFloat(e.distance))throw"Invalid distance";g=util.appendQStr(g,"Distance",e.distance);f&&f.call(this,[{kmlUrl:g}],"OK")}};var util=util||{info:"utility class"};util.isInt=function(a){return!isNaN(parseInt(a))};util.isUInt=function(a){return!isNaN(parseInt(a))||0<=parseInt(a)};util.isFloat=function(a){return!isNaN(parseFloat(a))};util.appendQStr=function(a,d,b){a||(a="");return a=-1<a.indexOf("?")?a.concat("&"+d+"="+b):a.concat("?"+d+"="+b)};
util.parsePolyWkt=function(a){var d=/^\s*\(?(.*?)\)?\s*$/,b=/\s+/,e=/\s*,\s*/,f=/\)\s*,\s*\(/,g=function(a){var d=[];a=a.split(e);for(var f=0;f<a.length;f++){var g=a[f].split(b),k=parseFloat(g[0]),g=parseFloat(g[1]);isNaN(k)||isNaN(g)||(k=new TGOS.TGPoint(k,g),d.push(k))}return d},k=[];if(0<=a.indexOf("MULTIPOLYGON"))for(a=a.replace("MULTIPOLYGON","").replace(d,"$1").replace(d,"$1"),a=a.split(f),f=0;f<a.length;f++){var l=a[f].replace(d,"$1"),l=g(l),l=new TGOS.TGLineString(l),l=new TGOS.TGLinearRing(l);
k.push(l)}else for(d=a.split(f),a=0;a<d.length;a++)l=g(d[a]),l=new TGOS.TGLineString(l),l=new TGOS.TGLinearRing(l),k.push(l);return new TGOS.TGPolygon(k)};util.decompress=function(a,d){d=Math.pow(10,-d);for(var b=a.length,e=0,f=0,g=0,k=[];e<b;){var l,h=0,s=0;do l=a.charCodeAt(e++)-63,s|=(l&31)<<h,h+=5;while(32<=l);f+=s&1?~(s>>1):s>>1;s=h=0;do l=a.charCodeAt(e++)-63,s|=(l&31)<<h,h+=5;while(32<=l);g+=s&1?~(s>>1):s>>1;k.push(f*d);k.push(g*d)}return k};TGOS.TGAddressStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",ZERO_RESULTS:"ZERO_RESULTS"};
TGOS.TGAddress=function(){return function(){this.nearestAddress=function(a,d,b){if(!(a instanceof TGOS.TGPoint))throw"Must be a Point @nearestAddress";var e="EPSG:3826";switch(d){case TGOS.TGCoordSys.EPSG3857:e="EPSG:4326";break;case TGOS.TGCoordSys.EPSG3826:e="EPSG:3826";break;case TGOS.TGCoordSys.EPSG3825:e="EPSG:3825"}TGOS.getJSON(TGOS.ADDRESSLOCATE_SERVICE+"?op=PointQueryNearAddr&oAPPId="+TGOS.APPID+"&oAPIKey="+TGOS.APIKey+"&oSRS="+e+"&oResultDataType=jsonp&oPX="+a.x+"&oPY="+a.y,function(a){a=
a.AddressList;0>=a.length?b.call(this,null,TGOS.TGAddressStatus.ZERO_RESULTS):(a=a[0],a={formattedAddress:a.FULL_ADDR,addressComponents:{county:a.COUNTY,town:a.TOWN,village:a.VILLAGE,neighborhood:a.NEIGHBORHOOD,road:a.ROAD,section:a.SECTION,lane:a.LANE,alley:a.ALLEY,sub_alley:a.SUB_ALLEY,tong:a.TONG,number:a.NUMBER},geometry:{bounds:new TGOS.TGEnvelope(a.X,a.Y,a.X,a.Y),location:new TGOS.TGPoint(a.X,a.Y)}},b.call(this,a,TGOS.TGAddressStatus.OK))},null,null)}}}();TGOS.TGMileageType={HIGHWAY:"HIGHWAY",EXPRESSWAY:"EXPRESSWAY",PROVINCEWAY:"PROVINCEWAY",TRA:"TRA",HSR:"HSR"};TGOS.TGDirectionType={N:"N",E:"E",S:"S",W:"W"};
TGOS.TGLocate=function(){var a=TGOS.LOCATOR_SERVICE,d=function(){};d.prototype.buildDescription=function(a,d,f,g){var k="",l="",h="";switch(a){case TGOS.TGMileageType.HIGHWAY:k="\u570b\u9053";break;case TGOS.TGMileageType.EXPRESSWAY:k="\u5feb\u901f\u9053\u8def";break;case TGOS.TGMileageType.PROVINCEWAY:k="\u7701\u9053";break;case TGOS.TGMileageType.TRA:k="\u53f0\u9435";break;case TGOS.TGMileageType.HSR:k="\u9ad8\u9435"}h=a==TGOS.TGMileageType.HSR?h+k:h+(k+g);if(a==TGOS.TGMileageType.HIGHWAY){switch(d){case TGOS.TGDirectionType.E:l=
"\u6771\u5411";break;case TGOS.TGDirectionType.W:l="\u897f\u5411";break;case TGOS.TGDirectionType.S:l="\u5357\u5411";break;case TGOS.TGDirectionType.N:l="\u5317\u5411"}h+=","+l}return h+(","+f+"\u516c\u91cc")};d.prototype.buildGeometry=function(a,d){var f=new TGOS.TGPoint;switch(d){case TGOS.TGCoordSys.EPSG3826:f.x=a.TWD97X||a["97X"];f.y=a.TWD97Y||a["97Y"];break;case TGOS.TGCoordSys.EPSG3857:f.x=a.Lng;f.y=a.Lat;break;case TGOS.TGCoordSys.EPSG3825:x97=a.TWD97X||a["97X"];y97=a.TWD97Y||a["97Y"];var g=
TGOS.TWD97toTWD97_119(x97,y97);f.x=g.x;f.y=g.y}return{location:f,bounds:new TGOS.TGEnvelope(f.x,f.y,f.x,f.y),viewport:f}};d.prototype.mileage=function(b,d,f){var g=this,k=b.mileageType,l=b.roadCode,h=b.directionType,s=b.mileageNum;b=a+"?op=mileage&mt="+k.toLowerCase()+"&dt="+h+"&rc="+l+"&mn="+s;TGOS.getJSON(b,function(a){var b="";a&&a.Table?0>=a.Table.length?(b=TGOS.TGLocatorStatus.ZERO_RESULTS,f.call(g,null,null,b)):(b=g.buildDescription(k,h,s,a.Table[0].Number),a=g.buildGeometry(a.Table[0],d),f&&
f.call(g,b,a,"OK")):(b=TGOS.TGLocatorStatus.ERROR,f.call(g,null,null,b))})};return d}();(function(){var a=["Document","Folder","Placemark"];TGOS.TGKmlLayerOption=function(){this.suppressInfoWindows=this.preserveViewport=this.map=null};TGOS.TGKmlLayerMetaData=function(){this.snippet=this.name=this.description=this.author=null};TGOS.KmlMouseEvent=function(){this.pixelOffset=this.point=this.feature=null};TGOS.KmlFeatureData=function(){this.snippet=this.name=this.description=this.author=null};TGOS.KmlAuthor=function(){this.uri=this.name=this.email=null};TGOS.TGKmlLayerStatus={DOCUMENT_NOT_FOUND:"DOCUMENT_NOT_FOUND",
DOCUMENT_TOO_LARGE:"DOCUMENT_TOO_LARGE",FETCH_ERROR:"FETCH_ERROR",INVALID_DOCUMENT:"INVALID_DOCUMENT",INVALID_REQUEST:"INVALID_REQUEST",LIMITS_EXCEEDED:"LIMITS_EXCEEDED",OK:"OK",TIMED_OUT:"TIMED_OUT",UNKNOWN:"UNKNOWN"};TGOS.TGKmlLayer=function(d,b,e){var f=this,g=b.map,k="number"==typeof b.zIndex?b.zIndex:0,l=g.getCoordSys(),h={author:{email:"",name:"",uri:""},description:"",name:"",snippet:""},s,m=new TGOS.TGInfoWindow("",null,{pixelOffset:new TGOS.TGSize(0,0)}),t=null;this.overlays=[];this.points=
[];this.polygons=[];this.polylines=[];this.groundoverlays=[];this.icons=[];this.getDefaultViewport=function(){if(!t){for(var a=Infinity,b=-Infinity,d=-Infinity,e=Infinity,f=0;f<this.overlays.length;f++)var g=this.overlays[f].getBounds(),a=Math.min(a,g.left),e=Math.min(e,g.bottom),b=Math.max(b,g.right),d=Math.max(d,g.top);for(f=0;f<this.polylines.length;f++)g=this.polylines[f].getPath().getEnvelope(),a=Math.min(a,g.left),e=Math.min(e,g.bottom),b=Math.max(b,g.right),d=Math.max(d,g.top);for(f=0;f<this.groundoverlays.length;f++)g=
this.groundoverlays[f].getBounds(),a=Math.min(a,g.left),e=Math.min(e,g.bottom),b=Math.max(b,g.right),d=Math.max(d,g.top);for(f=0;f<this.polygons.length;f++)g=this.polygons[f].getBounds(),a=Math.min(a,g.left),e=Math.min(e,g.bottom),b=Math.max(b,g.right),d=Math.max(d,g.top);for(g=0;g<this.points.length;g++)f=this.points[g].getPosition(),a=Math.min(a,f.x),e=Math.min(e,f.y),b=Math.max(b,f.x),d=Math.max(d,f.y);if(!(isFinite(a)&&isFinite(d)&&isFinite(b)&&isFinite(e)))return null;t=new TGOS.TGEnvelope(a,
d,b,e)}return t};this.getMetadata=function(){return h};this.getStatus=function(){return s};this.parseCoordinates=function(a,b){for(var d=a.replace(/[\s]*$/gi,"").replace(/^[\s]*/gi,"").split(/[\s]+/),e=[],f=0;f<d.length;f++){var g=d[f].split(",");switch(b){case "EPSG3826":var h=TGOS.WGS84toTWD97(parseFloat(g[0]),parseFloat(g[1]));break;case "EPSG3825":h=TGOS.WGS84toTWD97_119(parseFloat(g[0]),parseFloat(g[1]));break;case "EPSG3857":h={x:parseFloat(g[0]),y:parseFloat(g[1])}}h.x&&h.y&&e.push(new TGOS.TGPoint(h.x,
h.y))}return e};this.setZIndex=function(a){k=a;for(a=0;a<this.polygons.length;a++)this.polygons[a].setZIndex(k,!1);for(a=0;a<this.polylines.length;a++)this.polylines[a].setZIndex(k,!1);for(a=0;a<this.groundoverlays.length;a++)this.groundoverlays[a].setZIndex(k,!1);for(var b=0;b<this.points.length;b++)this.points[a].setZIndex(k,!1)};this.getZIndex=function(){return k};this.createPoint=function(a){switch(l){case "EPSG3826":var b=this.parseCoordinates(a.coordinates,"EPSG3826");break;case "EPSG3825":b=
this.parseCoordinates(a.coordinates,"EPSG3825");break;case "EPSG3857":b=this.parseCoordinates(a.coordinates,"EPSG3857")}if(!(1>b.length))return b[0]};this.parseRing=function(a,b){switch(b){case "EPSG3826":var d=this.parseCoordinates(a.coordinates,"EPSG3826");break;case "EPSG3825":d=this.parseCoordinates(a.coordinates,"EPSG3825");break;case "EPSG3857":d=this.parseCoordinates(a.coordinates,"EPSG3857")}d=new TGOS.TGLineString(d);return new TGOS.TGLinearRing(d)};this.createPolygon=function(a){var b=[],
d=this.parseRing(a.outerBoundaryIs.LinearRing,l);b.push(d);if(a=a.innerBoundaryIs)if(a.length)for(d=0;d<a.length;d++)if(a[d].LinearRing.length)for(var e=0;e<a[d].LinearRing.length;e++){var f=this.parseRing(a[d].LinearRing[e],l);b.push(f)}else f=this.parseRing(a[d].LinearRing,l),b.push(f);else f=this.parseRing(a.LinearRing,l),b.push(f);return new TGOS.TGPolygon(b)};this.createPolyLine=function(a){switch(l){case "EPSG3826":var b=this.parseCoordinates(a.coordinates,"EPSG3826");break;case "EPSG3825":b=
this.parseCoordinates(a.coordinates,"EPSG3825");break;case "EPSG3857":b=this.parseCoordinates(a.coordinates,"EPSG3857")}return new TGOS.TGLineString(b)};this.handleGroundOverlay=function(a){function d(a){var e=new TGOS.TGImage(a.Icon.href);switch(l){case "EPSG3826":var h=TGOS.WGS84toTWD97(parseFloat(a.LatLonBox.west),parseFloat(a.LatLonBox.north));a=TGOS.WGS84toTWD97(parseFloat(a.LatLonBox.east),parseFloat(a.LatLonBox.south));var k=h.x,h=h.y,m=a.x,u=a.y;break;case "EPSG3825":h=TGOS.WGS84toTWD97_119(parseFloat(a.LatLonBox.west),
parseFloat(a.LatLonBox.north));a=TGOS.WGS84toTWD97_119(parseFloat(a.LatLonBox.east),parseFloat(a.LatLonBox.south));k=h.x;h=h.y;m=a.x;u=a.y;break;case "EPSG3857":k=parseFloat(a.LatLonBox.west),h=parseFloat(a.LatLonBox.north),m=parseFloat(a.LatLonBox.east),u=parseFloat(a.LatLonBox.south)}k=new TGOS.TGEnvelope(k,h,m,u);e=new TGOS.TGGroundOverlay(g,e,k,1);TGOS.TGEvent.addListener(e,"click",q);TGOS.TGEvent.addListener(e,"mousedown",w);TGOS.TGEvent.addListener(e,"mouseup",z);TGOS.TGEvent.addListener(e,
"mousemove",A);TGOS.TGEvent.addListener(e,"mouseout",C);TGOS.TGEvent.addListener(e,"dblclick",F);TGOS.TGEvent.addListener(e,"rightclick",B);b.suppressInfoWindows||TGOS.TGEvent.addListener(e,"click",n);f.groundoverlays.push(e)}if(a.length)for(var e=0;e<a.length;e++)d(a[e]);else d(a)};this.handleNetworkLink=function(a){var b="";if(a.length)for(var d=0;d<a.length;d++){if(a[d].hasOwnProperty("Url"))b=a[d].Url.href;else if(a[d].hasOwnProperty("Link"))b=a[d].Link.href;else continue;-1==b.indexOf(".kmz")&&
TGOS.getJSON(b,function(a){a.error||f.parseKML(a.kml)},TGOS.PROXY_SERVICE2)}else{if(a.hasOwnProperty("Url"))b=a.Url.href;else if(a.hasOwnProperty("Link"))b=a.Link.href;else return;-1==b.indexOf(".kmz")&&TGOS.getJSON(b,function(a){a.error||f.parseKML(a.kml)},TGOS.PROXY_SERVICE2)}};this.handleDescription=function(a){};this.handleAuthor=function(a){a.hasOwnProperty("atom:name")&&(h.author.name=a["atom:name"]);a.hasOwnProperty("atom:link")&&(h.author.uri=a["atom:link"]["@href"])};this.handleMultiGeometry=
function(a){var b=[],d;for(d in a)switch(d){case "Point":if(a.Point.length)for(var e=0;e<a.Point.length;e++){var f=this.createPoint(a.Point[e]);f&&b.push(f)}else this.createPoint(a.Point),(f=this.createPoint(a.Point))&&b.push(f);break;case "Polygon":if(a.Polygon.length)for(e=0;e<a.Polygon.length;e++)(f=this.createPolygon(a.Polygon[e]))&&b.push(f);else(f=this.createPolygon(a.Polygon))&&b.push(f);break;case "LineString":if(a.LineString.length)for(e=0;e<a.LineString.length;e++)(f=this.createPolyLine(a.LineString[e]))&&
b.push(f);else(f=this.createPolyLine(a.LineString))&&b.push(f);break;case "MultiGeometry":if(a.MultiGeometry.length)for(e=0;e<a.MultiGeometry.length;e++)(f=this.handleMultiGeometry(a.MultiGeometry[e]))&&(b=b.concat(f));else(f=this.handleMultiGeometry(a.MultiGeometry))&&(b=b.concat(f))}return b};this.parseGeometry=function(a){var b=[];a.hasOwnProperty("Point")?(a=this.createPoint(a.Point))&&b.push(a):a.hasOwnProperty("Polygon")?(a=this.createPolygon(a.Polygon))&&b.push(a):a.hasOwnProperty("LineString")?
(a=this.createPolyLine(a.LineString))&&b.push(a):a.hasOwnProperty("MultiGeometry")&&(a=this.handleMultiGeometry(a.MultiGeometry,a))&&(b=b.concat(a));return b};this.createRandomColor=function(){return{r:parseInt(255*Math.random()),g:parseInt(255*Math.random()),b:parseInt(255*Math.random())}};this.parseKmlColor=function(a,b,d){b=parseInt(a.substring(0,2),16);var e=parseInt(a.substring(2,4),16),f=parseInt(a.substring(4,6),16),g=parseInt(a.substring(6,8),16);"random"==d&&("ffffffff"==a?(a=this.createRandomColor(),
e=a.b,g=a.r,f=a.g):(e*=Math.random(),f*=Math.random(),g*=Math.random()));return{a:b/255,b:parseInt(e),g:parseInt(f),r:parseInt(g)}};this.matchSharedStyle=function(a,b){if(b&&a)if(b=b.replace("#",""),a instanceof Array)for(var d=0;d<a.length;d++){if(a[d]["@id"]==b)return a[d]}else if(a["@id"]==b)return a};this.createStyle=function(a,b){var d=a.inStyle?a.inStyle:this.matchSharedStyle(a.sharedStyle,a.styleUrl),e={fillColor:{a:null,r:null,g:null,b:null},lineWidth:null,lineColor:{a:null,r:null,g:null,
b:null}};if(d){if(d.LineStyle){if(d.LineStyle.color){var f=this.parseKmlColor(d.LineStyle.color,b,d.LineStyle.colorMode);e.lineColor=f}"string"==typeof d.LineStyle.width&&(e.lineWidth=parseFloat(d.LineStyle.width))}d.PolyStyle&&(d.PolyStyle.color&&(f=this.parseKmlColor(d.PolyStyle.color,b,d.PolyStyle.colorMode),e.fillColor=f),"0"==d.PolyStyle.fill&&(e.fillColor.a=0),"0"==d.PolyStyle.outline&&(e.lineColor.a=0))}return e};this.colorToHex=function(a){if("number"==typeof a.r||"number"==typeof a.g||"number"==
typeof a.b){var b=a.r.toString(16);16>a.r&&(b="0"+b);var d=a.g.toString(16);16>a.g&&(d="0"+d);var e=a.b.toString(16);16>a.b&&(e="0"+e);return"#"+b+d+e}};this.handlePlacemark=function(a){a.inStyle=a.Style?a.Style:a.inStyle;var d=[];if(a.length)for(var e=0;e<a.length;e++){var f=this.parseGeometry(a[e]);f&&(d=d.concat(f))}else(f=this.parseGeometry(a))&&(d=d.concat(f));for(e=0;e<d.length;e++){f=this.createStyle(a,e/d.length);if(d[e]instanceof TGOS.TGPolygon){var h=new TGOS.TGFill(g,d[e],{fillColor:this.colorToHex(f.fillColor),
fillOpacity:f.fillColor.a,strokeWeight:f.lineWidth,strokeColor:this.colorToHex(f.lineColor),strokeOpacity:f.lineColor.a,zIndex:k});this.polygons.push(h)}else d[e]instanceof TGOS.TGLineString?(h=new TGOS.TGLine(g,d[e],{strokeWeight:f.lineWidth,strokeColor:this.colorToHex(f.lineColor),strokeOpacity:f.lineColor.a,zIndex:k}),this.polylines.push(h)):d[e]instanceof TGOS.TGPoint&&(h=new TGOS.TGMarker(g,d[e],null,null,{zIndex:k}),this.points.push(h));h.targetPlacemark=a;TGOS.TGEvent.addListener(h,"click",
q);TGOS.TGEvent.addListener(h,"mousedown",w);TGOS.TGEvent.addListener(h,"mouseup",z);TGOS.TGEvent.addListener(h,"mousemove",A);TGOS.TGEvent.addListener(h,"mouseout",C);TGOS.TGEvent.addListener(h,"dblclick",F);TGOS.TGEvent.addListener(h,"rightclick",B);b.suppressInfoWindows||TGOS.TGEvent.addListener(h,"click",n)}};this.getStyleColorById=function(a,b){if(styles)if(styles.length)for(var d=0;d<styles.length;d++){if(b.slice(1,b.length)==styles[d].id){var e=styles[d].colorMode;if("random"==e)return null;
if("line"==a&&styles[d].LineStyle)return e=styles[d].LineStyle.colorMode,"random"==e?null:{a:styles[d].LineStyle.color.slice(0,2),b:styles[d].LineStyle.color.slice(2,4),g:styles[d].LineStyle.color.slice(4,6),r:styles[d].LineStyle.color.slice(6,8)};if("poly"==a&&styles[d].PolyStyle)return e=styles[d].PolyStyle.colorMode,"random"==e?null:{a:styles[d].PolyStyle.color.slice(0,2),b:styles[d].PolyStyle.color.slice(2,4),g:styles[d].PolyStyle.color.slice(4,6),r:styles[d].PolyStyle.color.slice(6,8)}}}else{if("line"==
a&&styles.LineStyle)return e=styles.LineStyle.colorMode,"random"==e?null:{a:styles.LineStyle.color.slice(0,2),b:styles.LineStyle.color.slice(2,4),g:styles.LineStyle.color.slice(4,6),r:styles.LineStyle.color.slice(6,8)};if("poly"==a&&styles.PolyStyle)return e=styles.PolyStyle.colorMode,"random"==e?null:{a:styles.PolyStyle.color.slice(0,2),b:styles.PolyStyle.color.slice(2,4),g:styles.PolyStyle.color.slice(4,6),r:styles.PolyStyle.color.slice(6,8)}}};this.parseFeature=function(a,b){var d=a.Style?a.Style:
null,e;for(e in a){var f=a[e];switch(e){case "Document":f.inStyle=d?d:null;if(f instanceof Array)for(var g=0;g<f.length;g++){var h=f[g];h.inStyle=h.Style?h.Style:null;this.parseFeature(h,f.Style)}else this.parseFeature(f,f.Style);break;case "Folder":f.inStyle=d?d:null;if(f instanceof Array)for(g=0;g<f.length;g++)h=f[g],h.inStyle=h.Style?h.Style:null,this.parseFeature(h,b);else this.parseFeature(f,b);break;case "Placemark":f.inStyle=d?d:null;f.sharedStyle=b;if(f instanceof Array)for(g=0;g<f.length;g++)h=
f[g],h.inStyle=h.Style?h.Style:null,h.sharedStyle=b,this.handlePlacemark(h);else f.inStyle=f.Style?f.Style:null,f.sharedStyle=b,this.handlePlacemark(f);break;case "GroundOverlay":this.handleGroundOverlay(f);break;case "NetworkLink":this.handleNetworkLink(f)}}};this.parseKML=function(b){if(b)for(var d in b)if(0<=a.indexOf(d)){this.parseFeature(b[d],b[d].Style);break}};this.removeKml=function(){if(0<this.points.length)for(var a=0;a<this.points.length;a++)this.points[a].setMap(null);if(0<this.polygons.length)for(a=
0;a<this.polygons.length;a++)this.polygons[a].setMap(null);if(0<this.polylines.length)for(a=0;a<this.polylines.length;a++)this.polylines[a].setMap(null);if(0<this.groundoverlays.length)for(a=0;a<this.groundoverlays.length;a++)this.groundoverlays[a].setMap(null);this.points=[];this.polygons=[];this.polylines=[];this.groundoverlays=[];m&&m.close()};var n=function(a){if(a.target.targetPlacemark){var b="";a.target.targetPlacemark.hasOwnProperty("description")&&(b=a.target.targetPlacemark.description.hasOwnProperty("#cdata-section")?
a.target.targetPlacemark.description["#cdata-section"]:a.target.targetPlacemark.description);m.setContent(a.target.targetPlacemark.name+"</br>"+b);m.setPosition(a.point);m.open(g)}},q=function(a){TGOS.TGEvent.trigger_(f,"click",{featureData:{author:h.author,description:a.target.description,name:a.target.name,snippet:a.target.snippet},point:a.point,pixelOffset:0})},w=function(a){TGOS.TGEvent.trigger_(f,"mousedown",{featureData:{author:h.author,description:a.target.description,name:a.target.name,snippet:a.target.snippet},
point:a.point,pixelOffset:0})},z=function(a){TGOS.TGEvent.trigger_(f,"mouseup",{featureData:{author:h.author,description:a.target.description,name:a.target.name,snippet:a.target.snippet},point:a.point,pixelOffset:0})},A=function(a){TGOS.TGEvent.trigger_(f,"mousemove",{featureData:{author:h.author,description:a.target.description,name:a.target.name,snippet:a.target.snippet},point:a.point,pixelOffset:0})},C=function(a){TGOS.TGEvent.trigger_(f,"mouseout",{featureData:{author:h.author,description:a.target.description,
name:a.target.name,snippet:a.target.snippet},point:a.point,pixelOffset:0})},F=function(a){TGOS.TGEvent.trigger_(f,"dblclick",{featureData:{author:h.author,description:a.target.description,name:a.target.name,snippet:a.target.snippet},point:a.point,pixelOffset:0})},B=function(a){TGOS.TGEvent.trigger_(f,"rightclick",{featureData:{author:h.author,description:a.target.description,name:a.target.name,snippet:a.target.snippet},point:a.point,pixelOffset:0})};s="loading";if(!d)throw"Invalid kml url";TGOS.getJSON(d,
function(a){if(!a||a.error)s=TGOS.TGKmlLayerStatus.FETCH_ERROR,"function"==typeof e&&e.call(this,s);else{var d=a.kml;d.Document?(d.Document.hasOwnProperty("description")&&(d.Document.description.hasOwnProperty("#cdata-section")?h.description=d.Document.description["#cdata-section"]:h.description=d.Document.description),d.Document.hasOwnProperty("name")&&(d.Document.name.hasOwnProperty("#cdata-section")?h.name=d.Document.name["#cdata-section"]:h.name=d.Document.name),d.Document.hasOwnProperty("Snippet")&&
(d.Document.Snippet.hasOwnProperty("#cdata-section")?h.snippet=d.Document.Snippet["#cdata-section"]:h.snippet=d.Document.Snippet),d.Document.hasOwnProperty("atom:author")&&f.handleAuthor(d.Document["atom:author"])):(d.hasOwnProperty("description")&&(d.description.hasOwnProperty("#cdata-section")?h.description=d.description["#cdata-section"]:h.description=d.description),d.hasOwnProperty("name")&&(d.name.hasOwnProperty("#cdata-section")?h.name=d.name["#cdata-section"]:h.name=d.name),d.hasOwnProperty("Snippet")&&
(d.Snippet.hasOwnProperty("#cdata-section")?h.snippet=d.Snippet["#cdata-section"]:h.snippet=d.Snippet),d.hasOwnProperty("atom:author")&&f.handleAuthor(d["atom:author"]));f.parseKML(a.kml);s=TGOS.TGKmlLayerStatus.OK;b&&!0==b.preserveViewport&&(a=f.getDefaultViewport())&&g.fitBounds(a);"function"==typeof e&&e.call(f,s)}},TGOS.PROXY_SERVICE2,function(){"function"==typeof e&&e.call(this,TGOS.TGKmlLayerStatus.FETCH_ERROR)})};TGOS.RegisterEvent(TGOS.TGKmlLayer,"click mousemove mouseout mouseover dblclick rightclick".split(" "))})();TGOS.TGWmtsLayer=function(){var a=function(a){this.matrixSet=a.matrixSet;this.matrixId=a.matrixId;this.row=a.row;this.col=a.col;this.left=a.left;this.top=a.top};a.prototype.equals=function(a){return this.matrixSet==a.matrixSet&&this.matrixId==a.matrixId&&this.row==a.row&&this.col==a.col};return function(d,b,e,f,g){var k="number"==typeof f.left?f.left:null,l="number"==typeof f.top?f.top:null,h="number"==typeof f.right?f.right:null,s="number"==typeof f.bottom?f.bottom:null,m=[],t=[],n,q=!1,w=this,z=
"number"==typeof e.dpi?25.4/e.dpi/1E3:2.8E-4,A="string"==typeof e.style?e.style:"default",C="string"==typeof e.format?e.format:"image/png",F="number"==typeof e.tileWidth?e.tileWidth:256,B="number"==typeof f.opacity?f.opacity:1,u="number"==typeof f.zIndex?f.zIndex:"auto",x=!1==f.wmtsVisible?!1:!0,D=null,v=document.createElement("div");v.style.position="absolute";v.style.left="0px";v.style.top="0px";v.style.width="100%";v.style.height="100%";v.style.zIndex=u;v.style.display=x?"":"none";document.createElement("img");
var y;this.getMatrixSetId=function(){return D["ows:Identifier"]};this.getTileOpacity=function(){return B};this.setTileOpacity=function(a){if("number"==typeof a)for(B=a,a=0;a<m.length;a++)for(var b=0;b<m[a].length;b++)null!=m[a][b]&&(m[a][b].style.opacity=B,m[a][b].style.filter="alpha(opacity="+100*B+")")};this.getSource=function(){return d};this.setZIndex=function(a){u=a;v&&(v.style.zIndex=u)};this.getZIndex=function(){return u};this.RemoveSelf=function(){n.getHObject().removeChild(v)};var E=function(){var a=
this,b=0;a.style.opacity=b;var d=B/7,e=setInterval(function(){b>=B?(a.style.filter="alpha(opacity="+100*B+")",a.style.opacity=B,clearInterval(e)):(a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")",b+=d)},33);a.style.filter="alpha(opacity=0)";this.style.display="block"},N=function(b,d,e){if(!b)return null;var f;if(b.TileMatrix.length||b.TileMatrix["ows:Identifier"]!=d)for(var g=0;g<b.TileMatrix.length;g++){if(b.TileMatrix[g]["ows:Identifier"]==d){f=b.TileMatrix[g];break}}else f=b.TileMatrix;
if(!f)return null;var g=parseFloat(f.MatrixWidth),h=parseFloat(f.MatrixHeight);mIdx=0==g?1:g-1;mIdy=0==h?1:h-1;var k=e.left,l=e.top,m=e.right,n=e.bottom;e=[];h=f.TopLeftCorner;g=parseFloat(h.split(" ")[0]);h=parseFloat(h.split(" ")[1]);f=parseFloat(f.ScaleDenominator)*F*z;var q;q=k<=g?0:Math.floor((k-g)/f);k=q+Math.ceil(Math.abs(k-m)/f)+1;m=l>=h?0:Math.floor((h-l)/f);l=m+Math.ceil(Math.abs(n-l)/f)+1;for(n=m;n<l;n++)for(m=q;m<k;m++){var s=new a({left:g+m*f,top:h-n*f,matrixId:d,matrixSet:b["ows:Identifier"],
col:m,row:n});e.push(s)}return e},J=function(a,b){for(var d=0,e=Infinity,f=a.ToMapDistX(F),g=0;g<b.TileMatrix.length;g++){var h=parseFloat(b.TileMatrix[g].ScaleDenominator)*F*z,h=Math.abs(h-f);h<e&&(e=h,d=g)}return 0.1<e/f?null:b.TileMatrix[d]["ows:Identifier"]};this.getTiles=function(a){var f=a.handler,g=new TGOS.TGEnvelope(a.rl,a.rt,a.rr,a.rb),g=U(g),h=J(n,D),g=N(D,h,g);if(!g)return null;for(var h=[],k=[],l=0;l<g.length;l++)b.getCoordSys()==TGOS.TGCoordSys.EPSG3857?(a=TGOS.GooToWGS84(g[l].left,
g[l].top),h.push(new TGOS.TGPoint(a.x,a.y))):h.push(new TGOS.TGPoint(g[l].left,g[l].top)),a=O(d,"1.0.0",e.layer,g[l].matrixSet,g[l].matrixId,g[l].row,g[l].col),k.push(a);f&&f.call(this,{leftTopAnchor:h,imageUrl:k})};this.Initialize=function(a){n=a;v.style.zIndex=this.getZIndex();n.getHObject().appendChild(v);TGOS.getJSON(d+"?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0",function(a){y=a.Capabilities;if(!y)throw"Service Error";a=y.Contents.TileMatrixSet;if("undefined"!=typeof a.length)for(var b=
0;b<a.length;b++){var d=a[b]["ows:Identifier"];if(d&&d==e.matrixSet){D=a[b];break}D=a[0]}else D=a;q=!0;w.RebuildElement();w.UpdateElement();g&&g.call(this)},TGOS.PROXY_SERVICE2)};this.UpdateElement=function(){if(q&&x&&D)for(var a=0;a<t.length;a++){var b;b=n.FromMapPoint(t[a].left,t[a].top);t[a].img.style.left=b.x+"px";t[a].img.style.top=b.y+"px"}};this.putVisible=function(a){x=a;v.style.display=a?"":"none"};this.removeWmtsLayer=function(){b.removeLayer(this)};this.getWmtsVisible=function(){return x};
this.setWmtsVisible=function(a){this.putVisible(a)};var U=function(a){null!==k&&a.left<k&&(a.left=k);null!==l&&a.top>l&&(a.top=l);null!==h&&a.right>h&&(a.right=h);null!==s&&a.bottom<s&&(a.bottom=s);return a},O=function(a,b,d,e,f,g,h){return a+"?SERVICE=WMTS&REQUEST=GetTile&VERSION="+b+"&Layer="+d+"&Style="+A+"&Format="+C+"&TileMatrixSet="+e+"&TileMatrix="+f+"&TileRow="+g+"&TileCol="+h},L;this.RebuildElement=function(){if(q&&x&&D){var a=n.ToMapPoint(0,0),f=n.ToMapPoint(n.getClientWidth(),n.getClientHeight()),
g=b.getZoom();if(L!=g&&0<t.length){for(var h=0;h<t.length;h++)v.removeChild(t[h].img);t=[]}L=g;g=J(n,D);if(null!=g){a=new TGOS.TGEnvelope(a.x,a.y,f.x,f.y);a=U(a);g=N(D,g,a);if(!g)return null;a=[];for(h=0;h<g.length;h++){for(var f=g[h],k=!1,l=0;l<t.length;l++)if(t[l].equals(f)){k=!0;break}k||a.push(f)}for(g=0;g<a.length;g++)f=a[g],k=O(d,"1.0.0",e.layer,f.matrixSet,f.matrixId,f.row,f.col),h=v,l=document.createElement("img"),l.style.display="none",l.onload=E,l.style.position="absolute",l.galleryImg=
!1,l.hideFocus=!0,l.style.MozUserSelect="none",l.border="0px",l.src=k,l.style.opacity=B,l.style.filter="alpha(opacity="+100*B+")",h.appendChild(l),f.img=l,t.push(f)}}};b.addLayer(this,!0)}}();TGOS.TGWfsLayer=function(){function a(a,b){var d=a.split("?");if(1==d.length)return null;for(var d=d[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0].toUpperCase()==b.toUpperCase())return f[1]}}var d=function(a){a=a.split(".");for(var b=[],d=0;d<a.length;d++)b.push(a[d]);return b},b=function(a,b){if("1"!=b[0]||"0"!=b[1]){a=a["#text"]||a;a=a.replace(/[\s]*$/gi,"").replace(/^[\s]*/gi,"").split(/[\s]+/);for(var d=[],e=0;e<a.length;e+=2){var f=new TGOS.TGPoint(parseFloat(a[e]),parseFloat(a[e+
1]));d.push(f)}}else{a=a["#text"]||a;for(var g=a.replace(/[\s]*$/gi,"").replace(/^[\s]*/gi,"").split(/[\s]+/),d=[],e=0;e<g.length;e++)f=g[e].split(","),f=new TGOS.TGPoint(parseFloat(f[0]),parseFloat(f[1])),d.push(f)}return d},e=function(a,b,d){var e=[],f;for(f in a){var m=a[f];if(m&&"object"===typeof m)for(var t in m)switch(t){case b+":MultiPolygon":for(var B=k(m[t],b,d),u=0;u<B.length;u++)e.push(B[u]);break;case b+":MultiSurface":B=k(m[t],b,d);for(u=0;u<B.length;u++)e.push(B[u]);break;case b+":Polygon":u=
g(m,b,d);e.push(u);break;case b+":MultiLineString":B=h(m[t],b,d);for(u=0;u<B.length;u++)e.push(B[u]);break;case b+":MultiCurve":B=h(m[t],b,d);for(u=0;u<B.length;u++)e.push(B[u]);break;case b+":LineString":u=l(m,b,d);e.push(u);break;case b+":MultiPoint":var u=b,B=d,x=m[t][u+":pointMember"],D=[];if(void 0!==x.length)for(var v=0;v<x.length;v++){var y=s(x[v],u,B);D.push(y)}else y=s(x,u,B),D.push(y);B=D;for(u=0;u<B.length;u++)e.push(B[u]);break;case b+":Point":u=s(m[b+":Point"],b,d),e.push(u)}}return e},
f=function(a,d,e){a=b(a[d+":coordinates"]||a[d+":posList"],e);a=new TGOS.TGLineString(a);return new TGOS.TGLinearRing(a)},g=function(a,b,d){var e=[];a=a[b+":Polygon"];var g=f((a[b+":outerBoundaryIs"]||a[b+":exterior"])[b+":LinearRing"],b,d);e.push(g);if(a=a[b+":innerBoundaryIs"]||a[b+":interior"])if(a instanceof Array)for(g=0;g<a.length;g++){var h=a[g][b+":LinearRing"],h=f(h,b,d);e.push(h)}else h=a[b+":LinearRing"],h=f(h,b,d),e.push(h);return new TGOS.TGPolygon(e)},k=function(a,b,d){a=a[b+":polygonMember"]||
a[b+":surfaceMember"];var e=[];if(void 0!==a.length)for(var f=0;f<a.length;f++){var h=g(a[f],b,d);e.push(h)}else h=g(a,b,d),e.push(h);return e},l=function(a,d,e){a=a[d+":LineString"];d=b(a[d+":coordinates"]||a[d+":posList"],e);return new TGOS.TGLineString(d)},h=function(a,b,d){a=a[b+":lineStringMember"]||a[b+":curveMember"];var e=[];if(void 0!==a.length)for(var f=0;f<a.length;f++){var g=l(a[f],b,d);e.push(g)}else g=l(a,b,d),e.push(g);return e},s=function(a,d,e){return b(a[d+":coordinates"]||a[d+":pos"],
e)[0]},m=function(a,b,d){this.zIndex=0;this.defaultViewport=null;this.preserveViewport=!0;this.callback=d;this.gs=[];b&&(void 0!==b.map&&this.setMap(b.map),void 0!==b.preserveViewport&&this.setPreserveViewport(b.preserveViewport),void 0!==b.zIndex&&this.setZIndex(b.zIndex),void 0!==b.wfsVisible&&this.setWfsVisible(b.wfsVisible));this.setUrl(a);this.update(this.callback)},t=m.prototype;t.update=function(b){if(this.url&&this.map){var f=a(this.url,"typeName"),g=a(this.url,"version");if(!g)throw"Invalid WFS version";
if(!f)throw"Invalid Type Name";var h=d(g);if(3!=h.length)throw"Invalid WFS version";f.split(":");var k="",l="",m=this;TGOS.getJSON(this.url,function(a){if(!a||a.error)b.call(this,a.error);else{var d,g;for(g in a)0<=g.indexOf("FeatureCollection")&&(d=a[g]);if(d){for(var s in d)if(0<=s.indexOf("@xmlns:")){if("http://www.opengis.net/gml"==d[s]||"http://www.opengis.net/gml/3.2"==d[s])k=s.replace("@xmlns:","");if("http://www.opengis.net/wfs"==d[s]||"http://www.opengis.net/wfs/2.0"==d[s])l=s.replace("@xmlns:",
"")}d=d[k+":featureMember"]||d[k+":featureMembers"]||d[k+":member"]||d[l+":member"];a=[];if(d){if(d.length)for(g=0;g<d.length;g++)for(s=e(d[g][f],k,h),t=0;t<s.length;t++)a.push(s[t]);else for(g=g=0;g<d[f].length;g++){s=e(d[f][g],k,h);for(var t=0;t<s.length;t++)a.push(s[t])}for(d=0;d<a.length;d++)a[d]instanceof TGOS.TGPolygon?(g=new TGOS.TGFill(m.map,a[d]),g.setOpacity(0.5),m.gs.push(g)):a[d]instanceof TGOS.TGLineString?(g=new TGOS.TGLine(m.map,a[d]),g.setStrokeWeight(4),m.gs.push(g)):a[d]instanceof
TGOS.TGPoint&&(g=new TGOS.TGMarker(m.map,a[d]),m.gs.push(g));m.setZIndex(m.zIndex);m.setWfsVisible(m.visible);m.map&&!0==m.preserveViewport&&m.getDefaultViewport()&&m.map.fitBounds(m.getDefaultViewport());b&&b.call(m)}}}},TGOS.PROXY_SERVICE2)}};t.setUrl=function(a,b){this.url=a};t.setPreserveViewport=function(a){this.preserveViewport=a};t.setZIndex=function(a){this.zIndex=a;for(a=0;a<this.gs.length;a++)this.gs[a].setZIndex(this.zIndex)};t.setMap=function(a){this.map=a};t.getDefaultViewport=function(){if(!this.defaultViewport){for(var a=
Infinity,b=-Infinity,d=-Infinity,e=Infinity,f=0;f<this.gs.length;f++){var g=this.gs[f].getBounds();g&&(a=Math.min(a,g.left),e=Math.min(e,g.bottom),b=Math.max(b,g.right),d=Math.max(d,g.top))}isFinite(a)&&isFinite(d)&&isFinite(b)&&isFinite(e)?this.defaultViewport=new TGOS.TGEnvelope(a,d,b,e):this.defaultViewport=null}return this.defaultViewport};t.getUrl=function(){return this.url};t.removeWfs=function(){for(var a=0;a<this.gs.length;a++)this.gs[a].setMap(null),this.gs[a]=null;this.gs=[];this.map=null};
t.getZIndex=function(){return this.zIndex};t.getWfsVisible=function(){return this.visible};t.setWfsVisible=function(a){this.visible=a;for(a=0;a<this.gs.length;a++)this.gs[a].setVisible(this.visible)};return m}();TGOS.CDC_SERVICE=getWebProtocal()+getAPIPath()+"CDCDistrict/StatisticsCombined.aspx";
TGOS.TGCounty={KEELUNG:{code:"11"},TAIPEI:{code:"01"},XINBEI:{code:"31"},TAOYUAN:{code:"32"},HSINCHUCOUNTY:{code:"33"},HSINCHUCITY:{code:"12"},MIAOLI:{code:"35"},TAICHUNG:{code:"03"},CHANGHUA:{code:"37"},NANTOU:{code:"38"},YUNLIN:{code:"39"},CHIAYICOUNTY:{code:"40"},CHIAYICITY:{code:"22"},TAINAN:{code:"05"},KAOHSIUNG:{code:"07"},PINGTUNG:{code:"43"},YILAN:{code:"34"},HUALIEN:{code:"45"},TAITUNG:{code:"46"},PENGHU:{code:"44"},KINMEN:{code:"90"},LIENCHIANG:{code:"91"}};
TGOS.TGCDCStatMapId={COUNTYMAP:"COUNTYMAP",TOWNMAP:"TOWNMAP"};TGOS.TGCDCStatServiceStatus={ERROR:"ERROR",INVALID_REQUEST:"INVALID_REQUEST",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS"};
TGOS.TGCDCDistrictStat=function(){var a=function(a,d){var f,g,k;if(!d)return null;switch(a){case "year":f=d.slice(0,4);if(isNaN(parseInt(f)))throw"Invalid Date";break;case "month":f=d.slice(0,4);g=d.slice(4,6);if(isNaN(parseInt(f))||isNaN(parseInt(g)))throw"Invalid Date";break;case "week":f=d.slice(0,4);k=d.slice(4,6);if(isNaN(parseInt(f))||isNaN(parseInt(k)))throw"Invalid Date";break;default:return null}return{year:f,month:g,week:k}},d={EPSG3857:"EPSG3857",EPSG3826:"EPSG3826"};this.stat=function(b,
e,f,g){if(f){if(!f)throw"Missing Request";if(!(e in d))throw"Invalid Coordinate System";var k=f.width;b=f.height;var l=f.diseaseCode,h=f.graduatedColor,s=f.ageGroup,m=f.statType,t=f.date1,n=f.date2,q=f.gender,w=f.classifyMethod,z=f.dateType,A=f.countyName,C=f.classes,F=f.originInfection,B=f.layer,u=f.county,x=f.preserveRatio;switch(z){case "year":break;case "month":break;case "week":break;default:throw"Invalid dateType";}f=a(z,t);n=a(z,n);if(!f||!n)throw"date1 and date2 are required";switch(F){case "0":F=
"0";break;case "1":F="1";break;default:F="all"}switch(q){case "male":q="m";break;case "female":q="f";break;case "all":q="all";break;default:q="all"}switch(s){case "0to14":s="1";break;case "15to49":s="2";break;case "50upper":s="3";break;default:s="a"}switch(m){case "confirmed":m="deter";break;case "reported":m="report";break;default:m="deter"}switch(w){case "EqualInterval":w="ei";break;case "Quantile":w="qt";break;case "StanDevi":w="sd";break;case "TBClassfy":w="2005TB";n=f;break;default:w="ei"}switch(h.toLowerCase()){case "red":h=
"red";break;case "yellow":h="yellow";break;case "green'":h="green";break;case "blue":h="blue";break;default:h="green"}switch(A){case !0:A="true";break;case !1:A="false";break;default:A="false"}l="?disease="+l;x||(l=l+"&width="+k+"&height="+b);l=l+"&layer="+B;l=l+"&classm="+w;l=l+"&color="+h;l=l+"&gender="+q;l=l+"&classes="+C;l=l+"&ag="+s;l=l+"&dateType="+z;l=l+"&sy="+f.year;l=l+"&ey="+n.year;l=l+"&label="+A;l=l+"&oi="+F;l=l+"&stattype="+m;u&&u.code&&(l=l+"&targetDist="+u.code);switch(z){case "week":l=
l+"&sw="+f.week;l=l+"&ew="+n.week;break;case "month":l=l+"&sm="+f.month,l=l+"&em="+n.month}b=TGOS.CDC_SERVICE+l+"&t=data";var D=TGOS.CDC_SERVICE+l+"&t=img&keystr="+encodeURIComponent(TGOS.tgHash),v={};TGOS.getJSON(b,function(a){if(a)if(a.error)switch(a.error){case "ZERO_RESULT":g.call(this,v,"ZERO_RESULT");break;default:g.call(this,v,"INVALID_REQUEST")}else{v.district=a.district;v.legend=a.legend;if("EPSG3826"==e)var b=parseFloat(a.bounds.left),d=parseFloat(a.bounds.top),f=parseFloat(a.bounds.right),
h=parseFloat(a.bounds.bottom);else"EPSG3857"==e&&(d=TGOS.TWD97toWGS84(a.bounds.left,a.bounds.top),a=TGOS.TWD97toWGS84(a.bounds.right,a.bounds.bottom),b=d.x,d=d.y,f=a.x,h=a.y);v.envelope=new TGOS.TGEnvelope(b,d,f,h);b=(f-b)/(d-h);x&&(D=D+"&width="+k,D=D+"&height="+k/b);v.imageUrl=D;g.call(this,v,"OK")}else g.call(this,v,"INVALID_REQUEST")})}else g.call(this,null)}};TGOS.TGMarkerCluster=function(){var a=TGOS.RES_PATH+"clusters/cluster-46-2.png",d=TGOS.RES_PATH+"clusters/cluster-52-2.png",b=TGOS.RES_PATH+"clusters/cluster-58-2.png",e=new TGOS.TGImage(TGOS.RES_PATH+"clusters/cluster-40-2.png",new TGOS.TGSize(40,40),null,new TGOS.TGPoint(20,20)),a=new TGOS.TGImage(a,new TGOS.TGSize(46,46),null,new TGOS.TGPoint(23,23)),d=new TGOS.TGImage(d,new TGOS.TGSize(52,52),null,new TGOS.TGPoint(26,26)),b=new TGOS.TGImage(b,new TGOS.TGSize(58,58),null,new TGOS.TGPoint(29,29)),
f=function(a,b){return{center:{x:a.x,y:a.y},markers:b,symbols:[]}},g=function(a,b,d){var e=this;this.map=a?a:null;this.clusters=[];this.markers=[];if(b&&b.length)for(var f=0;f<b.length;f++)this.markers.push(b[f]);this.clickable=!0;this.clickHandler=function(){e.clickable&&TGOS.TGEvent.trigger_(e,"clusterclick")};TGOS.TGEvent.addListener(a,"idle",function(){e.redrawViewport()});TGOS.TGEvent.addListener(a,"zoom_changed",function(){if(e.map.getZoom()>e.maxZoom){e.clearAll();for(var a=0;a<e.markers.length;a++)e.markers[a].setMap(e.map)}else{for(a=
0;a<e.markers.length;a++)e.markers[a].setMap(null);e.clearAll()}});d&&("number"==typeof d.bounds&&(this.bounds=d.bounds),"number"==typeof d.maxZoom&&(this.maxZoom=d.maxZoom),d.scaleClass&&"number"==typeof d.scaleClass.length&&(this.scaleClass=d.scaleClass),d.style&&"number"==typeof d.style.length&&(this.styles=d.style),d.updateCenter&&(this.updateCenter=d.updateCenter))},k=g.prototype;k.clusters=null;k.cursor="default";k.visible=!0;k.zIndex=0;k.bounds=30;k.map=null;k.markers=null;k.scaleClass=[9,
99,999];k.classifyMarker=function(a){var b=Infinity,d=null,e=this.map.getMapBase(),g=a.getPosition(),k=e.FromMapPoint(g.x,g.y),q=2*this.bounds;if(0==this.clusters.length){var w=a.getPosition(),g=f({x:w.x,y:w.y},[a]);this.clusters.push(g)}else{for(var z=0;z<this.clusters.length;z++){var A=this.clusters[z].center,w=e.FromMapPoint(A.x,A.y),A=k.x-w.x,w=k.y-w.y,A=Math.sqrt(A*A+w*w);A<=b&&(b=A,d=z)}b<=q?(b=this.clusters[d],this.updateCenter&&(b.center.x=(b.center.x*b.markers.length+g.x)/(b.markers.length+
1),b.center.y=(b.center.y*b.markers.length+g.y)/(b.markers.length+1)),b.markers.push(a),g=b):(w=a.getPosition(),g=f({x:w.x,y:w.y},[a]),this.clusters.push(g))}a.isClustered=!0;return g};k.styles=[{icon:e,label:new TGOS.TGPoint(0,0),labelColor:"#000000",labelSize:12},{icon:a,label:new TGOS.TGPoint(0,0),labelColor:"#000000",labelSize:12},{icon:d,label:new TGOS.TGPoint(0,0),labelColor:"#000000",labelSize:12},{icon:b,label:new TGOS.TGPoint(0,0),labelColor:"#000000",labelSize:12}];k.setMarkers=function(a,
b){this.markers=a;for(var d=0;d<this.markers.length;d++)this.classifyMarker(this.markers[d])};k.getClickable=function(){return this.clickable};k.setClickable=function(a){this.clickable=a};k.addMarkers=function(a,b){for(var d=0;d<a.length;d++)this.markers.push(a[d]);b&&this.redrawAll()};k.addMarker=function(a,b){this.markers.push(a);b&&this.redrawAll()};k.redrawAll=function(){if(this.map.getZoom()>this.maxZoom){this.clearAll();for(var a=0;a<this.markers.length;a++)this.markers[a].setMap(this.map)}else{for(a=
0;a<this.markers.length;a++)this.markers[a].setMap(null);this.clearAll();this.redrawViewport()}};k.clearAll=function(){for(var a=0;a<this.clusters.length;a++){for(var b=this.clusters[a],d=0;d<b.symbols.length;d++)b.symbols[d].setMap(null);b.symbols=[];for(d=0;d<b.markers.length;d++)b.markers[d].isClustered=!1}this.clusters=[]};k.getClustersCounts=function(){return this.clusters?this.clusters.length:0};k.getExtendedBounds=function(){var a=this.map.getBounds(),b=this.bounds,d=this.map.getMapBase().FromMapDistX(b),
b=this.map.getMapBase().FromMapDistY(b);return new TGOS.TGEnvelope(a.left-d,a.top+b,a.right+d,a.bottom-b)};k.redrawViewport=function(){if(this.map)if(this.map.getZoom()>this.maxZoom)this.clearAll();else{for(var a=this.getExtendedBounds(),b=0;b<this.markers.length;b++){var d=this.markers[b],e=d.getPosition();!d.isClustered&&a.contains(e)&&this.classifyMarker(this.markers[b])}for(a=0;a<this.clusters.length;a++)0>=this.clusters[a].symbols.length&&this.addClusterMarker(this.clusters[a])}};k.addClusterMarker=
function(a){var b=a.center,b=new TGOS.TGPoint(b.x,b.y),d=a.markers.length,e=new TGOS.TGMarker(this.map,b);e.setFlat(!0);e.setClickable(!0);e.setVisible(this.visible);e.setZIndex(this.zIndex);TGOS.TGEvent.addListener(e,"click",this.clickHandler);a.symbols.push(e);if(1<d){var f=new TGOS.TGLabel({map:this.map,position:b,fontColor:"#ff0000",fontSize:this.bounds,font:"tahoma",fontWeight:"bold",opacity:1,zIndex:this.zIndex,label:d+" "});f.setZIndex(this.zIndex+1);f.setVisible(this.visible);a.symbols.push(f)}a:if(b=
this.scaleClass,d=this.styles,1==a.markers.length)a.symbols[0].setIcon(a.markers[0].getIcon());else{for(e=0;e<b.length;e++)if(a.markers.length<=b[e]){b=e>d.length-1?d[d.length-1]:d[e];a.symbols[0].setIcon(b.icon);a.symbols[0].setTitle(a.markers.length);a.symbols[1].setFontColor(b.labelColor?b.labelColor:"#000000");a.symbols[1].setFontSize(b.labelSize?b.labelSize:12);b.labelAnchor&&a.symbols[1].setOffset(b.labelAnchor);break a}b=d[d.length-1];a.symbols[0].setIcon(b.icon);a.symbols[0].setTitle(a.markers.length);
a.symbols[1].setFontColor(b.labelColor?b.labelColor:"#000000");a.symbols[1].setFontSize(b.labelSize?b.labelSize:12);b.labelAnchor&&a.symbols[1].setOffset(b.labelAnchor)}TGOS.TGEvent.addListener(f,"click",this.clickHandler)};k.getScaleClass=function(){return this.scaleClass};k.setScaleClass=function(a){this.scaleClass=a};k.setClusterStyle=function(a){this.styles=a};k.getClusterStyle=function(){return this.styles};k.removeMarker=function(a,b){for(var d=0;d<this.markers.length;d++)if(this.markers[d]==
a){this.markers.splice(d,1);break}b&&this.redrawAll()};k.removeMarkers=function(a,b){for(var d=0;d<a.length;d++)for(var e=0;e<this.markers.length;e++)if(this.markers[e]==a[d]){this.markers.splice(e,1);break}b&&this.redrawAll()};k.setVisible=function(a,b){this.visible=a;b&&this.redrawAll()};k.getVisible=function(){return this.visible};k.setSearchBounds=function(a){this.bounds=a};k.getCursor=function(){return this.cursor};k.setCursor=function(a,b){this.cursor=a;b&&this.redrawAll()};k.setZIndex=function(a,
b){this.zIndex=a;b&&this.redrawAll()};k.getZIndex=function(){return this.zIndex};k.getMaxZoom=function(){return this.maxZoom};k.setMaxZoom=function(a){this.maxZoom=a};TGOS.RegisterEvent(g,["clusterclick"]);return g}();var deps,util=util||{};util.getInternetExplorerVersion=function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a};util.loadScripts=function(a,d,b){for(d=0;d<a.length;d++)document.write("<script src='"+b+a[d]+"'>\x3c/script>")};TGOS_LOADED=1;var DEBUG_MODE=!1;

TGOS.ThemeLayerID.DIPSLOPE_P="M01";TGOS.ThemeLayerID.LANDSLIDE_P="M02";TGOS.ThemeLayerID.FAULT="M03";TGOS.ThemeLayerID.HAZARD_LAND_P="M09";TGOS.ThemeLayerID.HAZARD_FLOOD_P="M10";TGOS.TGMapServiceId.DIPSLOPE_P="DIPSLOPE_P";TGOS.TGMapServiceId.LANDSLIDE_P="LANDSLIDE_P";TGOS.TGMapServiceId.FAULT="FAULT";TGOS.TGMapServiceId.HAZARD_LAND_P="HAZARD_LAND_P";TGOS.TGMapServiceId.HAZARD_FLOOD_P="HAZARD_FLOOD_P";TGOS.TGMapId.DIPSLOPE_P="DIPSLOPE_P";TGOS.TGMapId.LANDSLIDE_P="LANDSLIDE_P";TGOS.TGMapId.FAULT="FAULT";
TGOS.TGMapId.RAINFALLSTATION="RAINFALLSTATION";TGOS.TGMapId.SETTLEMENT="SETTLEMENT";TGOS.TGMapId.AGED="AGED";TGOS.TGMapId.DISABLED="DISABLED";TGOS.TGMapId.MONITOR_ROAD="MONITOR_ROAD";TGOS.TGMapId.MONITOR_BRIDGE="MONITOR_BRIDGE";TGOS.TGMapId.DEBRIS="DEBRIS";TGOS.TGMapId.DEBRISSTREAM="DEBRISSTREAM";TGOS.TGMapId.LANDSLIDE="LANDSLIDE";TGOS.TGMapId.DIPSLOPE="DIPSLOPE";TGOS.TGMapId.GAUGINGSTATION="GAUGINGSTATION";TGOS.TGMapId["1DR300"]="1DR300";TGOS.TGMapId["1DR450"]="1DR450";TGOS.TGMapId["1DR600"]="1DR600";
TGOS.MapIdInfo.DIPSLOPE_P={path:getWebProtocal()+getServicePath()+"DIPSLOPE_P/Agent.aspx",resource:"DIPSLOPE_P.cfg",layers:{DIPSLOPE_P:{name:"dbo.DIPSLOPE_P",oname:"dbo.DIPSLOPE_P_201304A",identify:{DATA_ID:"DATA_ID"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/12_DIPSLOPE_P.png",symbolName:"\u9806\u5411\u5761\u5206\u5e03\u5716"}]}}};
TGOS.MapIdInfo.LANDSLIDE_P={path:getWebProtocal()+getServicePath()+"LANDSLIDE_P/Agent.aspx",resource:"LANDSLIDE_P.cfg",layers:{LANDSLIDE_P:{name:"dbo.LANDSLIDE_P",oname:"dbo.LANDSLIDE_P_201304A",identify:{DATA_ID:"DATA_ID",SLIDE_KIND:"SLIDE_KIND"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/13_LANDSLIDE_P_A.png",symbolName:"\u5c71\u5d29\u2500\u843d\u77f3"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/13_LANDSLIDE_P_B.png",symbolName:"\u5c71\u5d29\u2500\u5ca9\u5c51\u5d29\u6ed1"},
{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/13_LANDSLIDE_P_C.png",symbolName:"\u5c71\u5d29\u2500\u5ca9\u9ad4\u6ed1\u52d5"}]}}};TGOS.MapIdInfo.FAULT={path:getWebProtocal()+getServicePath()+"FAULT/Agent.aspx",resource:"FAULT.cfg",layers:{FAULT:{name:"dbo.FAULT",oname:"dbo.FAULT_201304A",identify:{FAULT_ID:"FAULT_ID",FAULT_NAME:"FAULT_NAME",WORK:"WORK"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/14_FAULT.png",symbolName:"\u6d3b\u52d5\u65b7\u5c64\u5716"}]}}};
TGOS.MapIdInfo.HAZARD_LAND_P={path:getWebProtocal()+getServicePath()+"HAZARD_LAND_P/Agent.aspx",resource:"HAZARD_LAND_P.cfg",layers:{RAINFALLSTATION:{name:"dbo.RAINFALLSTATION",oname:"dbo.RAINFALLSTATION_201208A",identify:{NAME:"NAME",CITY:"CITY",LOCATION:"LOCATION"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_1.png",symbolName:"\u96e8\u91cf\u7ad9"}]},SETTLEMENT:{name:"dbo.SETTLEMENT",oname:"dbo.SETTLEMENT_201208A",identify:{ID:"ID",COUNTY:"COUNTY",TOWN:"TOWN",
VILLAGE:"VILLAGE",LOCATION:"LOCATION"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_2.png",symbolName:"\u805a\u843d"}]},AGED:{name:"dbo.AGED",oname:"dbo.AGED_201208A",identify:{NCDR:"NCDR",COUNTY:"COUNTY",TOWN:"TOWN",NAME:"NAME"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_3.png",symbolName:"\u793e\u798f\u6a5f\u69cb_\u8001\u4eba"}]},DISABLED:{name:"dbo.DISABLED",oname:"dbo.DISABLED_201208A",identify:{NCDR:"NCDR",COUNTY:"COUNTY",
TOWN:"TOWN",NAME:"NAME"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_4.png",symbolName:"\u793e\u798f\u6a5f\u69cb_\u8eab\u969c"}]},MONITOR_ROAD:{name:"dbo.MONITOR_ROAD",oname:"dbo.MONITOR_ROAD_201208A",identify:{ID:"ID",WORK:"WORK",MILEAGE:"MILEAGE"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_5.png",symbolName:"\u76e3\u63a7\u8def\u6bb5"}]},MONITOR_BRIDGE:{name:"dbo.MONITOR_BRIDGE",oname:"dbo.MONITOR_BRIDGE_201208A",identify:{ID:"ID",
WORK:"WORK",MILEAGE:"MILEAGE",REGION:"REGION"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_6.png",symbolName:"\u76e3\u63a7\u6a4b\u6881"}]},DEBRIS:{name:"dbo.DEBRIS",oname:"dbo.DEBRIS_201208A",identify:{DEBRISNO:"DEBRISNO",COUNTRY:"COUNTRY",TOWN:"TOWN",VILLAGE:"VILLAGE"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_7.png",symbolName:"\u571f\u77f3\u6d41\u5f71\u97ff\u7bc4\u570d"}]},DEBRISSTREAM:{name:"dbo.DEBRISSTREAM",oname:"dbo.DEBRISSTREAM_201208A",
identify:{DEBRISNO:"DEBRISNO",COUNTY01:"COUNTY01",TOWN01:"TOWN01",VILL01:"VILL01",NAME:"NAME",MARK:"MARK",ROADNAME:"ROADNAME",DW_NUMBER:"DW_NUMBER",POTENTIAL:"POTENTIAL"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_8.png",symbolName:"\u571f\u77f3\u6d41\u6f5b\u52e2\u6eaa\u6d41"}]},LANDSLIDE:{name:"dbo.LANDSLIDE",oname:"dbo.LANDSLIDE_201208A",identify:{DATA_ID:"DATA_ID",SLIDE_KIND:"SLIDE_KIND"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_A.png",
symbolName:"\u5c71\u5d29\u2500\u843d\u77f3"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_B.png",symbolName:"\u5c71\u5d29\u2500\u5ca9\u5c51\u5d29\u6ed1"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_C.png",symbolName:"\u5c71\u5d29\u2500\u5ca9\u9ad4\u6ed1\u52d5"}]},DIPSLOPE:{name:"dbo.DIPSLOPE",oname:"dbo.DIPSLOPE_201208A",identify:{DATA_ID:"DATA_ID"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/19_HAZARD_LAND_P_9.png",
symbolName:"\u9806\u5411\u5761"}]}}};
TGOS.MapIdInfo.HAZARD_FLOOD_P={resource:"HAZARD_FLOOD_P.cfg",layers:{RAINFALLSTATION:{name:"dbo.RAINFALLSTATION",oname:"dbo.RAINFALLSTATION_201208A",identify:{NAME:"NAME",CITY:"CITY",LOCATION:"LOCATION"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_1.png",symbolName:"\u96e8\u91cf\u7ad9"}]},GAUGINGSTATION:{name:"dbo.GAUGINGSTATION",oname:"dbo.GAUGINGSTATION_201208A",identify:{NAME_C:"NAME_C",CITY:"CITY",LOCATION:"LOCATION"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_2.png",
symbolName:"\u6c34\u4f4d\u7ad9"}]},AGED:{name:"dbo.AGED",oname:"dbo.AGED_201208A",identify:{NCDR:"NCDR",COUNTY:"COUNTY",TOWN:"TOWN",NAME:"NAME"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_3.png",symbolName:"\u793e\u798f\u6a5f\u69cb_\u8001\u4eba"}]},DISABLED:{name:"dbo.DISABLED",oname:"dbo.DISABLED_201208A",identify:{NCDR:"NCDR",COUNTY:"COUNTY",TOWN:"TOWN",NAME:"NAME"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_4.png",
symbolName:"\u793e\u798f\u6a5f\u69cb_\u8eab\u969c"}]},MONITOR_ROAD:{name:"dbo.MONITOR_ROAD",oname:"dbo.MONITOR_ROAD_201208A",identify:{ID:"ID",WORK:"WORK",MILEAGE:"MILEAGE"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_5.png",symbolName:"\u76e3\u63a7\u8def\u6bb5"}]},MONITOR_BRIDGE:{name:"dbo.MONITOR_BRIDGE",oname:"dbo.MONITOR_BRIDGE_201208A",identify:{ID:"ID",WORK:"WORK",MILEAGE:"MILEAGE",REGION:"REGION"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_6.png",
symbolName:"\u76e3\u63a7\u6a4b\u6881"}]},"1DR300":{name:"dbo.1DR350_NCDR",oname:"dbo.1DR350_201208A",identify:{ID:"ID",CLASS:"CLASS",NOTE:"NOTE"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_B.png",symbolName:"\u4e00\u65e5\u66b4\u96e8300,350mm\u25000.3~1\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_C.png",symbolName:"\u4e00\u65e5\u66b4\u96e8300,350mm\u25001~2\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_D.png",
symbolName:"\u4e00\u65e5\u66b4\u96e8300,350mm\u25002~3\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_E.png",symbolName:"\u4e00\u65e5\u66b4\u96e8300,350mm\u2500\u5927\u65bc3\u516c\u5c3a"}]},"1DR450":{name:"dbo.1DR450_NCDR",oname:"dbo.1DR450_201208A",identify:{ID:"ID",CLASS:"CLASS",NOTE:"NOTE"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_B.png",symbolName:"\u4e00\u65e5\u66b4\u96e8450mm\u25000.3~1\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_C.png",
symbolName:"\u4e00\u65e5\u66b4\u96e8450mm\u25001~2\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_D.png",symbolname:"\u4e00\u65e5\u66b4\u96e8450mm\u25002~3\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_E.png",symbolName:"\u4e00\u65e5\u66b4\u96e8450mm\u2500\u5927\u65bc3\u516c\u5c3a"}]},"1DR600":{name:"dbo.1DR600_NCDR",oname:"dbo.1DR600_201208A",identify:{ID:"ID",CLASS:"CLASS",NOTE:"NOTE"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_B.png",
symbolName:"\u4e00\u65e5\u66b4\u96e8600mm\u25000.3~1\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_C.png",symbolName:"\u4e00\u65e5\u66b4\u96e8600mm\u25001~2\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_D.png",symbolName:"\u4e00\u65e5\u66b4\u96e8600mm\u25002~3\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/20_HAZARD_FLOOD_P_E.png",symbolName:"\u4e00\u65e5\u66b4\u96e8600mm\u2500\u5927\u65bc3\u516c\u5c3a"}]}}};

TGOS.ROUTE_SERVICE=getWebProtocal()+getServicePath()+"TGRoute/TGRoute.aspx";TGOS.TGRoutesStatus={INVALID_REQUEST:"INVALID_REQUEST",MAX_WAYPOINTS_EXCEEDED:"MAX_WAYPOINTS_EXCEEDED",OK:"OK",OVER_QUERY_LIMIT:"OVER_QUERY_LIMIT",REQUEST_DENIED:"REQUEST_DENIED",UNKNOWN_ERROR:"UNKNOWN_ERROR",ZERO_RESULTS:"ZERO_RESULTS"};
TGOS.TGRoutes=function(){function C(a,m){if(0==a.length)return"";for(var d="MULTIPOINT(",c=0;c<a.length;c++){if("EPSG:3826"==m)d=d+"("+a[c].x+" "+a[c].y+")";else if("EPSG:3825"==m)var b=TGOS.TWD97_119toTWD97(a[c].x,a[c].y),d=d+"("+b.x+" "+b.y+")";else"EPSG:4326"==m&&(b=TGOS.WGS84toTWD97(a[c].x,a[c].y),d=d+"("+b.x+" "+b.y+")");c!=a.length-1&&(d+=",")}return d+")"}function D(a,m){for(var d=[],c=0;c<a.length;c+=2){if("EPSG:3826"==m)var b=TGOS.WGS84toTWD97(a[c+1],a[c]),b=new TGOS.TGPoint(b.x,b.y);else"EPSG:3825"==
m?(b=TGOS.WGS84toTWD97_119(a[c+1],a[c]),b=new TGOS.TGPoint(b.x,b.y)):"EPSG:4326"==m&&(b=new TGOS.TGPoint(a[c+1],a[c]));d.push(b)}return new TGOS.TGLineString(d)}var I={"EPSG:3826":"EPSG:3826","EPSG:3825":"EPSG:3825","EPSG:4326":"EPSG:4326"};this.route=function(a,m){var d=a.avoidHighways,c=a.blockpoints,b=a.coordinateSystem,E=a.destination,F=a.origin,J=a.provideRouteAlternatives,K=a.shortestRoute,x=a.unitSystem||TGOS.TGUnitSystem.METRIC,q=[],G="",H="",L=a.arrangePoint?"true":"false";F instanceof TGOS.TGPoint&&
E instanceof TGOS.TGPoint&&!(!b|!(b in I))?(q.push(F),q=q.concat(a.wayPoints),q.push(E),G=C(q,b),c&&(H=C(c,b)),TGOS.getJSON(TGOS.ROUTE_SERVICE+"?wayPoints="+G+"&arrange="+L+"&barrier="+H+"&avoidHighway="+(!0==d?"true":"")+"&alt="+(!0==J?"true":"")+"&pathtype="+(!0==K?"shortest":"best"),function(a){var c={routes:[],status:""};if(a&&a.error)c.status="REQUEST_DENIED";else if(a.Navigation){var g=Infinity,d=-Infinity,p=Infinity,t=-Infinity,q=[],f={bounds:new TGOS.TGEnvelope,copyrights:"TGOS MAP @2013 \u5167\u653f\u90e8\uff0c\u4ea4\u901a\u90e8",
legs:[]},u=[];a.Navigation.route.length?u=a.Navigation.route:u.push(a.Navigation.route);for(a=0;a<u.length;a++){var k=u[a],v=[];k.path.length?v=k.path:v.push(k.path);for(var y=0;y<v.length;y++){var e=v[y],s={unit:x,distance:"IMPERIAL"==x?3.281*parseFloat(e.distance.value):parseFloat(e.distance.value),steps:[],time:parseFloat(e.duration.value)},g=k.bounds.southwest.lon<g?k.bounds.southwest.lon:g,p=k.bounds.southwest.lat<p?k.bounds.southwest.lat:p,d=k.bounds.northwest.lon>d?k.bounds.northwest.lon:d,
t=k.bounds.northwest.lat>t?k.bounds.northwest.lat:t;if("EPSG:3826"==b){var h=TGOS.WGS84toTWD97(e.end_location.lon,e.end_location.lat),n=TGOS.WGS84toTWD97(e.start_location.lon,e.start_location.lat);s.endLocation=new TGOS.TGPoint(h.x,h.y);s.startLocation=new TGOS.TGPoint(n.x,n.y)}else"EPSG:3825"==b?(h=TGOS.WGS84toTWD97(e.end_location.lon,e.end_location.lat),n=TGOS.WGS84toTWD97(e.start_location.lon,e.start_location.lat),s.endLocation=new TGOS.TGPoint(h.x,h.y),s.startLocation=new TGOS.TGPoint(n.x,n.y)):
"EPSG:4326"==b&&(s.endLocation=new TGOS.TGPoint(e.end_location.lon,e.end_location.lat),s.startLocation=new TGOS.TGPoint(e.start_location.lon,e.start_location.lat));var w=[];e.segment.length?w=e.segment:w.push(e.segment);for(var z=0;z<w.length;z++){var r=w[z];if("EPSG:3826"==b)var h=TGOS.WGS84toTWD97(e.end_location.lon,e.end_location.lat),n=TGOS.WGS84toTWD97(r.start_locaiton.lon,r.start_locaiton.lat),A=new TGOS.TGPoint(h.x,h.y),B=new TGOS.TGPoint(n.x,n.y);else"EPSG:3825"==b?(h=TGOS.WGS84toTWD97(e.end_location.lon,
e.end_location.lat),n=TGOS.WGS84toTWD97(r.start_locaiton.lon,r.start_locaiton.lat),A=new TGOS.TGPoint(h.x,h.y),B=new TGOS.TGPoint(n.x,n.y)):"EPSG:4326"==b&&(A=new TGOS.TGPoint(e.end_location.lon,e.end_location.lat),B=new TGOS.TGPoint(e.start_location.lon,e.start_location.lat));h={endLocation:A,instructions:r.instructions,path:D(util.decompress(r.polyline.points,6),b),time:parseFloat(r.duration.value),distance:"IMPERIAL"==x?3.281*parseFloat(r.distance.value):parseFloat(r.distance.value),startLocation:B};
s.steps.push(h)}f.legs.push(s)}q=q.concat(util.decompress(k.overview_polyline.points,6))}"EPSG:3826"==b?(d=TGOS.WGS84toTWD97(d,t),g=TGOS.WGS84toTWD97(g,p),f.bounds.setLeft(g.x),f.bounds.setRight(d.x),f.bounds.setTop(d.y),f.bounds.setBottom(g.y)):"EPSG:3825"==b?(d=TGOS.WGS84toTWD97(d,t),g=TGOS.WGS84toTWD97(g,p),f.bounds.setLeft(g.x),f.bounds.setRight(d.x),f.bounds.setTop(d.y),f.bounds.setBottom(g.y)):"EPSG:4326"==b&&(f.bounds.setLeft(g),f.bounds.setRight(d),f.bounds.setTop(t),f.bounds.setBottom(p));
for(l=p=g=0;l<f.legs.length;l++)g+=f.legs[l].distance,p+=f.legs[l].time;f.distance=g;f.time=p;f.overviewPath=D(q,b);c.routes.push(f);c.status="OK";TGOS.Log("web","A16","")}else c.status=TGOS.TGRoutesStatus.ZERO_RESULTS;m.call(this,c)})):m&&m.call(this,TGOS.TGRoutesStatus.INVALID_REQUEST)}};

TGOS.ThemeLayerID.HMS="M20";TGOS.ThemeTileID.CITYZONING="T02";TGOS.ThemeTileID.RURALZONING="T03";TGOS.ThemeTileID.TOPO1000="T01";TGOS.TGMapServiceId.CITYZONING="CITYZONING";TGOS.TGMapServiceId.RURALZONING="RURALZONING";TGOS.TGMapServiceId.TOPO1000="TOPO1000";TGOS.TGMapServiceId.TOPO1000_119="TOPO1000_119";TGOS.TGMapServiceId.HMS="HMS";TGOS.TGMapId.HMS="HMS";
TGOS.MapIdInfo.TOPO1000={tileoverlay:{path:getWebProtocal()+getAPIPath()+"TGOS_WMTS/TWD97/SimpleWMTS_TOPO10003826.aspx",layer:"Map",matrixSet:"TGOS97_TOPO1000.cfg"},resource:"CITYZONING.cfg",layers:{CITYZONING:{name:"dbo.CITYZONING",oname:"dbo.CITYZONING_201304A",identify:{Name:"Name",Classification:"Classification",County:"County"}}}};
TGOS.MapIdInfo.TOPO1000_119={tileoverlay:{path:getWebProtocal()+getAPIPath()+"TGOS_WMTS/TWD97/SimpleWMTS_TOPO10003826.aspx",layer:"Map",matrixSet:"TGOS97_TOPO1000_119.cfg"},resource:"CITYZONING.cfg",layers:{CITYZONING:{name:"dbo.CITYZONING",oname:"dbo.CITYZONING_201304A",identify:{Name:"Name",Classification:"Classification",County:"County"}}}};
TGOS.MapIdInfo.CITYZONING={tileoverlay:{path:getWebProtocal()+getAPIPath()+"TGOS_WMTS/TWD97/SimpleWMTS_CITYZONING3826.aspx",layer:"Map",matrixSet:"TGOS97_CITYZONING.cfg"},resource:"CITYZONING.cfg",layers:{CITYZONING:{name:"dbo.CITYZONING",oname:"dbo.CITYZONING_201304A",identify:{Name:"Name",Classification:"Classification",County:"County"}}}};
TGOS.MapIdInfo.RURALZONING={resource:"RURALZONING.cfg",tileoverlay:{path:getWebProtocal()+getAPIPath()+"/TGOS_WMTS/TWD97/SimpleWMTS_RURALZONING3826.aspx",layer:"Map",matrixSet:"TGOS97_RURALZONING.cfg"},layers:{RURAL:{name:"dbo.RURAL",oname:"dbo.RURAL_201304A",identify:{Code_Cou:"Code_Cou",Classification:"Classification"}},PARK:{name:"dbo.PARK",oname:"dbo.PARK_201304A",identify:{Name:"Name",Classification:"Classification"}}}};
TGOS.MapIdInfo.HMS={resource:"HMS.cfg",layers:{HMS:{name:"dbo.HMS",oname:"dbo.HMS_201205A",identify:{TYPE:"TYPE",NAME:"NAME",ADDRESS:"ADDRESS",MANAGER:"MANAGER",CONTACT:"CONTACT"},buffer:{TYPE:"TYPE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",MANAGER:"MANAGER",CONTACT:"CONTACT"},query:{TYPE:"TYPE",NAME:"NAME",COUNTY:"COUNTY",TOWN:"TOWN",ADDRESS:"ADDRESS",MANAGER:"MANAGER",CONTACT:"CONTACT"}}}};

TGOS.TGMapTypeId.MOTCMAP="MOTCMAP";TGOS.TGMapTypeIdCode.MOTCMAP="B03";TGOS.TGMapTypeId_zh_TW.MOTCMAP="\u8def\u7db2\u6578\u503c\u5716";TGOS.MapTypeDocumentName.MOTCMAP=getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_MOTCMAP3826.aspx";TGOS.MapTypeDocumentNameGoogle.MOTCMAP=getWebProtocal()+getAPIPath()+"Agent/Google/Agent_MOTCMAP3857.aspx";TGOS.MapTypeIndexViewId_zh_TW.MOTCMAP="\u8def\u7db2\u6578\u503c\u5716\u7d22\u5f15";TGOS.MapTypeIndexViewDocumentName.MOTCMAP=getWebProtocal()+getAPIPath()+"Agent/TWD97/Agent_MOTCMAP3826_IV.aspx";
TGOS.MapTypeIndexViewDocumentNameGoogle.MOTCMAP=getWebProtocal()+getAPIPath()+"Agent/Google/Agent_MOTCMAP3857_IV.aspx";TGOS.MapTypeBackgroundColor.MOTCMAP="#a5bfdd";TGOS.MapTypeMaxZoomLevel.EPSG3825.MOTCMAP=13;TGOS.MapTypeMaxZoomLevel.EPSG3826.MOTCMAP=13;TGOS.MapTypeMaxZoomLevel.EPSG3857.MOTCMAP=19;TGOS.ThemeLayerID.MEDICAL="M17";TGOS.ThemeLayerID.FLOOD_P="M07";TGOS.TGMapServiceId.MEDICAL="MEDICAL";TGOS.TGMapServiceId.FLOOD_P="FLOOD_P";TGOS.TGMapId.MEDICAL="MEDICAL";TGOS.TGMapId["1DI200"]="1DI200";
TGOS.TGMapId["1DR300"]="1DR300";TGOS.TGMapId["1DR450"]="1DR450";TGOS.TGMapId["1DR600"]="1DR600";
TGOS.MapIdInfo.FLOOD_P={resource:"FLOOD_P.cfg",layers:{"1DI200":{name:"dbo.1DI200",oname:"dbo.1DI200_201207A",identify:{COUN_NAME:"COUN_NAME",WDEPTH:"WDEPTH"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_2.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u91cd\u73fe\u671f200\u5e74\u25000.3~1\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_3.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u91cd\u73fe\u671f200\u5e74\u25001~2\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_4.png",
symbolname:"\u4e00\u65e5\u7d2f\u8a08\u91cd\u73fe\u671f200\u5e74\u25002~3\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_5.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u91cd\u73fe\u671f200\u5e74\u2500\u5927\u65bc3\u516c\u5c3a"}]},"1DR450":{name:"dbo.1DR450",oname:"dbo.1DR450_201207A",identify:{COUN_NAME:"COUN_NAME",WDEPTH:"WDEPTH"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_2.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf450mm\u25000.3~1\u516c\u5c3a"},
{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_3.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf450mm\u25001~2\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_4.png",symbolname:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf450mm\u25002~3\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_5.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf450mm\u2500\u5927\u65bc3\u516c\u5c3a"}]},"1DR600":{name:"dbo.1DR600",oname:"dbo.1DR600_201207A",
identify:{COUN_NAME:"COUN_NAME",WDEPTH:"WDEPTH"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_2.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf600mm\u25000.3~1\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_3.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf600mm\u25001~2\u516c\u5c3a"},{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_4.png",symbolname:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf600mm\u25002~3\u516c\u5c3a"},
{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/17_FLOOD_P_5.png",symbolName:"\u4e00\u65e5\u7d2f\u8a08\u96e8\u91cf600mm\u2500\u5927\u65bc3\u516c\u5c3a"}]}}};
TGOS.MapIdInfo.MEDICAL={resource:"MEDICAL.cfg",layers:{MEDICAL:{name:"dbo.MEDICAL",oname:"dbo.MEDICAL_201304A",identify:{BAS_AGENCY:"BAS_AGENCY",BAS_NAME:"BAS_NAME",BAS_TEL_NO:"BAS_TEL_NO",OLDADDR1:"OLDADDR1"},buffer:{BAS_AGENCY:"BAS_AGENCY",BAS_NAME:"BAS_NAME",BAS_AUTHOR:"BAS_AUTHOR",BAS_TYPE:"BAS_TYPE",BAS_ZONE_C:"BAS_ZONE_C",BAS_ZONE_N:"BAS_ZONE_N",BAS_TEL_NO:"BAS_TEL_NO",COUNTY:"COUNTY",TOWN:"TOWN",OLDADDR1:"OLDADDR1",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",
N:"N"},query:{BAS_AGENCY:"BAS_AGENCY",BAS_NAME:"BAS_NAME",BAS_AUTHOR:"BAS_AUTHOR",BAS_TYPE:"BAS_TYPE",BAS_ZONE_C:"BAS_ZONE_C",BAS_ZONE_N:"BAS_ZONE_N",BAS_TEL_NO:"BAS_TEL_NO",COUNTY:"COUNTY",TOWN:"TOWN",OLDADDR1:"OLDADDR1",X_97121:"X_97121",Y_97121:"Y_97121",X_97119:"X_97119",Y_97119:"Y_97119",E:"E",N:"N"},legends:[{iconUrl:"http://api.tgos.nat.gov.tw/TGOS_API/ThemeLegend/27_MEDICAL.png",symbolName:"\u91ab\u7642\u9662\u6240"}]}}};
